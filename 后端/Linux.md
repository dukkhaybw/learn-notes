## Linux操作系统



- 课程学习内容
- 学习Linux的各个阶段
- 学习Linux的方法与技巧建议



以centos7.6和8版本为主。



这套课程内同分为七大部分：

基础篇

- Linux入门
- VM和Linux安装
- Linux目录结构

实操篇

- 远程登录（XShell和XFtp）
- Vi和Vim编辑器使用
- 开机，重启和用户登录注销
- 实用指令
- 定时任务调度
- 磁盘分区和挂载
- 进程管理
- RPM和YUM包管理
- 网络配置
- 用户管理



高级篇

- 日志管理

- 定制自己的linux

- 内核裁剪

- Linux整体运行机制

- 内核源码和内核升级

- Linux备份与恢复

- Linux可视化管理（webmin）bt运维工具

- Linux入侵检测

- 权限划分

- 系统优化

  

java定制篇

- Linux搭建JavaEE环境
- JDK安装
- Idea 的安装
- Tomcat的安装
- MySQL的安装



大数据定制篇

- Shell编程
- 概述
- Shell脚本执行方式
- Shell变量
- 运算符条件判断
- 流程控制
- 函数
- 定时维护MySQL数据库



python定制篇

- Python专业开发平台-Ubuntu
- Ubuntu下开发Python开发环境
- APT软件管理和远程登录



面试题篇

 通过面试题加深对Linux知识的理解



目标：全面系统的掌握Linux技术，在工作中灵活使用和能优化系统。





学习Linux的几个阶段：

- Linux环境下基本操作命令，文件操作命令，编辑工具的使用，用户管理
- Linux的各种配置，环境变量配置，网络的配置，服务的配置
- Linux下搭建各种开发环境，如javaee的，大数据，python开发环境搭建
- 掌握基本的shell脚本的编写，对Linux服务器进行维护
- 能进行安全设置，防止攻击，保障服务器的正常运行，能对系统进行调优
- 深入理解Linux内核
- 掌握大型网站应用框架的组成，并熟悉各个环节的部署和维护 





学习方法建议：

- 学习Linux先整体再细节
- 学会查询指令和命令，要会查询
- 先知道怎么做在知道为什么
- 一定要实践
- Linux不是编程，重点是实际操作各种常用指令





## Linux的应用场景

- 在Linux下开发项目
  - JavaEE
  - 大数据
  - Python
  - Php
  - C/C++
  - Go
- Linux运维
  - 服务器规划
  - 调试优化
  - 系统监控
  - 故障处理
  - 数据的备份和恢复
  - 日志分析
  - 服务器宕机后的恢复
  - 一般管理的都是一个服务器集群
- Linux嵌入式开发
  - Linux操作系统下各种驱动的开发
  - 在嵌入式系统中进行应用开发

 



## Linux入门

Linux是一个操作系统，安全，稳定且处理多并发能力强。 



linux 运行稳定、对网络的良好支持性、低成本,且可以根据需要进行软件裁剪，内核最小可以达到几百 KB 等特点，在嵌入式领域的应用得到非常大的提高。
主要应用:机顶盒、数字电视、网络电话、程控交换机、手机、PDA、智能家居、智能硬件等都是其应用领域。以后在物联网中应用会更加广泛。



多用户分时操作系统。





### VM和Linux的安装

主机，虚拟机和Linux操作系统之间得关系：

![image-20240914102813791](D:\learn-notes\后端\images\image-20240914102813791.png)



**安装VM15.5**

注意安装可能需要进入系统bios界面开启虚拟化设备支持。

基本是傻瓜式安装。





**安装CentOS7.6**

centos7.6下载地址：http://mirrors.163.com/centos/7.6.1810/isos/x86_64/CentOS-7-x86_64-DVD-1810.iso

- 创建虚拟机

  ![image-20240914143215729](D:\learn-notes\后端\images\image-20240914143215729.png)

  

  ![image-20240914143245202](D:\learn-notes\后端\images\image-20240914143245202.png)

  

  ![image-20240914143306892](D:\learn-notes\后端\images\image-20240914143306892.png)

  

  

  ![image-20240914143429754](D:\learn-notes\后端\images\image-20240914143429754.png)

  

  ![image-20240914143601076](D:\learn-notes\后端\images\image-20240914143601076.png)

  

  

  ![image-20240914143713710](D:\learn-notes\后端\images\image-20240914143713710.png)

  

  

  ![image-20240914143744769](D:\learn-notes\后端\images\image-20240914143744769.png)

  

  ![image-20240914144321386](D:\learn-notes\后端\images\image-20240914144321386.png)

  

  ![image-20240914144753243](D:\learn-notes\后端\images\image-20240914144753243.png)

  

  ![image-20240914144838571](D:\learn-notes\后端\images\image-20240914144838571.png)

其他默认，关闭后直接完成即可。

现在就相当于一台电脑就准备好，然后接下来需要去装centos操作系统。



在虚拟机软件 VMware 中，新建虚拟机时的网络适配器有三种主要的网络连接模式：**桥接模式**、**NAT 模式**、和**仅主机模式**。每种模式的含义、工作原理和区别如下：

### 1. **桥接模式（Bridged Networking）**

#### 含义：

- **桥接模式**会将虚拟机的网络适配器直接桥接到宿主机的物理网络适配器上，使虚拟机与宿主机位于同一局域网内，像是与宿主机处于同等网络地位的设备。
- 在这种模式下，虚拟机就像一台与宿主机直接相连的设备，和宿主机一样可以获得局域网中的 IP 地址。

#### 特点：

- **独立 IP 地址**：虚拟机可以向网络的 DHCP 服务器（如路由器）请求一个独立的 IP 地址，和宿主机设备一样，是局域网中的平等成员。
- **可以与局域网中其他设备通信**：虚拟机可以与局域网中的其他设备相互通信，比如打印机、其他主机、网络存储设备等。
- **可以访问互联网**：因为虚拟机直接连接到局域网，所以可以通过局域网中的网关访问互联网。
- 多人局域网的情况下，容易造成IP冲突

#### 使用场景：

- 适合用于与局域网中的其他设备进行交互时，或者需要虚拟机具有与宿主机同等网络访问权限的情况，比如需要虚拟机访问共享的网络打印机或其他网络资源。

#### 例子：

假设公司网络中有一台物理服务器和若干台工作站，在桥接模式下，虚拟机就相当于公司网络中的另一台工作站，拥有独立的 IP，其他设备可以通过局域网与该虚拟机通信。

------

### 2. **NAT 模式（Network Address Translation）**

#### 含义：

- **NAT 模式**会将虚拟机的网络流量通过宿主机的 IP 地址进行网络地址转换（NAT），虚拟机使用宿主机的网络连接来访问外部网络（如互联网），但外部网络无法直接访问虚拟机。
- 虚拟机使用宿主机的网络接口和 IP 地址访问外部网络，但在虚拟机内部，它使用的是 VMware 自动分配的一个虚拟 IP 地址。

#### 特点：

- **虚拟机使用虚拟 IP 地址**：虚拟机通过 VMware 虚拟网络接口获取一个私有的虚拟 IP 地址，宿主机将其流量通过 NAT 转换到宿主机的外部 IP。
- **虚拟机可以访问互联网**：虚拟机可以通过宿主机的网络连接访问互联网，但外部网络无法通过 NAT 的方式直接访问虚拟机。
- **隔离性较好**：局域网中的其他设备无法直接访问虚拟机，虚拟机的 IP 只在虚拟环境中可见。
- 多人局域网的情况下，不容易造成IP冲突

#### 使用场景：

- 适合用于不希望虚拟机直接暴露在局域网或互联网中的场景，特别是需要通过宿主机的网络连接访问互联网的虚拟机，且不需要与局域网中其他设备进行通信。

#### 例子：

如果你在家里使用 NAT 模式运行虚拟机，虚拟机会通过你的路由器访问互联网，但其他家用设备（如打印机、其他电脑）无法直接与虚拟机通信。

------

### 3. **仅主机模式（Host-Only Networking）**

#### 含义：

- **仅主机模式**限制虚拟机只能与宿主机通信，虚拟机不会与外部网络连接，也无法通过宿主机访问互联网或局域网中的其他设备。
- 在这种模式下，虚拟机和宿主机处于一个隔离的虚拟网络中，其他网络上的设备无法访问虚拟机。

#### 特点：

- **独立虚拟网络**：虚拟机和宿主机位于一个虚拟网络中，虚拟机使用 VMware 分配的虚拟 IP，但无法连接到外部网络或互联网。
- **宿主机与虚拟机通信**：虚拟机和宿主机可以通过这个虚拟网络相互通信。
- **隔离性最强**：虚拟机与外部网络完全隔离，不会影响宿主机的网络环境。

#### 使用场景：

- 适合用于测试或开发环境中，不希望虚拟机连接到外部网络，或者需要在虚拟机和宿主机之间进行完全隔离的情况下。适合需要在宿主机和虚拟机之间传递数据，而不需要与外界网络通信的场景。

#### 例子：

你在进行一个仅限本地测试的开发工作，不希望虚拟机访问互联网，使用仅主机模式可以确保虚拟机不会与外部网络连接，只与宿主机通信。

------

### 总结

- **桥接模式**：虚拟机与宿主机在同一局域网中，虚拟机可直接获得局域网 IP，适合需要与局域网其他设备通信的场景。
- **NAT 模式**：虚拟机通过宿主机的网络访问外部网络（如互联网），外部网络无法直接访问虚拟机，适合需要访问互联网但不希望暴露虚拟机的场景。
- **仅主机模式**：虚拟机只能与宿主机通信，完全隔离外部网络，适合测试或开发环境中不需要外部网络连接的场景。

每种模式的选择取决于虚拟机的使用需求、是否需要访问互联网或局域网设备，以及是否需要高隔离性。

![image-20240914161148063](D:\learn-notes\后端\images\image-20240914161148063.png)





- 安装centos系统

  ![image-20240914145139257](D:\learn-notes\后端\images\image-20240914145139257.png)

  

  ![image-20240914145222825](D:\learn-notes\后端\images\image-20240914145222825.png)

  


  ![image-20240914145302983](D:\learn-notes\后端\images\image-20240914145302983.png)

  确定后就指定了操作系统的软件安装源所在位置，便可以启动虚拟电脑了。

  

  - 开启虚拟机

  - 开始安装centos系统

  - 语言选择

  - 修改软件选择，不要最小安装，最小安装占用空间最小，没有很多功能和基本的开发工具，比如gcc，jdk，mysql都没有，不带可视化界面（实际工作中可以选择最小安装），我们需要可视化界面，所以需要重新配置，

    ![image-20240914150553392](D:\learn-notes\后端\images\image-20240914150553392.png)

    

  - 等待检查软件依赖关系

  - 配置安装位置，自己配置分区

    ![image-20240914151238742](D:\learn-notes\后端\images\image-20240914151238742.png)

    
    

  - linux分区大致分为几个部分：

    - 一般会不Linux分为3个区：

      - boot分区（引导分区），一般1G

      - swap分区（交换分区），一般跟当时配置主机时分配的内存大小一样的空间就可以，2G

        

      - root分区（根分区），就将所有磁盘剩余空间分给该分区就可以，之后安装的软件基本都放在这个分区

      

      ![image-20240914151810306](D:\learn-notes\后端\images\image-20240914151810306.png)

      

      ![image-20240914151822915](D:\learn-notes\后端\images\image-20240914151822915.png)

      

      ![image-20240914151914336](D:\learn-notes\后端\images\image-20240914151914336.png)

      

      ![image-20240914151954918](D:\learn-notes\后端\images\image-20240914151954918.png)

      

      

      ![image-20240914153944291](D:\learn-notes\后端\images\image-20240914153944291.png)

      

      ![image-20240914154149615](D:\learn-notes\后端\images\image-20240914154149615.png)

      

      

      ![image-20240914154224592](D:\learn-notes\后端\images\image-20240914154224592.png)

      

      ![image-20240914154334274](D:\learn-notes\后端\images\image-20240914154334274.png)

      

      

      在 Linux 系统中，**文件系统**用于定义如何组织、存储和管理磁盘上的文件和数据。不同的文件系统有不同的特性和用途。在 Linux 安装时，你需要选择适合的文件系统，常见的文件系统包括 **ext2、ext3、ext4、swap、xfs、vfat** 等。下面是这些文件系统的详细解释及它们的区别。

      ### 1. **Ext2（第二扩展文件系统）**

      - **介绍**：Ext2 是 Linux 上最早广泛使用的文件系统之一，它是继 Minix 文件系统之后的一个现代化文件系统。
      - 特点：
        - **不支持日志功能**：Ext2 不支持日志功能（即没有 journaling），意味着在系统崩溃或突然断电的情况下，数据恢复过程会较为复杂。
        - **性能较好**：由于没有 journaling，Ext2 在写入操作时可能比有日志功能的文件系统更快。
        - **适合小型存储**：通常用于 USB 驱动器或嵌入式系统等小型存储设备。
      - 优缺点：
        - 优点：资源占用小，写入性能较好。
        - 缺点：不支持日志，数据安全性较差。

      ### 2. **Ext3（第三扩展文件系统）**

      - **介绍**：Ext3 是 Ext2 的增强版，增加了**日志（Journaling）**功能，从而提高了数据的可靠性。
      - 特点：
        - **支持日志**：通过日志机制，Ext3 可以在系统崩溃时快速恢复，避免文件损坏。
        - **向后兼容**：Ext3 具有向后兼容 Ext2 的特性，可以将 Ext2 文件系统无损升级为 Ext3。
        - **成熟稳定**：在 Ext4 之前，Ext3 是 Linux 中最常用的文件系统，广泛应用于生产环境中。
      - 优缺点：
        - 优点：日志功能提高了数据可靠性，恢复时间短，广泛支持。
        - 缺点：文件操作性能较 Ext4 等新型文件系统稍差。

      ### 3. **Ext4（第四扩展文件系统）**

      - **介绍**：Ext4 是 Ext3 的升级版，也是目前 Linux 最常用的文件系统之一，具有较高的性能和稳定性。
      - 特点：
        - **更好的性能**：支持延迟分配、支持预分配和多块分配，提高了大文件操作的性能。
        - **更大的文件和分区支持**：支持的文件最大可达 16TB，分区大小可达 1EB（1024PB）。
        - **日志功能改进**：与 Ext3 相比，日志机制更为高效和可靠，支持更快的恢复时间。
        - **延迟分配**：延迟分配机制能够提高磁盘 I/O 性能。
      - 优缺点：
        - 优点：性能高、稳定性好，适合大多数应用场景，支持大文件。
        - 缺点：在特定情况下，较为复杂的日志机制可能影响性能。

      ### 4. **XFS**

      - **介绍**：XFS 是一个高性能的日志文件系统，由 Silicon Graphics 公司开发，最初用于 SGI IRIX 操作系统，现在广泛应用于 Linux 系统。
      - 特点：
        - **高性能**：XFS 擅长处理大文件，特别适合对大量数据的高效存储与管理。
        - **快速恢复**：XFS 的日志机制可以在系统崩溃后迅速恢复文件系统的完整性。
        - **按需分配**：XFS 采用基于扩展的存储管理方式，能更高效地分配和管理磁盘空间。
        - **可在线扩展**：支持文件系统在线扩展，但不支持缩小文件系统大小。
      - 优缺点：
        - 优点：适合大文件和大数据集的高效处理，性能优秀。
        - 缺点：XFS 在处理小文件或随机读写时性能可能稍逊。

      ### 5. **Swap（交换分区）**

      - **介绍**：Swap 并不是一个文件系统，而是 Linux 系统中的**交换空间**，用于在物理内存不足时，临时将数据存储在硬盘上，类似于 Windows 的虚拟内存。
      - 特点：
        - **内存扩展**：当物理内存用完时，系统会将暂时不需要的数据存放到 Swap 分区中，确保系统可以继续运行。
        - **性能影响**：虽然 Swap 可以提供额外的内存，但由于硬盘读写速度较慢，频繁使用 Swap 会显著降低系统性能。
        - **混合内存**：通常建议物理内存充足时，Swap 分区大小设置为物理内存的 1-2 倍。
      - 优缺点：
        - 优点：可以为物理内存不足的系统提供临时缓解。
        - 缺点：硬盘速度较慢，过多使用会影响性能。

      ### 6. **VFAT（Virtual File Allocation Table）**

      - **介绍**：VFAT 是 FAT 文件系统的增强版，常用于跨平台设备中，如 U 盘、移动硬盘等。
      - 特点：
        - **跨平台兼容性**：VFAT 是 FAT 文件系统的扩展版本，支持长文件名，可以在 Windows、Linux、macOS 等操作系统中通用。
        - **文件大小限制**：由于 FAT 文件系统的限制，VFAT 也继承了这些问题，如单个文件最大只能为 4GB。
        - **广泛用于移动设备**：由于兼容性好，VFAT 常用于 U 盘、SD 卡等设备。
      - 优缺点：
        - 优点：跨平台兼容性好。
        - 缺点：不支持日志功能，文件大小有限制。

      ### 7. **Btrfs（B-tree 文件系统）**

      - **介绍**：Btrfs 是一种现代的文件系统，专注于高扩展性、数据完整性和高级功能的支持，如快照和压缩。
      - 特点：
        - **快照和压缩**：Btrfs 支持创建文件系统快照以及数据压缩功能，便于备份和存储空间的高效利用。
        - **高级数据完整性检查**：通过校验和机制保证数据一致性，适合需要高数据可靠性的场景。
        - **在线扩展与缩小**：Btrfs 支持在线扩展和缩小文件系统，灵活性很强。
      - 优缺点：
        - 优点：支持快照、压缩、数据校验等高级功能。
        - 缺点：相比 Ext4，Btrfs 在性能上仍有些许不足。

      ------

      ### 总结

      - **Ext4** 是目前 Linux 上最常用的文件系统，性能稳定，适合大多数场景。
      - **XFS** 擅长处理大文件和高性能 I/O 操作，适合大数据应用。
      - **Swap** 是系统的交换空间，不是传统意义上的文件系统，用于内存管理。
      - **VFAT** 用于跨平台兼容性较强的设备，如 U 盘。
      - **Btrfs** 提供了高级的数据完整性检查和快照功能，但性能不如 Ext4 和 XFS 稳定。

      

      

      在 Linux 系统中，分区是硬盘上的逻辑划分，用于存储不同类型的数据或系统文件。每种分区有特定的作用，常见的分区包括 **boot 分区**、**swap 分区** 和 **根分区（/）**。这些分区对于 Linux 系统的正常运行至关重要。下面详细解释它们的作用和区别。

      ### 1. **Boot 分区**

      #### 含义：

      - **Boot 分区**是用于存放启动引导程序（bootloader）和内核的分区。它包含系统启动时必需的文件，如引导程序 `GRUB` 或 `LILO`、系统内核文件等。
      - 在系统启动时，BIOS 或 UEFI 会访问该分区，并从其中加载启动引导程序，然后加载操作系统内核，从而启动 Linux 系统。

      #### 作用：

      - **引导系统**：Boot 分区中存放的启动引导程序负责引导系统，指引内核文件启动系统。
      - **存储内核**：它还存放 Linux 内核 (`vmlinuz` 文件) 和系统初始化所需的配置文件。

      #### 常见大小：

      - 通常，Boot 分区不需要很大，一般建议大小为 **500MB - 1GB** 左右。它只需要足够的空间存储启动引导程序和内核文件。

      #### 是否必须：

      - 并不是所有 Linux 系统都必须有单独的 Boot 分区，但在某些情况下，尤其是使用 UEFI 启动或者设置多重引导时，独立的 Boot 分区是必要的。

      #### 举例：

      - 如果你有一个 `/boot` 分区，当系统启动时，BIOS 或 UEFI 会从 `/boot` 读取启动引导程序，然后加载系统。

      ------

      ### 2. **Swap 分区**

      #### 含义：

      - **Swap 分区**是 Linux 系统中的虚拟内存，用于在物理内存（RAM）不足时，系统将暂时不使用的内存数据存储到硬盘上，以腾出更多的物理内存。
      - Swap 类似于 Windows 系统中的虚拟内存（pagefile）。

      #### 作用：

      - **扩展内存**：Swap 分区可以扩展物理内存，当系统物理内存不足时，操作系统会将不活跃的数据从内存转移到 Swap 分区，从而释放 RAM。
      - **内存溢出保护**：Swap 分区可以防止内存溢出，当系统负载较重或运行大量应用时，Swap 可以帮助避免系统崩溃。

      #### 常见大小：

      - **物理内存的1到2倍**：传统上，Swap 分区的大小通常设置为物理内存的1到2倍。比如，系统有 4GB 的内存，那么 Swap 分区可能设置为 4GB 或 8GB。
      - 如果你的系统有足够的物理内存（如 16GB 或以上），Swap 分区可以适当减小，但在使用休眠（hibernation）功能时，Swap 大小建议与物理内存相等或稍大。

      #### 是否必须：

      - Swap 分区不是强制的，但它在内存有限的系统中非常重要。对于大内存系统，Swap 分区可以小一些，但最好不要完全省略。

      #### 举例：

      - 当你运行了多个内存密集型程序，系统物理内存不足时，Swap 分区将存储那些暂时不活跃的数据，防止系统因内存耗尽而崩溃。

      ------

      ### 3. **根分区（/）**

      #### 含义：

      - **根分区（/）**是 Linux 文件系统的核心部分，所有系统文件、配置文件、用户数据等都存储在根分区中。根分区是整个系统的基础分区。
      - **根目录（/）** 是 Linux 文件系统的起点，所有文件和目录都从根目录分支出来，包括 `/home`、`/bin`、`/usr`、`/var`、`/etc` 等。

      #### 作用：

      - **存储系统文件和用户数据**：根分区中存储了操作系统的核心文件、程序库、应用程序、用户数据、配置文件等。
      - **根文件系统的载体**：根分区中的文件决定了系统的正常运行，包括系统启动时的基本配置文件、核心程序等。

      #### 常见大小：

      - 根分区的大小取决于使用场景。如果系统安装了大量应用程序或者存储了大量用户数据，根分区应该较大。
        - 一般情况下，建议根分区大小为 **20GB 到 50GB**。
        - 如果 `/home`（用户目录）单独分区，那么根分区不需要太大，20GB 就足够了。如果 `/home` 也存储在根分区中，那么可能需要更大的空间。

      #### 是否必须：

      - 根分区是 Linux 系统**必须**存在的分区，因为系统的所有文件和目录都是从根分区开始存放的。
      - 无论是否使用其他分区（如 `/home`、`/usr`），根分区都是必不可少的。

      #### 举例：

      - 当你在终端中执行命令 `cd /` 时，你进入的就是根目录。所有文件和目录（如 `/etc`、`/home`、`/var` 等）都是根目录的子目录。

      ------

      ### 总结

      - **Boot 分区**：存放系统引导文件（启动引导程序、内核等），用于启动 Linux 系统。通常不需要太大，500MB 至 1GB 即可。
      - **Swap 分区**：虚拟内存分区，提供内存不足时的缓解空间，建议大小为物理内存的 1-2 倍，适用于内存有限的系统。
      - **根分区（/）**：整个系统文件的存储位置，包括所有程序和数据，系统运行的基础分区，建议大小为 20GB 至 50GB，取决于数据和应用程序的需求。

      这三种分区是 Linux 系统中常见的分区类型，合理规划分区大小和类型有助于提升系统的性能和稳定性。

      

      

## 虚拟机克隆

需求：在使用虚拟机的时候，已经有一台虚拟机并安装的Linux操作系统，但是因为如果想做一个服务器集群，这时就需要更多的Linux操作系统，这时就没必要重新在建虚拟机并安装Linux系统，这时只需要克隆就可以。zz













