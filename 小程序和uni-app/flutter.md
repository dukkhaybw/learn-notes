Flutter æ˜¯ç”± Google å¼€å‘çš„å¼€æº UI è½¯ä»¶å¼€å‘å·¥å…·åŒ…ï¼ˆSDKï¼‰ï¼Œç”¨äºæ„å»ºè·¨å¹³å°çš„ç§»åŠ¨ã€Web å’Œæ¡Œé¢åº”ç”¨ç¨‹åºã€‚

Flutter æ˜¯ä¸€ä¸ªç”¨äºæ„å»º **é«˜æ€§èƒ½** åº”ç”¨ç¨‹åºçš„æ¡†æ¶ã€‚ç‰¹ç‚¹åŒ…æ‹¬ï¼š

- **è·¨å¹³å°**ï¼šä½¿ç”¨ä¸€å¥—ä»£ç åº“ï¼Œå¯ä»¥åŒæ—¶å¼€å‘ iOSã€Androidã€Webã€Windowsã€macOS å’Œ Linux åº”ç”¨ç¨‹åºã€‚
- **UI ç»„ä»¶**ï¼šæä¾›äº†ä¸€å¥—ä¸°å¯Œçš„é¢„æ„å»º UI ç»„ä»¶ï¼ˆç§°ä¸º Widgetsï¼‰ï¼Œå¯ä»¥è½»æ¾åˆ›å»ºç¾è§‚çš„ç”¨æˆ·ç•Œé¢ã€‚
- **é«˜æ€§èƒ½**ï¼šFlutter åº”ç”¨ç¨‹åºç›´æ¥ç¼–è¯‘ä¸ºæœ¬åœ°æœºå™¨ä»£ç ï¼Œé¿å…äº†æ€§èƒ½ç“¶é¢ˆï¼Œè¿è¡Œæµç•…ã€‚

- **Dart ç¼–ç¨‹è¯­è¨€**ï¼šFlutter ä½¿ç”¨ Dart è¯­è¨€å¼€å‘ï¼ŒDart æ˜¯ä¸€ç§é¢å‘å¯¹è±¡ã€å¼ºç±»å‹çš„è¯­è¨€ã€‚
- **Widgets**ï¼šFlutter çš„æ‰€æœ‰ UI éƒ½æ˜¯ç”± Widgets æ„å»ºçš„ã€‚Widgets æ˜¯ Flutter çš„åŸºæœ¬æ„å»ºå—ï¼ŒæŒ‰é’®ã€æ–‡æœ¬ã€å¸ƒå±€ç­‰éƒ½ç»§æ‰¿è‡ªå®ƒã€‚
- **çƒ­é‡è½½ï¼ˆHot Reloadï¼‰**ï¼šåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¿®æ”¹ä»£ç åå¯ä»¥ç«‹å³çœ‹åˆ°æ•ˆæœï¼Œæ— éœ€é‡æ–°å¯åŠ¨åº”ç”¨ç¨‹åºã€‚





```
//https://mirrors.tuna.tsinghua.edu.cn/flutter
//FLUTTER_STORAGE_BASE_URL
```

## ç¯å¢ƒæ­å»º

[å®˜ç½‘](https://flutter.dev/)

[ä¸­æ–‡å®˜ç½‘](https://flutter.cn/?_gl=1*1qnqn3u*_ga*NzMyNzM2MTQyLjE3NDA1NDAwNTc.*_ga_HPSFTRXK91*MTc0MDU0NTQyMS4yLjEuMTc0MDU0NjY0My42MC4wLjA.)

[å›½å†…é…ç½®é•œåƒå’Œç¯å¢ƒå˜é‡](https://docs.flutter.cn/community/china/)

**å¦‚ä½•å®‰è£…Flutter**

å‚è€ƒå®˜ç½‘å¼€å§‹æµç¨‹ã€‚

1. é€‰æ‹©æ“ä½œç³»ç»Ÿ

   ![image-20250226131332673](D:\learn-notes\å°ç¨‹åºå’Œuni-app\images\image-20250226131332673.png)

2. é€‰æ‹©éœ€è¦ç”¨flutterå¼€å‘çš„åº”ç”¨ç±»å‹

   ![image-20250226131409415](D:\learn-notes\å°ç¨‹åºå’Œuni-app\images\image-20250226131409415.png)

   é€‰å¥½åï¼Œä»–ä¼šç»™åˆ°ç›¸åº”ç±»å‹çš„åº”ç”¨çš„Flutterç›¸å…³ç¯å¢ƒä»¥åŠå·¥å…·çš„é…ç½®ã€‚å¦‚ä¸‹éƒ½æ˜¯æ ¹æ®ç”¨æˆ·çš„é€‰æ‹©è·³è½¬çš„å®‰è£…æµç¨‹é¡µé¢ï¼š

   ![image-20250226131618144](D:\learn-notes\å°ç¨‹åºå’Œuni-app\images\image-20250226131618144.png)

   ![image-20250226131634170](D:\learn-notes\å°ç¨‹åºå’Œuni-app\images\image-20250226131634170.png)

   ![image-20250226131648335](D:\learn-notes\å°ç¨‹åºå’Œuni-app\images\image-20250226131648335.png)

   

   ä¸‹é¢ä»¥å®‰å“ä¸ºä¾‹ã€‚

   æç¤ºï¼šæ— éœ€å•ç‹¬å®‰è£… Dartï¼Œå› ä¸º Flutter SDK åŒ…å«äº†å®Œæ•´çš„ Dart SDKã€‚

3. ä¸‹è½½å®‰è£…å¼€å‘å·¥å…·

   - [Git for Windows](https://gitforwindows.org/) 2.27 æˆ–æ›´é«˜çš„ç‰ˆæœ¬æ¥ç®¡ç†æºä»£ç ã€‚
   - [Android Studio](https://developer.android.com/studio/install#windows) 2024.1.1 (Koala) æˆ–æ›´é«˜ç‰ˆæœ¬æ¥è°ƒè¯•å’Œç¼–è¯‘ Android çš„ Java æˆ– Kotlin ä»£ç ã€‚ Flutter éœ€è¦å®Œæ•´ç‰ˆæœ¬çš„ Android Studioã€‚

   å½“å®‰è£…äº†FlutterSDKå¹¶é…ç½®äº†ç¯å¢ƒå˜é‡åï¼Œè¿è¡Œ`flutter doctor` å®ƒä¼šåˆ—å‡ºè¿™äº›è½¯ä»¶åŒ…çš„å…¶ä»–ä¸åŒç‰ˆæœ¬ã€‚å¦‚æœå‡ºç°è¿™ç§æƒ…å†µï¼Œè¯·å®‰è£…å®ƒæ¨èçš„ç‰ˆæœ¬ã€‚

4. æ¨èçš„å¼€å‘å·¥å…·

   - [Visual Studio Code](https://code.visualstudio.com/docs/setup/windows) åŠ ä¸Šä½¿ç”¨ [Flutter extension for VS Code](https://marketplace.visualstudio.com/items?itemName=Dart-Code.flutter)ã€‚
   - [Android Studio](https://developer.android.com/studio/install#windows) 2024.1.1 (Koala) æˆ–æ›´é«˜ç‰ˆæœ¬ä½¿ç”¨ [Flutter plugin for IntelliJ](https://plugins.jetbrains.com/plugin/9212-flutter).
   - [IntelliJ IDEA](https://www.jetbrains.com/help/idea/installation-guide.html) 2024.1 æˆ–æ›´é«˜ç‰ˆæœ¬ä½¿ç”¨ [Flutter plugin for IntelliJ](https://plugins.jetbrains.com/plugin/9212-flutter).

   ä½¿ç”¨ä»»æ„æ–‡æœ¬ç¼–è¾‘å™¨æˆ–é›†æˆå¼€å‘ç¯å¢ƒ (IDE)ï¼Œå¹¶ç»“åˆ Flutter çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œæ¥ä½¿ç”¨ Flutter æ„å»ºåº”ç”¨ç¨‹åºã€‚

   ä½¿ç”¨å¸¦æœ‰ Flutter æ‰©å±•æˆ–æ’ä»¶çš„ IDE ä¼šæä¾›ä»£ç è‡ªåŠ¨è¡¥å…¨ã€è¯­æ³•é«˜äº®ã€widget ç¼–å†™è¾…åŠ©ã€è°ƒè¯•ä»¥åŠå…¶ä»–åŠŸèƒ½ã€‚

5. å®‰è£…Flutter SDK

   å®˜ç½‘ä¸Šæåˆ°ä¸¤ç§å®‰è£…æ–¹å¼ï¼Œä¸€ä¸ªæ˜¯å€ŸåŠ©vscodeä¸­flutteræ’ä»¶ï¼Œé€šè¿‡å‘½ä»¤è¡Œçš„æ–¹å¼å®‰è£…ï¼Œå¦ä¸€ç§æ˜¯ä¸‹è½½å‹ç¼©åŒ…è§£å‹å®‰è£…ï¼Œç„¶åä¸¤ç§æ–¹å¼éƒ½éœ€è¦é…ç½®ç¯å¢ƒå˜é‡ã€‚

   è¿™é‡Œé‡‡ç”¨åä¸€ç§æ–¹å¼ï¼š

   [ä¸‹è½½é“¾æ¥](https://docs.flutter.cn/release/archive)

   ![image-20250226132926384](D:\learn-notes\å°ç¨‹åºå’Œuni-app\images\image-20250226132926384.png)





## åˆ›å»ºåº”ç”¨

```bash
flutter create my_flutter_app

cd my_flutter_app

# ç¡®ä¿æ¨¡æ‹Ÿå™¨å·²å¯åŠ¨ï¼Œç„¶ååœ¨é¡¹ç›®ç›®å½•ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
flutter run 
# åº”ç”¨å°†è‡ªåŠ¨ç¼–è¯‘å¹¶éƒ¨ç½²åˆ°æ¨¡æ‹Ÿå™¨ï¼Œå¯åŠ¨åå³å¯çœ‹åˆ°é»˜è®¤çš„ Flutter ç¤ºä¾‹åº”ç”¨ã€‚
```

![image-20250226182529423](D:\learn-notes\å°ç¨‹åºå’Œuni-app\images\image-20250226182529423.png)



**`.dart_tool`**ï¼šDart å·¥å…·ç”Ÿæˆçš„ç›®å½•ï¼Œç”¨äºå­˜å‚¨ Dart ç¼–è¯‘å™¨å’Œå·¥å…·çš„ç¼“å­˜æ–‡ä»¶ã€‚é€šå¸¸ä¸éœ€è¦æ‰‹åŠ¨ä¿®æ”¹æˆ–å…³æ³¨è¿™ä¸ªç›®å½•ã€‚

**`.idea`**ï¼šIntelliJ IDEA æˆ– Android Studio ç”Ÿæˆçš„ç›®å½•ï¼Œç”¨äºå­˜å‚¨ IDE çš„é…ç½®æ–‡ä»¶ï¼ˆå¦‚è¿è¡Œé…ç½®ã€ä»£ç é£æ ¼è®¾ç½®ç­‰ï¼‰ã€‚å¦‚æœä½¿ç”¨å…¶ä»–ç¼–è¾‘å™¨ï¼ˆå¦‚ VS Codeï¼‰ï¼Œè¿™ä¸ªç›®å½•å¯èƒ½ä¸å­˜åœ¨ã€‚

**`android`**

- Android å¹³å°çš„ç‰¹å®šä»£ç å’Œé…ç½®æ–‡ä»¶ç›®å½•ã€‚åŒ…å« Android é¡¹ç›®çš„ Gradle æ„å»ºæ–‡ä»¶ã€æ¸…å•æ–‡ä»¶ï¼ˆ`AndroidManifest.xml`ï¼‰ç­‰ã€‚
- å¦‚æœéœ€è¦ä¸º Android å¹³å°æ·»åŠ åŸç”Ÿä»£ç æˆ–ä¿®æ”¹ Android ç‰¹å®šçš„é…ç½®ï¼Œå¯ä»¥åœ¨è¿™ä¸ªç›®å½•ä¸­æ“ä½œã€‚
- flutteré¡¹ç›®å’ŒåŸç”Ÿå¹³å°è¿›è¡Œæ··ç¼–çš„æ—¶å€™ç”¨åˆ°ã€‚

**`build`**

- æ„å»ºè¾“å‡ºç›®å½•ï¼ŒåŒ…å«ç¼–è¯‘ç”Ÿæˆçš„æ–‡ä»¶ï¼ˆå¦‚ APKã€AABã€iOS åº”ç”¨åŒ…ç­‰ï¼‰ã€‚æ¯æ¬¡è¿è¡Œ `flutter build` æˆ– `flutter run` æ—¶ï¼Œç”Ÿæˆçš„æ–‡ä»¶éƒ½ä¼šå­˜å‚¨åœ¨è¿™é‡Œã€‚

**`ios`**

- iOS å¹³å°çš„ç‰¹å®šä»£ç å’Œé…ç½®æ–‡ä»¶ç›®å½•ã€‚åŒ…å« Xcode é¡¹ç›®æ–‡ä»¶ã€`Info.plist` ç­‰ã€‚
- å¦‚æœéœ€è¦ä¸º iOS å¹³å°æ·»åŠ åŸç”Ÿä»£ç æˆ–ä¿®æ”¹ iOS ç‰¹å®šçš„é…ç½®ï¼Œå¯ä»¥åœ¨è¿™ä¸ªç›®å½•ä¸­æ“ä½œã€‚

**`lib`**

- è¿™æ˜¯ Flutter åº”ç”¨çš„ä¸»è¦ä»£ç ç›®å½•ï¼Œ Dart ä»£ç é€šå¸¸éƒ½æ”¾åœ¨è¿™é‡Œã€‚
- `main.dart` æ˜¯åº”ç”¨çš„å…¥å£æ–‡ä»¶ï¼ŒFlutter åº”ç”¨ä»è¿™é‡Œå¯åŠ¨ã€‚

**`linux`**ï¼šLinux å¹³å°çš„ç‰¹å®šä»£ç å’Œé…ç½®æ–‡ä»¶ç›®å½•ã€‚å¦‚æœéœ€è¦ä¸º Linux å¹³å°æ·»åŠ åŸç”Ÿä»£ç æˆ–ä¿®æ”¹ Linux ç‰¹å®šçš„é…ç½®ï¼Œå¯ä»¥åœ¨è¿™ä¸ªç›®å½•ä¸­æ“ä½œã€‚

**`macos`**ï¼š macOS å¹³å°çš„ç‰¹å®šä»£ç å’Œé…ç½®æ–‡ä»¶ç›®å½•ã€‚å¦‚æœéœ€è¦ä¸º macOS å¹³å°æ·»åŠ åŸç”Ÿä»£ç æˆ–ä¿®æ”¹ macOS ç‰¹å®šçš„é…ç½®ï¼Œå¯ä»¥åœ¨è¿™ä¸ªç›®å½•ä¸­æ“ä½œã€‚

**`test`**ï¼šè¿™æ˜¯å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•çš„ç›®å½•ã€‚å¯ä»¥åœ¨è¿™é‡Œç¼–å†™æµ‹è¯•ä»£ç æ¥éªŒè¯åº”ç”¨çš„é€»è¾‘å’ŒåŠŸèƒ½ã€‚

**`web`**ï¼šWeb å¹³å°çš„ç‰¹å®šä»£ç å’Œé…ç½®æ–‡ä»¶ç›®å½•ã€‚å¦‚æœä½ éœ€è¦ä¸º Web å¹³å°æ·»åŠ åŸç”Ÿä»£ç æˆ–ä¿®æ”¹ Web ç‰¹å®šçš„é…ç½®ï¼Œå¯ä»¥åœ¨è¿™ä¸ªç›®å½•ä¸­æ“ä½œã€‚

**`windows`**ï¼š Windows å¹³å°çš„ç‰¹å®šä»£ç å’Œé…ç½®æ–‡ä»¶ç›®å½•ã€‚å¦‚æœéœ€è¦ä¸º Windows å¹³å°æ·»åŠ åŸç”Ÿä»£ç æˆ–ä¿®æ”¹ Windows ç‰¹å®šçš„é…ç½®ï¼Œå¯ä»¥åœ¨è¿™ä¸ªç›®å½•ä¸­æ“ä½œã€‚



1. **`.gitignore`**

- è¿™æ˜¯ä¸€ä¸ª Git é…ç½®æ–‡ä»¶ï¼Œç”¨äºæŒ‡å®šå“ªäº›æ–‡ä»¶æˆ–ç›®å½•åº”è¯¥è¢« Git å¿½ç•¥ï¼ˆå³ä¸çº³å…¥ç‰ˆæœ¬æ§åˆ¶ï¼‰ã€‚ä¾‹å¦‚ï¼Œ`build` ç›®å½•é€šå¸¸ä¼šè¢«å¿½ç•¥ã€‚

2. **`.metadata`**

- è¿™æ˜¯ Flutter å·¥å…·ç”Ÿæˆçš„æ–‡ä»¶ï¼Œç”¨äºè®°å½•é¡¹ç›®çš„å…ƒæ•°æ®ï¼ˆå¦‚ Flutter SDK ç‰ˆæœ¬ï¼‰ã€‚é€šå¸¸ä¸éœ€è¦æ‰‹åŠ¨ä¿®æ”¹ã€‚

3. **`analysis_options.yaml`**

- è¿™æ˜¯ Dart é™æ€åˆ†æå·¥å…·çš„é…ç½®æ–‡ä»¶ï¼Œç”¨äºå®šä¹‰ä»£ç åˆ†æè§„åˆ™ï¼ˆå¦‚ lint è§„åˆ™ï¼‰ã€‚å¯ä»¥åœ¨è¿™é‡Œè‡ªå®šä¹‰ä»£ç é£æ ¼å’Œé™æ€åˆ†æè¡Œä¸ºã€‚

4. **`new_name.iml`**

- è¿™æ˜¯ IntelliJ IDEA æˆ– Android Studio ç”Ÿæˆçš„é¡¹ç›®é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«é¡¹ç›®çš„æ¨¡å—è®¾ç½®ã€‚æ–‡ä»¶åé€šå¸¸ä¸é¡¹ç›®åç§°ä¸€è‡´ã€‚

5. **`pubspec.lock`**

- è¿™æ˜¯ Dart åŒ…ç®¡ç†å·¥å…·ç”Ÿæˆçš„æ–‡ä»¶ï¼Œç”¨äºé”å®šé¡¹ç›®ä¾èµ–çš„å…·ä½“ç‰ˆæœ¬ã€‚ç¡®ä¿å›¢é˜Ÿæˆå‘˜ä½¿ç”¨ç›¸åŒçš„ä¾èµ–ç‰ˆæœ¬ã€‚

6. **`pubspec.yaml`**

- è¿™æ˜¯ Flutter é¡¹ç›®çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œå®šä¹‰äº†é¡¹ç›®çš„å…ƒæ•°æ®ï¼ˆå¦‚åç§°ã€æè¿°ã€ç‰ˆæœ¬ï¼‰å’Œä¾èµ–é¡¹ï¼ˆå¦‚ç¬¬ä¸‰æ–¹åº“ï¼‰ã€‚å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ ã€æ›´æ–°æˆ–åˆ é™¤ä¾èµ–é¡¹ã€‚

7. **`README.md`**

- è¿™æ˜¯é¡¹ç›®çš„è¯´æ˜æ–‡ä»¶ï¼Œé€šå¸¸ç”¨äºæè¿°é¡¹ç›®çš„åŠŸèƒ½ã€ä½¿ç”¨æ–¹æ³•ã€å®‰è£…æ­¥éª¤ç­‰ã€‚å¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶ã€‚





é¡¹ç›®å…¥å£æ–‡ä»¶ï¼š `lib/main.dart` 

```dart
import 'package:flutter/material.dart';

void main() {
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Flutter Demo',
      theme: ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: MyHomePage(),
    );
  }
}

class MyHomePage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('Flutter Demo Home Page'),
      ),
      body: Center(
        child: Text('Hello, Flutter!'),
      ),
    );
  }
}
```



#### å¯¼å…¥ Flutter ææ–™è®¾è®¡åº“

```dart
import 'package:flutter/material.dart';
```

- å¯¼å…¥ Flutter çš„ Material Design ç»„ä»¶åº“ã€‚Material Design æ˜¯ Google æ¨å‡ºçš„**ä¸€å¥—è®¾è®¡è§„èŒƒ**ï¼Œé‡Œé¢æä¾›äº†ä¸°å¯Œçš„ Material ç»„ä»¶ï¼ˆå¦‚æŒ‰é’®ã€å¡ç‰‡ã€å¯¼èˆªæ ç­‰ï¼‰ï¼Œç”¨äºæ„å»ºç¾è§‚çš„ UI

#### å®šä¹‰ `main` å‡½æ•°

```dart
void main() {
  runApp(MyApp());
}
```

- `main` å‡½æ•°æ˜¯ Dart ç¨‹åºçš„å…¥å£ç‚¹ã€‚Flutter åº”ç”¨ä»è¿™é‡Œå¼€å§‹æ‰§è¡Œã€‚
- `runApp()` æ˜¯ Flutter çš„æ ¸å¿ƒå‡½æ•°ï¼Œç”¨äºå¯åŠ¨åº”ç”¨å¹¶æŒ‚è½½æ ¹ç»„ä»¶ï¼ˆ`MyApp`ï¼‰ï¼Œæ¥è‡ªmaterial.dart

#### å®šä¹‰ `MyApp` ç±»

```dart
class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Flutter Demo',
      theme: ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: MyHomePage(),
    );
  }
}
```

- `MyApp` åº”ç”¨çš„æ ¹ç»„ä»¶ï¼Œé…ç½®äº†åº”ç”¨çš„ä¸»é¢˜å’Œé¦–é¡µï¼Œæ˜¯ä¸€ä¸ªç»§æ‰¿è‡ª `StatelessWidget` çš„ç±»ã€‚`StatelessWidget` è¡¨ç¤ºä¸€ä¸ªä¸å¯å˜çš„ç»„ä»¶ï¼ˆå³å®ƒçš„çŠ¶æ€ä¸ä¼šæ”¹å˜ï¼‰ï¼Œ`build()` æ–¹æ³•æ˜¯æ‰€æœ‰ StatelessWidgetçš„å­ç±»å¿…é¡»å®ç°çš„æ–¹æ³•ï¼Œç”¨äºæè¿°å¦‚ä½•æ„å»º UIã€‚
- `MaterialApp` æ˜¯ä¸€ä¸ª Material Design é£æ ¼çš„åº”ç”¨æ¡†æ¶ï¼Œæä¾›äº†åº”ç”¨çš„åŸºæœ¬ç»“æ„å’Œé…ç½®ï¼š
  - `title`ï¼šåº”ç”¨çš„æ ‡é¢˜ï¼Œè¿™ä¸ªæ˜¯å®šä¹‰åœ¨Androidç³»ç»Ÿä¸­æ‰“å¼€å¤šä»»åŠ¡åˆ‡æ¢çª—å£æ—¶æ˜¾ç¤ºçš„æ ‡é¢˜ï¼›
  - `theme`ï¼šå®šä¹‰åº”ç”¨çš„ä¸»é¢˜ã€‚è¿™é‡Œä½¿ç”¨ `ThemeData` è®¾ç½®ä¸»è‰²è°ƒä¸ºè“è‰²ã€‚
  - `home`ï¼šåº”ç”¨çš„é¦–é¡µï¼Œè¿™é‡Œè®¾ç½®ä¸º `MyHomePage`ã€‚



#### å®šä¹‰ `MyHomePage` ç±»

```dart
class MyHomePage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('Flutter Demo Home Page'),
      ),
      body: Center(
        child: Text('Hello, Flutter!'),
      ),
    );
  }
}
```

- `MyHomePage` åº”ç”¨çš„é¦–é¡µï¼Œå®šä¹‰äº†é¡µé¢çš„å¸ƒå±€å’Œå†…å®¹ï¼Œä¹Ÿæ˜¯ä¸€ä¸ª `StatelessWidget`ã€‚
- `Scaffold` æ˜¯ Material Design çš„ä¸€ä¸ªå¸ƒå±€ç»“æ„ï¼Œæä¾›äº†åŸºæœ¬çš„é¡µé¢æ¡†æ¶ï¼ŒåŒ…æ‹¬ï¼š
  - `appBar`ï¼šé¡µé¢é¡¶éƒ¨çš„å¯¼èˆªæ ï¼Œè¿™é‡Œä½¿ç”¨ `AppBar` ç»„ä»¶ï¼Œæ ‡é¢˜ä¸º `Flutter Demo Home Page`ã€‚
  - `body`ï¼šé¡µé¢çš„ä¸»è¦å†…å®¹åŒºåŸŸã€‚è¿™é‡Œä½¿ç”¨ `Center` ç»„ä»¶å°†å†…å®¹å±…ä¸­æ˜¾ç¤ºï¼Œ`Text` ç»„ä»¶ç”¨äºæ˜¾ç¤ºæ–‡æœ¬ `Hello, Flutter!`ã€‚



`flutter doctor` æ˜¯ Flutter å¼€å‘å·¥å…·ä¸­çš„ä¸€ä¸ªå‘½ä»¤ï¼Œç”¨äºæ£€æŸ¥å¼€å‘ç¯å¢ƒçš„é…ç½®æƒ…å†µï¼Œç¡®ä¿æ‰€æœ‰å¿…è¦çš„ä¾èµ–é¡¹å·²æ­£ç¡®å®‰è£…å¹¶é…ç½®ã€‚è¿è¡Œè¯¥å‘½ä»¤åï¼Œå®ƒä¼šç”Ÿæˆä¸€ä»½æŠ¥å‘Šï¼ŒæŒ‡å‡ºå½“å‰ç¯å¢ƒä¸­å­˜åœ¨çš„é—®é¢˜ï¼Œå¹¶æä¾›ç›¸åº”çš„ä¿®å¤å»ºè®®ã€‚

**ä¸»è¦ä½œç”¨**

1. **æ£€æŸ¥ Flutter å®‰è£…**ï¼šç¡®è®¤ Flutter SDK æ˜¯å¦æ­£ç¡®å®‰è£…ã€‚
2. **æ£€æŸ¥ Dart SDK**ï¼šç¡®ä¿ Dart SDK å·²æ­£ç¡®å®‰è£…å¹¶ä¸ Flutter å…¼å®¹ã€‚
3. **æ£€æŸ¥ Android å·¥å…·é“¾**ï¼šéªŒè¯ Android Studioã€SDKã€æ¨¡æ‹Ÿå™¨ç­‰æ˜¯å¦é…ç½®æ­£ç¡®ã€‚
4. **æ£€æŸ¥ iOS å·¥å…·é“¾**ï¼šç¡®è®¤ Xcode å’Œç›¸å…³å·¥å…·æ˜¯å¦å·²å®‰è£…å¹¶é…ç½®ã€‚
5. **æ£€æŸ¥ IDE æ’ä»¶**ï¼šç¡®ä¿ Android Studio æˆ– VS Code ä¸­çš„ Flutter å’Œ Dart æ’ä»¶å·²å®‰è£…ã€‚
6. **æ£€æŸ¥è¿æ¥è®¾å¤‡**ï¼šç¡®è®¤æ˜¯å¦æœ‰å¯ç”¨çš„ç‰©ç†è®¾å¤‡æˆ–æ¨¡æ‹Ÿå™¨ã€‚

**ä½¿ç”¨æ–¹æ³•**

åœ¨ç»ˆç«¯æˆ–å‘½ä»¤è¡Œä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
flutter doctor
```

**è¾“å‡ºç¤ºä¾‹**

```plaintext
Doctor summary (to see all details, run flutter doctor -v):
[âœ“] Flutter (Channel stable, 2.5.1, on macOS 11.5.2 20G95 darwin-x64, locale en-US)
[âœ“] Android toolchain - develop for Android devices (Android SDK version 30.0.3)
[âœ“] Xcode - develop for iOS and macOS
[âœ“] Chrome - develop for the web
[âœ“] Android Studio (version 4.2)
[âœ“] VS Code (version 1.60.0)
[âœ“] Connected device (1 available)

â€¢ No issues found!
```

**å¸¸è§é—®é¢˜åŠè§£å†³**

- **Android SDK æœªå®‰è£…**ï¼šæŒ‰æç¤ºå®‰è£… Android SDK å¹¶è®¾ç½®ç¯å¢ƒå˜é‡ã€‚
- **Xcode æœªå®‰è£…**ï¼šåœ¨ macOS ä¸Šå®‰è£… Xcode å¹¶åŒæ„è®¸å¯åè®®ã€‚
- **è®¾å¤‡æœªè¿æ¥**ï¼šè¿æ¥è®¾å¤‡æˆ–å¯åŠ¨æ¨¡æ‹Ÿå™¨ã€‚
- **IDE æ’ä»¶æœªå®‰è£…**ï¼šåœ¨ Android Studio æˆ– VS Code ä¸­å®‰è£… Flutter å’Œ Dart æ’ä»¶ã€‚



flutteré¡¹ç›®åœ¨å¼€å‘é˜¶æ®µçš„ä¸‰ç§å¯åŠ¨æ–¹å¼ï¼š

1. å†·å¯åŠ¨
2. çƒ­é‡è½½ hot reloadï¼Œè¿™ç§å¯åŠ¨æœ€ä¸»è¦æ˜¯é‡æ–°æ‰§è¡Œä¸€ä¸‹ç±»ä¸­çš„buildæ–¹æ³•ï¼Œå…¶ä»–å¾ˆå¤šæ–¹æ³•æ˜¯ä¸æ‰§è¡Œçš„
3. çƒ­å¯åŠ¨ hot restartï¼Œé‡æ–°å¯åŠ¨æ•´ä¸ªåº”ç”¨ï¼Œå·²æœ‰çš„æ•°æ®ä¼šé‡ç½®ä¸ºåˆå§‹å€¼



## Dart

ç¤ºä¾‹ï¼š

```dart
main(List<String> args) {
  print('Hello World');
}
```



### æ•°æ®ç±»å‹

**åŸºæœ¬æ•°æ®ç±»å‹**æ¯”å¦‚**æ•°å­—ï¼ˆint, doubleï¼‰ã€å­—ç¬¦ä¸²ï¼ˆStringï¼‰ã€å¸ƒå°”ï¼ˆboolï¼‰**ã€‚ç„¶åæ˜¯**é›†åˆç±»å‹**ï¼Œæ¯”å¦‚**Listã€Setã€Mapã€‚**è¿˜æœ‰ç‰¹æ®Šçš„ç±»å‹å¦‚Runeså’ŒSymbolï¼Œè¿™äº›ä¸å¤ªå¸¸ç”¨ã€‚

Dartä¸­çš„dynamicå’ŒObjectç±»å‹ï¼Œè™½ç„¶ä¸¥æ ¼æ¥è¯´ä¸æ˜¯æ•°æ®ç±»å‹ï¼Œä½†å¤„ç†åŠ¨æ€ç±»å‹æ—¶ä¼šç”¨åˆ°ã€‚è¿˜æœ‰**Nullç±»å‹**ï¼Œä»¥åŠ**ç”¨æˆ·è‡ªå®šä¹‰çš„ç±»å’Œæšä¸¾**ã€‚

è¿™äº›ç±»å‹çš„åŸºæœ¬åˆ†ç±»å’Œç”¨é€”ï¼Œæ¯”å¦‚å“ªäº›æ˜¯åŸå§‹ç±»å‹ï¼Œå“ªäº›æ˜¯å¯¹è±¡ç±»å‹ã€‚éœ€è¦è§£é‡Šæ¸…æ¥šæ¯ä¸ªç±»å‹çš„ç‰¹ç‚¹å’Œå¸¸è§ç”¨æ³•ã€‚æ¯”å¦‚intå’Œdoubleçš„åŒºåˆ«ï¼ŒStringçš„ä¸å¯å˜æ€§ï¼ŒListå’ŒMapçš„ä½¿ç”¨åœºæ™¯ã€‚

Dartåœ¨ç©ºå®‰å…¨ä¹‹åï¼Œæ‰€æœ‰ç±»å‹é»˜è®¤éƒ½æ˜¯éç©ºçš„ã€‚

#### åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆåŸå§‹ç±»å‹ï¼‰

1. **æ•°å€¼ç±»å‹**

   - **`int`**ï¼šæ•´æ•°ç±»å‹ï¼ˆå¦‚ `42`, `-3`ï¼‰ã€‚
   - **`double`**ï¼šæµ®ç‚¹æ•°ç±»å‹ï¼ˆå¦‚ `3.14`, `-0.5`ï¼‰ã€‚
   - Dart ä¸­æ²¡æœ‰å•ç‹¬çš„ `float` ç±»å‹ï¼Œæ‰€æœ‰æµ®ç‚¹æ•°ç”¨ `double` è¡¨ç¤ºã€‚

   ```dart
   // 1.æ•´æ•°ç±»å‹int
   int age = 18;
   int hexAge = 0x12;
   print(age);
   print(hexAge);
   
   // 2.æµ®ç‚¹ç±»å‹double
   double height = 1.70;
   print(height);
   ```

   

2. **å­—ç¬¦ä¸²ç±»å‹**

   - **`String`**ï¼šè¡¨ç¤ºæ–‡æœ¬ï¼ˆå¦‚ `"Hello"`ï¼‰ã€‚
   - æ”¯æŒæ’å€¼ï¼ˆ`${expression}`ï¼‰å’Œå¤šè¡Œå­—ç¬¦ä¸²ï¼ˆç”¨ `'''` æˆ– `"""` åŒ…è£¹ï¼‰ã€‚

   

   ```dart
   // 1.å®šä¹‰å­—ç¬¦ä¸²çš„æ–¹å¼
   var s1 = 'Hello World';
   var s2 = "Hello Dart";
   var s3 = 'Hello\'Fullter';
   var s4 = "Hello'Fullter";
   
   
   // 2.è¡¨ç¤ºå¤šè¡Œå­—ç¬¦ä¸²çš„æ–¹å¼
   var message1 = '''
   å“ˆå“ˆå“ˆ
   å‘µå‘µå‘µ
   å˜¿å˜¿å˜¿''';
   ```

   å­—ç¬¦ä¸²å’Œå…¶ä»–å˜é‡æˆ–è¡¨è¾¾å¼æ‹¼æ¥: ä½¿ç”¨${expression}, å¦‚æœè¡¨è¾¾å¼æ˜¯ä¸€ä¸ªæ ‡è¯†ç¬¦, é‚£ä¹ˆ{}å¯ä»¥çœç•¥ã€‚

   ```dart
   // 3.æ‹¼æ¥å…¶ä»–å˜é‡
   var name = 'abc';
   var age = 20;
   var height = 1.7;
   print('my name is ${name}, age is $age, height is $height');
   ```

   

   

   å­—ç¬¦ä¸²å’Œæ•°å­—ä¹‹é—´çš„è½¬åŒ–ï¼š

   ```dart
   // å­—ç¬¦ä¸²å’Œæ•°å­—è½¬åŒ–
   // 1.å­—ç¬¦ä¸²è½¬æ•°å­—
   var one = int.parse('111');
   var two = double.parse('12.22');
   print('${one} ${one.runtimeType}'); // 111 int
   print('${two} ${two.runtimeType}'); // 12.22 double
   
   // 2.æ•°å­—è½¬å­—ç¬¦ä¸²
   var num1 = 123;
   var num2 = 123.456;
   var num1Str = num1.toString();
   var num2Str = num2.toString();
   var num2StrD = num2.toStringAsFixed(2); // ä¿ç•™ä¸¤ä½å°æ•°
   print('${num1Str} ${num1Str.runtimeType}'); // 123 String
   print('${num2Str} ${num2Str.runtimeType}'); // 123.456 String
   print('${num2StrD} ${num2StrD.runtimeType}'); // 123.46 String
   ```

   

   

3. **å¸ƒå°”ç±»å‹**

   - **`bool`**ï¼šä»…æœ‰ä¸¤ä¸ªå€¼ `true` å’Œ `false`ã€‚
   - ç”¨äºæ¡ä»¶åˆ¤æ–­ï¼ˆå¦‚ `if (isEnabled) { ... }`ï¼‰ã€‚

   **æ³¨æ„: Dartä¸­ä¸èƒ½åˆ¤æ–­é0å³çœŸ, æˆ–è€…éç©ºå³çœŸã€‚**

   ```dart
    var message = 'Hello Dart';
     // é”™è¯¯çš„å†™æ³•
     if (message) {
       print(message)
     }
   ```

   

#### é›†åˆç±»å‹

1. **`List`**ï¼šæœ‰åºé›†åˆï¼Œç±»ä¼¼äºæ•°ç»„ã€‚

   ```dart
   List<int> numbers = [1, 2, 3];
   List<String> names = ["Alice", "Bob"];
   
   // 1.ä½¿ç”¨ç±»å‹æ¨å¯¼å®šä¹‰
   var letters = ['a', 'b', 'c', 'd'];
   print('$letters ${letters.runtimeType}'); // [a, b, c, d] List<String>
   
   // 2.æ˜ç¡®æŒ‡å®šç±»å‹
   List<int> numbers = [1, 2, 3, 4];
   print('$numbers ${numbers.runtimeType}'); // [1, 2, 3, 4] List<int>
   ```

2. **`Set`**ï¼šæ— åºä¸”å…ƒç´ å”¯ä¸€çš„é›†åˆã€‚

   ```dart
   Set<int> uniqueNumbers = {1, 2, 3};
   
   // 1.ä½¿ç”¨ç±»å‹æ¨å¯¼å®šä¹‰
   var lettersSet = {'a', 'b', 'c', 'd'};
   print('$lettersSet ${lettersSet.runtimeType}');
   
   // 2.æ˜ç¡®æŒ‡å®šç±»å‹
   Set<int> numbersSet = {1, 2, 3, 4};
   print('$numbersSet ${numbersSet.runtimeType}');
   
   
   
   // åˆ—è¡¨å»é‡
   var newList = Set<xxxxx>.from(lists).toList();
   ```

3. **`Map`**ï¼šé”®å€¼å¯¹é›†åˆï¼Œé”®å”¯ä¸€ã€‚

   ```dart
   Map<String, int> scores = {"Alice": 90, "Bob": 85};
   
   // 1.ä½¿ç”¨ç±»å‹æ¨å¯¼å®šä¹‰
   var infoMap1 = {'name': 'why', 'age': 18};
   print('$infoMap1 ${infoMap1.runtimeType}');
   
   // 2.æ˜ç¡®æŒ‡å®šç±»å‹
   Map<String, Object> infoMap2 = {'height': 1.88, 'address': 'åŒ—äº¬å¸‚'};
   print('$infoMap2 ${infoMap2.runtimeType}');
   ```



#### é›†åˆæ“ä½œ







#### ç‰¹æ®Šç±»å‹

1. **`Runes`**ï¼šè¡¨ç¤º Unicode å­—ç¬¦ï¼ˆå¦‚ `\u{1F600}` è¾“å‡º ğŸ˜€ï¼‰ã€‚

   ```dart
   Runes emoji = Runes('\u{1F600}');
   ```

2. **`Symbol`**ï¼šè¡¨ç¤º Dart ç¨‹åºä¸­çš„ç¬¦å·ï¼ˆåå°„æ—¶ä½¿ç”¨ï¼Œè¾ƒå°‘ç›´æ¥æ“ä½œï¼‰ã€‚

   ```dart
   Symbol s = #someSymbol;
   ```



#### åŠ¨æ€ä¸é€šç”¨ç±»å‹

1. **`dynamic`**ï¼šåŠ¨æ€ç±»å‹ï¼Œå…³é—­é™æ€ç±»å‹æ£€æŸ¥ã€‚

   ```dart
   dynamic value = 10; // å¯ä»¥èµ‹å€¼ä¸ºä»»æ„ç±»å‹
   value = "Hello";    // åˆæ³•
   ```

2. **`Object`**ï¼šæ‰€æœ‰ Dart å¯¹è±¡çš„åŸºç±»ã€‚

   ```dart
   Object obj = 42;
   obj = "Text";       // åˆæ³•ï¼Œä½†éœ€æ˜¾å¼ç±»å‹è½¬æ¢
   ```

------

#### ç©ºç±»å‹ï¼ˆNull Safetyï¼‰

- **`Null`**ï¼šè¡¨ç¤ºç©ºå€¼ã€‚

- **å¯ç©ºç±»å‹**ï¼šåœ¨ç©ºå®‰å…¨æ¨¡å¼ä¸‹ï¼Œç±»å‹é»˜è®¤éç©ºï¼Œéœ€æ˜¾å¼å£°æ˜å¯ç©ºæ€§ã€‚

  ```dart
  int? nullableInt = null; // å…è®¸ä¸º null
  String? name = null;     // å¯ç©ºå­—ç¬¦ä¸²
  ```

------

#### ç”¨æˆ·è‡ªå®šä¹‰ç±»å‹

1. **ç±»ï¼ˆ`class`ï¼‰**ï¼šé€šè¿‡è‡ªå®šä¹‰ç±»åˆ›å»ºå¯¹è±¡ã€‚

   ```dart
   class Person {
     String name;
     int age;
     Person(this.name, this.age);
   }
   Person user = Person("Alice", 30);
   ```

2. **æšä¸¾ï¼ˆ`enum`ï¼‰**ï¼šå®šä¹‰ä¸€ç»„å‘½åçš„å¸¸é‡å€¼ã€‚

   ```dart
   enum Status { pending, success, error }
   Status currentStatus = Status.pending;
   ```

------

#### ç±»å‹æ€»ç»“

| **ç±»å‹**     | **ç¤ºä¾‹**                        | **ç”¨é€”**       |
| :----------- | :------------------------------ | :------------- |
| `int`        | `42`, `-3`                      | æ•´æ•°è®¡ç®—       |
| `double`     | `3.14`, `-0.5`                  | æµ®ç‚¹æ•°è®¡ç®—     |
| `String`     | `"Hello"`                       | æ–‡æœ¬å¤„ç†       |
| `bool`       | `true`, `false`                 | é€»è¾‘åˆ¤æ–­       |
| `List`       | `[1, 2, 3]`                     | æœ‰åºé›†åˆ       |
| `Set`        | `{1, 2, 3}`                     | å”¯ä¸€å…ƒç´ é›†åˆ   |
| `Map`        | `{"key": "value"}`              | é”®å€¼å¯¹å­˜å‚¨     |
| `dynamic`    | `dynamic x = 10; x = "text"`    | åŠ¨æ€ç±»å‹æ“ä½œ   |
| `Object`     | `Object obj = 42;`              | é€šç”¨å¯¹è±¡åŸºç±»   |
| ç”¨æˆ·è‡ªå®šä¹‰ç±» | `Person user = Person("Alice")` | å°è£…æ•°æ®å’Œè¡Œä¸º |

------

#### æ³¨æ„äº‹é¡¹

- **ç©ºå®‰å…¨ï¼ˆNull Safetyï¼‰**ï¼šDart é»˜è®¤å¯ç”¨ç©ºå®‰å…¨ï¼Œæ‰€æœ‰ç±»å‹é»˜è®¤éç©ºï¼Œéœ€ç”¨ `?` å£°æ˜å¯ç©ºï¼ˆå¦‚ `int?`ï¼‰ã€‚
- **ç±»å‹æ¨æ–­**ï¼šä½¿ç”¨ `var` æˆ– `final` æ—¶ï¼Œç±»å‹ä¼šæ ¹æ®åˆå§‹å€¼è‡ªåŠ¨æ¨æ–­ã€‚
- **ç±»å‹è½¬æ¢**ï¼šä½¿ç”¨ `as` è¿›è¡Œ**æ˜¾å¼ç±»å‹è½¬æ¢**ï¼ˆå¦‚ `(value as int).toDouble()`ï¼‰ã€‚







### å˜é‡

Dartæ˜¯ä¸€ç§**å¼ºç±»å‹**çš„è¯­è¨€ï¼Œä½†åŒæ—¶ä¹Ÿæ”¯æŒ**ç±»å‹æ¨æ–­**ï¼Œæ‰€ä»¥å£°æ˜å˜é‡çš„æ–¹å¼å¯èƒ½åŒ…æ‹¬**æ˜¾å¼ç±»å‹å£°æ˜å’Œéšå¼ç±»å‹æ¨æ–­**ä¸¤ç§ã€‚

å¯ä»¥ä½¿ç”¨`var`å…³é”®å­—æ¥å£°æ˜å˜é‡ï¼Œè¿™æ—¶å€™å˜é‡çš„ç±»å‹ä¼šæ ¹æ®åˆå§‹åŒ–çš„å€¼è‡ªåŠ¨æ¨æ–­å‡ºæ¥ã€‚ä¾‹å¦‚`var name = 'John';`è¿™é‡Œnameä¼šè¢«æ¨æ–­ä¸ºStringç±»å‹ã€‚ä¸è¿‡ï¼Œå¦‚æœå˜é‡æ²¡æœ‰åˆå§‹åŒ–ï¼Œä½¿ç”¨`var`çš„è¯ï¼Œå˜é‡ä¼šæ˜¯åŠ¨æ€ç±»å‹ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥èµ‹ä»»ä½•ç±»å‹çš„å€¼ã€‚

æ˜¾å¼ç±»å‹å£°æ˜ï¼Œæ¯”å¦‚`String name = 'John';`è¿™æ ·ç›´æ¥æŒ‡å®šå˜é‡ç±»å‹ã€‚è¿™ç§æ–¹å¼ä¸‹ï¼Œå˜é‡ä¸€æ—¦å£°æ˜ä¸ºæŸä¸ªç±»å‹ï¼Œåç»­èµ‹å€¼å¿…é¡»ç¬¦åˆè¯¥ç±»å‹ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚è¿™å¯èƒ½å’Œ`var`æœ‰åŒºåˆ«ï¼Œå°¤å…¶æ˜¯åœ¨å˜é‡åˆå§‹åŒ–ä¹‹åå†æ¬¡èµ‹å€¼æ—¶ã€‚

`dynamic`ç±»å‹ï¼Œç”¨`dynamic`å£°æ˜çš„å˜é‡å¯ä»¥æ”¹å˜ç±»å‹ï¼Œç±»ä¼¼äºJavaScriptä¸­çš„å˜é‡ã€‚ä¾‹å¦‚`dynamic value = 10; value = 'hello';`è¿™æ˜¯å…è®¸çš„ã€‚è€Œä½¿ç”¨`var`å£°æ˜çš„å˜é‡ä¸€æ—¦ç±»å‹æ¨æ–­ç¡®å®šåï¼Œå°±ä¸èƒ½å†æ”¹å˜ç±»å‹äº†ã€‚å³`var`å’Œ`dynamic`çš„åŒºåˆ«ã€‚

`final`å’Œ`const`å…³é”®å­—ï¼Œå®ƒä»¬ç”¨äºå£°æ˜ä¸å¯å˜çš„å˜é‡ã€‚**`final`å˜é‡åªèƒ½è¢«èµ‹å€¼ä¸€æ¬¡ï¼Œèµ‹å€¼å¯ä»¥åœ¨è¿è¡Œæ—¶è¿›è¡Œï¼Œè€Œ`const`å˜é‡æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ï¼Œå¿…é¡»åœ¨å£°æ˜æ—¶å°±åˆå§‹åŒ–ã€‚**ä¾‹å¦‚`final time = DateTime.now();`æ˜¯åˆæ³•çš„ï¼Œä½†`const time = DateTime.now();`ä¼šæŠ¥é”™ï¼Œå› ä¸ºDateTime.now()æ˜¯è¿è¡Œæ—¶çš„å€¼ã€‚æ­¤å¤–ï¼Œ`const`è¿˜å¯ä»¥ç”¨æ¥åˆ›å»ºä¸å¯å˜çš„å¯¹è±¡å®ä¾‹ï¼Œè€Œ`final`åˆ™ç”¨äºå˜é‡ã€‚

æ€»ç»“ä¸€ä¸‹ï¼ŒDartä¸­å®šä¹‰å˜é‡çš„æ–¹å¼ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ï¼š

1. ä½¿ç”¨`var`å…³é”®å­—è¿›è¡Œç±»å‹æ¨æ–­ã€‚

2. æ˜¾å¼æŒ‡å®šç±»å‹ï¼Œå¦‚`String name = 'John';`ã€‚

3. ä½¿ç”¨`dynamic`å£°æ˜åŠ¨æ€ç±»å‹å˜é‡ã€‚

4. ä½¿ç”¨`final`å£°æ˜ä¸å¯å˜çš„å˜é‡ï¼Œèµ‹å€¼ä¸€æ¬¡ã€‚

5. ä½¿ç”¨`const`å£°æ˜ç¼–è¯‘æ—¶å¸¸é‡ã€‚

æ¯ç§æ–¹å¼çš„åŒºåˆ«ï¼ŒåŒ…æ‹¬ç±»å‹ç¡®å®šæ—¶æœºã€å¯å˜æ€§ã€ä½œç”¨åŸŸã€å†…å­˜åˆ†é…ç­‰ã€‚æ¯”å¦‚ï¼Œ`var`å’Œæ˜¾å¼ç±»å‹å£°æ˜çš„åŒºåˆ«åœ¨äºç±»å‹æ¨æ–­å’Œæ˜¾å¼æŒ‡å®šï¼Œä½†ä¸€æ—¦ç±»å‹ç¡®å®šåï¼Œä¸¤è€…åœ¨åç»­èµ‹å€¼æ—¶çš„é™åˆ¶æ˜¯ä¸€æ ·çš„ã€‚è€Œ`dynamic`å…è®¸å˜é‡ç±»å‹å˜åŒ–ï¼Œè¿™åœ¨éœ€è¦çµæ´»å¤„ç†ç±»å‹æ—¶å¾ˆæœ‰ç”¨ï¼Œä½†ä¼šå¤±å»ç±»å‹å®‰å…¨æ€§ã€‚



`final`å’Œ`const`çš„åŒºåˆ«åœ¨äºèµ‹å€¼æ—¶æœºå’Œæ˜¯å¦ä¸ºç¼–è¯‘æ—¶å¸¸é‡ã€‚`final`å˜é‡å¯ä»¥åœ¨è¿è¡Œæ—¶ç¡®å®šå€¼ï¼Œè€Œ`const`å¿…é¡»åœ¨ç¼–è¯‘æ—¶ç¡®å®šï¼Œä¸”`const`å˜é‡æ˜¯éšå¼`final`çš„ã€‚ä¾‹å¦‚ï¼Œ`const`å¯ä»¥ç”¨äºå¸¸é‡è¡¨è¾¾å¼ï¼Œè€Œ`final`ä¸è¡Œã€‚



åœ¨ç±»ä¸­ï¼Œ`final`å˜é‡å¿…é¡»åœ¨æ„é€ å‡½æ•°æ‰§è¡Œä¹‹å‰åˆå§‹åŒ–ï¼Œè€Œå®ä¾‹å˜é‡å¯ä»¥æ˜¯`final`çš„ï¼Œä½†å¿…é¡»åœ¨æ„é€ å‡½æ•°ä½“å¼€å§‹ä¹‹å‰åˆå§‹åŒ–ï¼Œæˆ–è€…é€šè¿‡æ„é€ å‡½æ•°å‚æ•°åˆå§‹åŒ–ã€‚



æ¯ç§å£°æ˜æ–¹å¼çš„ä½¿ç”¨åœºæ™¯å’Œæ³¨æ„äº‹é¡¹ã€‚æ¯”å¦‚ï¼Œæ¨èåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä½¿ç”¨`var`å’Œæ˜¾å¼ç±»å‹å£°æ˜ä»¥æé«˜ä»£ç å¯è¯»æ€§å’Œç±»å‹å®‰å…¨ï¼Œè€Œ`dynamic`åº”è°¨æ…ä½¿ç”¨ï¼Œåªåœ¨å¿…è¦æ—¶ä½¿ç”¨ã€‚`final`å’Œ`const`ç”¨äºä¸å¯å˜æ•°æ®ï¼Œå¯ä»¥æé«˜ç¨‹åºçš„å®‰å…¨æ€§å’Œæ€§èƒ½ã€‚

`const`ä¸ä»…ç”¨äºå˜é‡ï¼Œè¿˜å¯ä»¥ç”¨äºåˆ›å»ºå¸¸é‡å€¼ï¼Œæ¯”å¦‚`const list = [1,2,3];`è¿™æ ·çš„åˆ—è¡¨æ˜¯ä¸å¯å˜çš„ã€‚

`late`å…³é”®å­—ï¼Œç”¨äºå»¶è¿Ÿåˆå§‹åŒ–ï¼Œå…è®¸å˜é‡åœ¨å£°æ˜æ—¶ä¸åˆå§‹åŒ–ï¼Œä½†åœ¨ä½¿ç”¨å‰å¿…é¡»èµ‹å€¼ã€‚è¿™åœ¨Dart 2.12ä¹‹åå¼•å…¥çš„éç©ºå®‰å…¨ç‰¹æ€§ä¸­å¸¸è§ï¼Œç”¨äºå¤„ç†éœ€è¦ç¨ååˆå§‹åŒ–çš„å˜é‡ã€‚ä¾‹å¦‚`late String description;`ç„¶ååœ¨æŸä¸ªæ–¹æ³•ä¸­èµ‹å€¼ã€‚



#### **æ˜¾å¼ç±»å‹å£°æ˜**

```dart
String name = 'John';
int count = 0;
```

- å˜é‡ç±»å‹åœ¨å£°æ˜æ—¶æ˜ç¡®å›ºå®šã€‚
- åç»­èµ‹å€¼å¿…é¡»ä¸å£°æ˜ç±»å‹ä¸€è‡´ï¼Œå¦åˆ™ç¼–è¯‘æŠ¥é”™ã€‚



#### ä½¿ç”¨ `var` å…³é”®å­—ï¼ˆç±»å‹æ¨æ–­ï¼‰

```dart
var name = 'John'; // æ¨æ–­ä¸º String
var list = [1, 2, 3]; // æ¨æ–­ä¸º List<int>
```

- ç±»å‹ç”±åˆå§‹å€¼è‡ªåŠ¨æ¨æ–­ï¼Œä¸€æ—¦ç¡®å®šåä¸å¯æ›´æ”¹ã€‚
- è‹¥æœªåˆå§‹åŒ–ï¼Œå˜é‡ç±»å‹ä¸º `dynamic`ï¼ˆä½†åº”é¿å…æœªåˆå§‹åŒ–ï¼‰ã€‚

- ä¸æ˜¾å¼ç±»å‹å£°æ˜ç­‰æ•ˆï¼Œä½†è¯­æ³•æ›´ç®€æ´ã€‚
- ä¸èƒ½é‡æ–°èµ‹å€¼ä¸ºå…¶ä»–ç±»å‹ã€‚



#### ä½¿ç”¨ `dynamic` å…³é”®å­—ï¼ˆåŠ¨æ€ç±»å‹ï¼‰

```dart
dynamic value = 10; // å¯èµ‹å€¼ä¸ºä»»æ„ç±»å‹
value = 'Hello';    // åˆæ³•
value = true;       // åˆæ³•
```

- å…è®¸å˜é‡åœ¨è¿è¡Œæ—¶æ”¹å˜ç±»å‹ã€‚
- å®Œå…¨ç»•è¿‡é™æ€ç±»å‹æ£€æŸ¥ï¼Œå¯èƒ½å¼•å‘è¿è¡Œæ—¶é”™è¯¯ã€‚
- ä»…åœ¨éœ€è¦é«˜åº¦çµæ´»æ€§æ—¶ä½¿ç”¨ï¼ˆå¦‚å¤„ç† JSON æ•°æ®ï¼‰ã€‚



#### ä½¿ç”¨ `final` å…³é”®å­—ï¼ˆè¿è¡Œæ—¶å¸¸é‡ï¼‰

```dart
final name = 'John';             // ç±»å‹æ¨æ–­ä¸º String
final String greeting = 'Hello'; // æ˜¾å¼æŒ‡å®šç±»å‹
final time = DateTime.now();     // è¿è¡Œæ—¶ç¡®å®šå€¼
greeting = 'Hello1' // æŠ¥é”™ï¼Œfinalå®šä¹‰çš„å˜é‡åˆå§‹åŒ–å¥½äº†å°±ä¸èƒ½å†æ”¹äº†
```

- å˜é‡åªèƒ½èµ‹å€¼ä¸€æ¬¡ï¼Œèµ‹å€¼åä¸å¯ä¿®æ”¹ã€‚
- å€¼å¯ä»¥åœ¨è¿è¡Œæ—¶ç¡®å®šï¼ˆå¦‚è°ƒç”¨å‡½æ•°æˆ–æ„é€ å‡½æ•°ï¼‰ã€‚

- ä¸ `const` ä¸åŒï¼Œ`final` å˜é‡å¯ä»¥æ˜¯è¿è¡Œæ—¶çš„å€¼ã€‚
- é€‚ç”¨äºå¯¹è±¡å±æ€§å’Œéœ€è¦å»¶è¿Ÿåˆå§‹åŒ–çš„å˜é‡ã€‚



#### ä½¿ç”¨ `const` å…³é”®å­—ï¼ˆç¼–è¯‘æ—¶å¸¸é‡ï¼‰

- å€¼å¿…é¡»åœ¨ç¼–è¯‘æ—¶ç¡®å®šï¼ˆå¦‚å­—é¢é‡ã€å…¶ä»– `const` å˜é‡æˆ–å¸¸é‡è¡¨è¾¾å¼ï¼‰ã€‚
- éšå¼ `final`ï¼Œä¸å¯ä¿®æ”¹ã€‚
- ä¸ `final` ä¸åŒï¼Œ`const` è¦æ±‚å€¼åœ¨ç¼–è¯‘æ—¶å·²çŸ¥ã€‚
- å¯ä»¥åˆ›å»ºä¸å¯å˜çš„é›†åˆï¼ˆå¦‚ `const List`ï¼‰ã€‚

```dart
String getName() {
  return 'coderwhy';
}

main(List<String> args) {
  const name = getName(); // é”™è¯¯çš„, å› ä¸ºè¦æ‰§è¡Œå‡½æ•°æ‰èƒ½è·å–åˆ°å€¼
  final name = getName(); // æ­£ç¡®çš„
}


// constæ”¾åœ¨èµ‹å€¼è¯­å¥çš„å³è¾¹ï¼Œå¯ä»¥å…±äº«å¯¹è±¡ï¼Œæé«˜æ€§èƒ½
class Person {
  const Person();
}

main(List<String> args) {
  final a = const Person();
  final b = const Person();
  print(identical(a, b)); // true

  final m = Person();
  final n = Person();
  print(identical(m, n)); // false
}
```



```dart
void main(List<String> args) {
  final p1 = Person('tom');
  final p2 = Person('tom');

  print(p1 == p2); // false
}

class Person {
  String name = '';

  Person(String name) {
    this.name = name;
  }
}
```





```dart
void main(List<String> args) {
  final p1 = Person('tom');
  final p2 = Person('tom');

  print(p1 == p2); // false
}

class Person {
  final String name;

  const Person(this.name);
  // const Person(this.name){}  // æŠ¥é”™ const constructor can't have a body.
}



void main(List<String> args) {
  const p1 = Person('tom');
  const p2 = Person('tom');
 	 const p3 = Person('jack');
  print(p1 == p2); // true
}

class Person {
  final String name;

  const Person(this.name);
  // const Person(this.name){}  // æŠ¥é”™ const constructor can't have a body.
}

```

- ä¸€ä¸ªç±»çš„æ„é€ å‡½æ•°å¦‚æœæ˜¯ç¼–è¯‘æ—¶å¸¸é‡æ„é€ å‡½æ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªç±»ä¸­çš„å±æ€§å°±ä¸èƒ½åŒ…å«éfinal ç±»å‹æ˜¯æˆå‘˜å˜é‡ï¼Œä¸”è¯¥æ„é€ å‡½æ•°ä¸èƒ½æœ‰å‡½æ•°ä½“ã€‚





#### `late` å…³é”®å­—ï¼ˆå»¶è¿Ÿåˆå§‹åŒ–ï¼‰

```dart
late String description; // å£°æ˜æ—¶ä¸åˆå§‹åŒ–

void init() {
  description = 'Initialized'; // ä½¿ç”¨å‰å¿…é¡»èµ‹å€¼
}
```

- å…è®¸å˜é‡å£°æ˜æ—¶ä¸åˆå§‹åŒ–ï¼Œä½†åœ¨ä½¿ç”¨å‰å¿…é¡»èµ‹å€¼ã€‚
- ç»“åˆ `final` ä½¿ç”¨ï¼š`late final int id;`ï¼ˆèµ‹å€¼ä¸€æ¬¡åä¸å¯ä¿®æ”¹ï¼‰ã€‚
- é¿å…éç©ºå®‰å…¨è­¦å‘Šï¼Œé€‚ç”¨äºä¾èµ–å¤–éƒ¨åˆå§‹åŒ–çš„å˜é‡ï¼ˆå¦‚ Flutter çš„ `initState`ï¼‰ã€‚
- éœ€è¦ç¨ååˆå§‹åŒ–çš„å˜é‡ï¼ˆå¸¸è§äº Flutter çŠ¶æ€ç®¡ç†ï¼‰ã€‚





### ç±»å‹åˆ¤æ–­

å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå˜é‡çš„æ•°æ®ç±»å‹ã€‚

#### ä½¿ç”¨ `is` å…³é”®å­—ï¼ˆç±»å‹æ£€æŸ¥ï¼‰

`is` å…³é”®å­—ç”¨äºæ£€æŸ¥å˜é‡æ˜¯å¦æ˜¯æŸä¸ªç±»å‹ï¼Œè¿”å›å¸ƒå°”å€¼ï¼ˆ`true`/`false`ï¼‰ã€‚è¿™æ˜¯æœ€å¸¸ç”¨çš„ç±»å‹åˆ¤æ–­æ–¹å¼ã€‚

```dart
void main() {
  dynamic value = 42;

  // æ£€æŸ¥æ˜¯å¦ä¸º int ç±»å‹
  if (value is int) {
    print("value æ˜¯æ•´æ•°");
  } else if (value is String) {
    print("value æ˜¯å­—ç¬¦ä¸²");
  }
}
```



#### ä½¿ç”¨ `runtimeType` å±æ€§ï¼ˆè·å–ç±»å‹å¯¹è±¡ï¼‰

`runtimeType` æ˜¯ Dart ä¸­æ‰€æœ‰å¯¹è±¡çš„å±æ€§ï¼Œè¿”å›ä¸€ä¸ª `Type` å¯¹è±¡ï¼Œè¡¨ç¤ºå˜é‡çš„å®é™…è¿è¡Œæ—¶ç±»å‹ã€‚

```dart
void main() {
  var value = 3.14;
  print(value.runtimeType); // è¾“å‡ºï¼šdouble

  dynamic data = "Hello";
  print(data.runtimeType);  // è¾“å‡ºï¼šString
}
```



#### ä½¿ç”¨ `as` å…³é”®å­—ï¼ˆç±»å‹è½¬æ¢ï¼‰

`as` ç”¨äºå°†å˜é‡å¼ºåˆ¶è½¬æ¢ä¸ºæŒ‡å®šç±»å‹ï¼Œè‹¥ç±»å‹ä¸åŒ¹é…ä¼šæŠ›å‡º `TypeError`ã€‚é€šå¸¸ç»“åˆ `is` ä½¿ç”¨ä»¥ç¡®ä¿å®‰å…¨ã€‚

```dart
void main() {
  dynamic value = "Hello";

  if (value is String) {
    String text = value as String; // æ˜¾å¼è½¬æ¢ï¼ˆå¯çœç•¥ï¼Œå› ä¸ºå·²ç”¨ is æ£€æŸ¥ï¼‰
    print(text.toUpperCase());
  }
}
```





####  ç©ºå®‰å…¨ä¸‹çš„ç±»å‹æ£€æŸ¥

åœ¨ç©ºå®‰å…¨ï¼ˆNull Safetyï¼‰æ¨¡å¼ä¸‹ï¼Œéœ€æ³¨æ„å¯ç©ºç±»å‹ï¼ˆ`?`ï¼‰çš„åˆ¤æ–­ã€‚

```dart
void checkType(dynamic value) {
  if (value == null) {
    print("value æ˜¯ null");
  } else if (value is int) {
    print("value æ˜¯æ•´æ•°");
  }
}
```





#### æ³›å‹ç±»å‹çš„åˆ¤æ–­

å¯¹äºæ³›å‹é›†åˆï¼ˆå¦‚ `List<T>`ï¼‰ï¼Œ`runtimeType` ä¼šè¿”å›å…·ä½“ç±»å‹ï¼Œä½†éœ€æ³¨æ„ Dart çš„æ³›å‹ç±»å‹æ“¦é™¤é—®é¢˜ã€‚

```dart
void main() {
  List<int> numbers = [1, 2, 3];
  print(numbers.runtimeType); // è¾“å‡ºï¼šList<int>

  List<String> names = ["Alice"];
  print(names.runtimeType);   // è¾“å‡ºï¼šList<String>
}
```





### æ³›å‹

**æ³›å‹ï¼ˆGenericsï¼‰** æ˜¯ä¸€ç§è®©ä»£ç æ›´çµæ´»ã€å¯é‡ç”¨ä¸”ç±»å‹å®‰å…¨çš„ç‰¹æ€§ã€‚å®ƒå…è®¸åœ¨å®šä¹‰ç±»ã€æ¥å£ã€æ–¹æ³•æˆ–å‡½æ•°æ—¶ä½¿ç”¨**ç±»å‹å‚æ•°**ï¼Œè€Œä¸æ˜¯å…·ä½“ç±»å‹ï¼Œä»è€Œæé«˜ä»£ç çš„é€šç”¨æ€§ã€‚

#### æ³›å‹ä½œç”¨

1. **ç±»å‹å®‰å…¨**ï¼šé¿å…è¿è¡Œæ—¶ç±»å‹é”™è¯¯ï¼ˆå¦‚å‘ `List<int>` ä¸­æ·»åŠ  `String`ï¼‰ã€‚
2. **å‡å°‘é‡å¤ä»£ç **ï¼šé¿å…ä¸ºä¸åŒç±»å‹ç¼–å†™ç›¸ä¼¼çš„é€»è¾‘ã€‚
3. **æé«˜å¯è¯»æ€§**ï¼šæ˜ç¡®æŒ‡å®šé›†åˆæˆ–æ–¹æ³•å¤„ç†çš„ç±»å‹ã€‚



#### ç”¨æ³•

1. æ³›å‹ç±»ï¼ˆGeneric Classï¼‰

é€šè¿‡ `<T>` å®šä¹‰ç±»å‹å‚æ•°ï¼Œ`T` æ˜¯å ä½ç¬¦ï¼Œå¯ä»¥æ˜¯ä»»æ„æ ‡è¯†ç¬¦ï¼ˆå¦‚ `E`, `K`, `V`ï¼‰ã€‚

```dart
class Box<T> {
  T value;

  Box(this.value);

  T getValue() => value;
}

void main() {
  var intBox = Box<int>(10); // æ˜ç¡®æŒ‡å®šç±»å‹ä¸º int
  var stringBox = Box<String>('Hello'); // ç±»å‹ä¸º String
  print(intBox.getValue()); // 10
  print(stringBox.getValue()); // Hello
}
```



2. æ³›å‹é›†åˆï¼ˆGeneric Collectionsï¼‰

Dart çš„é›†åˆç±»å‹ï¼ˆå¦‚ `List`, `Map`, `Set`ï¼‰é»˜è®¤ä½¿ç”¨æ³›å‹ã€‚

```dart
List<String> names = ['Alice', 'Bob']; // åªèƒ½æ·»åŠ  String
Map<String, int> scores = {'Alice': 90}; // é”®ä¸º Stringï¼Œå€¼ä¸º int
```



3. æ³›å‹æ–¹æ³•ï¼ˆGeneric Methodï¼‰

   æ–¹æ³•ä¹Ÿå¯ä»¥å®šä¹‰è‡ªå·±çš„ç±»å‹å‚æ•°ã€‚

   ```dart
   // äº¤æ¢ä¸¤ä¸ªå€¼çš„ä½ç½®
   void swap<T>(List<T> list, int a, int b) {
     T temp = list[a];
     list[a] = list[b];
     list[b] = temp;
   }
   
   void main() {
     var numbers = [1, 2, 3];
     swap(numbers, 0, 2); // è‡ªåŠ¨æ¨æ–­ T ä¸º int
     print(numbers); // [3, 2, 1]
   }
   ```

4. ç±»å‹çº¦æŸï¼ˆType Constraintsï¼‰

   é€šè¿‡ `extends` é™åˆ¶æ³›å‹å‚æ•°çš„ç±»å‹èŒƒå›´ã€‚

   ```dart
   // ä»…å…è®¸ num çš„å­ç±»ï¼ˆå¦‚ int, doubleï¼‰
   T sum<T extends num>(T a, T b) => a + b;
   
   void main() {
     print(sum(3, 5)); // 8
     print(sum(2.5, 4.7)); // 7.2
     // sum('a', 'b'); // ç¼–è¯‘é”™è¯¯ï¼šString ä¸æ˜¯ num çš„å­ç±»
   }
   ```

   

#### **æ³›å‹çš„é«˜çº§ç‰¹æ€§**

1. ç±»å‹æ¨æ–­ï¼ˆType Inferenceï¼‰

Dart èƒ½è‡ªåŠ¨æ¨æ–­æ³›å‹ç±»å‹ï¼Œæ— éœ€æ˜¾å¼æŒ‡å®šï¼š

```dart
var list = [1, 2, 3]; // æ¨æ–­ä¸º List<int>
var map = {'key': 'value'}; // æ¨æ–­ä¸º Map<String, String>
```

2. æ³›å‹ä¸åå˜ï¼ˆGenerics and Covarianceï¼‰

Dart çš„æ³›å‹æ˜¯åå˜çš„ã€‚ä¾‹å¦‚ï¼Œ`List<Cat>` æ˜¯ `List<Animal>` çš„å­ç±»å‹ï¼Œå‰ææ˜¯ `Cat` æ˜¯ `Animal` çš„å­ç±»ã€‚

```dart
class Animal {}
class Cat extends Animal {}

void main() {
  List<Cat> cats = [Cat()];
  List<Animal> animals = cats; // åå˜å…è®¸èµ‹å€¼
}
```



3. ç±»å‹æ“¦é™¤ï¼ˆType Erasureï¼‰

   Dart åœ¨è¿è¡Œæ—¶**æ“¦é™¤æ³›å‹ç±»å‹ä¿¡æ¯**ï¼Œå› æ­¤æ— æ³•åœ¨è¿è¡Œæ—¶è·å–æ³›å‹çš„å…·ä½“ç±»å‹ï¼š

   ```dart
   void checkType<T>(T value) {
     print(T); // è¿è¡Œæ—¶æ— æ³•è·å– T çš„ç±»å‹ï¼
   }
   
   void main() {
     checkType<int>(10); // è¾“å‡ºï¼šintï¼ˆä»…åœ¨å¼€å‘æ¨¡å¼ä¸‹æœ‰æ•ˆï¼Œç”Ÿäº§ç¯å¢ƒå¯èƒ½ä¸åŒï¼‰
   }
   ```

4. å¸¸è§ä½¿ç”¨åœºæ™¯

   1. **é›†åˆç±»å‹**ï¼šç¡®ä¿é›†åˆå…ƒç´ ç±»å‹å®‰å…¨ã€‚
   2. **æ•°æ®å°è£…**ï¼šå¦‚ `Future<T>`ã€`Stream<T>` å¤„ç†å¼‚æ­¥æ•°æ®ã€‚
   3. **å·¥å…·ç±»/æ–¹æ³•**ï¼šå¦‚ç¼“å­˜ã€æ•°æ®è§£æç­‰é€šç”¨é€»è¾‘ã€‚



### å‡½æ•°

dartä¸­æ²¡æœ‰å‡½æ•°é‡è½½ï¼ˆä¸æ”¯æŒæ–¹æ³•åç›¸åŒä½†å‚æ•°åä¸ç›¸åŒçš„æƒ…å†µï¼‰ã€‚

```dart
è¿”å›ç±»å‹ å‡½æ•°å(å‚æ•°åˆ—è¡¨) {
  // å‡½æ•°ä½“
  return è¿”å›å€¼;
}
```

ç¤ºä¾‹

```dart
int add(int a, int b) {
  return a + b;
}

void main() {
  print(add(3, 5)); // è¾“å‡ºï¼š8
}
```

- **è¿”å›å€¼ç±»å‹**ï¼šå¯ä»¥æ˜¯ä»»æ„æ•°æ®ç±»å‹ï¼ˆå¦‚ `int`ã€`String`ï¼‰ï¼Œè‹¥æ— è¿”å›å€¼åˆ™ç”¨ `void`ã€‚
- **å‚æ•°**ï¼šéœ€æŒ‡å®šå‚æ•°ç±»å‹ï¼Œå¤šä¸ªå‚æ•°ç”¨é€—å·åˆ†éš”ã€‚

------



#### å¯é€‰å‚æ•°

Dart æ”¯æŒä¸¤ç§å¯é€‰å‚æ•°ï¼š**ä½ç½®å¯é€‰å‚æ•°**å’Œ**å‘½åå¯é€‰å‚æ•°**ã€‚

ä¸¤ç±»å¯é€‰å‚æ•°éƒ½å¯ä»¥æœ‰é»˜è®¤å€¼ã€‚

**ä½ç½®å¯é€‰å‚æ•°**

- ä½¿ç”¨ `[]` åŒ…è£¹å‚æ•°ï¼Œ**å‚æ•°æŒ‰ä½ç½®ä¼ é€’**ã€‚
- å¿…é¡»ä¸ºéç©ºå‚æ•°æˆ–æä¾›é»˜è®¤å€¼ã€‚

```dart
String greet(String name, [String greetingï¼Œint age]) {
  return greeting != null ? "$greeting, $name!" : "Hello, $name!";
}

void main() {
  print(greet("Alice")); // è¾“å‡ºï¼šHello, Alice!
  print(greet("Bob", "Hi")); // è¾“å‡ºï¼šHi, Bob!
}
```



**å‘½åå¯é€‰å‚æ•°**

- ä½¿ç”¨ `{}` åŒ…è£¹å‚æ•°ï¼Œ**å‚æ•°æŒ‰åç§°ä¼ é€’**ï¼Œåå­—å¿…é¡»å†™ï¼Œä½†å¯¹é¡ºåºæ²¡æœ‰è¦æ±‚
- å¿…é¡»ä¸ºéç©ºå‚æ•°æˆ–æä¾›é»˜è®¤å€¼ã€‚

```dart
void printUser({String name = "Guest", int age = 0}) {
  print("Name: $name, Age: $age");
}

void main() {
  printUser(name: "Alice", age: 30); // è¾“å‡ºï¼šName: Alice, Age: 30
  printUser(); // è¾“å‡ºï¼šName: Guest, Age: 0
}



// å‘½åå¯é€‰å‚æ•°
printInfo1(String name, {int age, double height}) {
  print('name=$name age=$age height=$height');
}

// è°ƒç”¨printInfo1å‡½æ•°
printInfo1('asd'); // name=asd age=null height=null
printInfo1('asd', age: 33); // name=asd age=33 height=null
printInfo1('asd', age: 33, height: 1.7); // name=asd age=33 height=1.7
printInfo1('asd', height: 1.5); // name=asd age=null height=1.5
```

------

**é»˜è®¤å‚æ•°å€¼**

å¯ä¸ºå¯é€‰å‚æ•°è®¾ç½®é»˜è®¤å€¼ï¼Œå½“è°ƒç”¨æœªä¼ é€’å‚æ•°æ—¶ä½¿ç”¨é»˜è®¤å€¼ã€‚

```dart
void connect({String host = "localhost", int port = 8080}) {
  print("Connecting to $host:$port");
}

void main() {
  connect(); // è¾“å‡ºï¼šConnecting to localhost:8080
  connect(host: "example.com"); // è¾“å‡ºï¼šConnecting to example.com:8080
}
```

------

#### **åŒ¿åå‡½æ•°ï¼ˆLambda è¡¨è¾¾å¼ï¼‰**

æ²¡æœ‰åç§°çš„å‡½æ•°ï¼Œé€šå¸¸ç”¨äºå›è°ƒæˆ–ç®€åŒ–ä»£ç ã€‚

è¯­æ³•

```dart
(å‚æ•°åˆ—è¡¨) {
  // å‡½æ•°ä½“
};
```

ç¤ºä¾‹

```dart
void main() {
  List<int> numbers = [1, 2, 3];
  
  numbers.forEach((number) {
    print(number * 2);
  });
  
  // å•è¡Œå†™æ³•ï¼ˆç®­å¤´å‡½æ•°ï¼‰
  numbers.forEach((number) => print(number * 2));
}
```

------

#### ç®­å¤´å‡½æ•°

å½“å‡½æ•°ä½“åªæœ‰ä¸€è¡Œæ—¶ï¼Œå¯ç”¨ `=>` ç®€åŒ–ã€‚

```dart
int multiply(int a, int b) => a * b;

void main() {
  print(multiply(4, 5)); // è¾“å‡ºï¼š20
}
```

------

#### å‡½æ•°ä½œä¸ºå¯¹è±¡

Dart ä¸­å‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘ï¼Œå¯èµ‹å€¼ç»™å˜é‡æˆ–ä½œä¸ºå‚æ•°ä¼ é€’ã€‚

```dart
void main() {
  // å°†å‡½æ•°èµ‹å€¼ç»™å˜é‡
  Function operation = (int a, int b) => a + b;
  print(operation(3, 4)); // è¾“å‡ºï¼š7

  // å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’
  void execute(Function func, int x, int y) {
    print(func(x, y));
  }
  
  execute((a, b) => a * b, 5, 6); // è¾“å‡ºï¼š30
}


main(List<String> args) {
  // 1.å°†å‡½æ•°èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡
  var bar = foo;
  print(bar);

  // 2.å°†å‡½æ•°ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„å‚æ•°
  test(foo);

  // 3.å°†å‡½æ•°ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼
  var func =getFunc();
  func('jack');
}

// 1.å®šä¹‰ä¸€ä¸ªå‡½æ•°
foo(String name) {
  print('ä¼ å…¥çš„name:$name');
}

// 2.å°†å‡½æ•°ä½œä¸ºå¦å¤–ä¸€ä¸ªå‡½æ•°çš„å‚æ•°
test(Function func) {
  func('tom');
}

void test1(int fun(int num1, int num2)){
  fun(12,56)
}


typedef Calculate = int Function(int num1, int num2); // ç±»å‹åˆ«å
void test2(Calculate calc){
  calc(45,76)
}

// 3.å°†å‡½æ•°ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼
getFunc() {
  return foo;
}



```

------

#### å¼‚æ­¥å‡½æ•°

ä½¿ç”¨ `async` å’Œ `await` å¤„ç†å¼‚æ­¥æ“ä½œï¼ˆå¦‚ç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶è¯»å†™ï¼‰ã€‚

```dart
Future<void> fetchData() async {
  await Future.delayed(Duration(seconds: 2));
  print("Data loaded!");
}

void main() {
  fetchData();
  print("Loading..."); // å…ˆè¾“å‡º "Loading..."ï¼Œ2ç§’åè¾“å‡º "Data loaded!"
}
```

------

#### ç”Ÿæˆå™¨å‡½æ•°

ç”Ÿæˆå¯è¿­ä»£åºåˆ—ï¼Œä½¿ç”¨ `sync*`ï¼ˆåŒæ­¥ï¼‰æˆ– `async*`ï¼ˆå¼‚æ­¥ï¼‰ã€‚

åŒæ­¥ç”Ÿæˆå™¨

```dart
Iterable<int> countUp(int max) sync* {
  for (int i = 1; i <= max; i++) {
    yield i; // ç”Ÿæˆå€¼
  }
}

void main() {
  countUp(3).forEach(print); // è¾“å‡º 1, 2, 3
}
```

å¼‚æ­¥ç”Ÿæˆå™¨

```dart
Stream<int> countDown(int max) async* {
  for (int i = max; i >= 1; i--) {
    yield i;
    await Future.delayed(Duration(seconds: 1));
  }
}

void main() async {
  await for (int num in countDown(3)) {
    print(num); // æ¯ç§’è¾“å‡º 3, 2, 1
  }
}
```

------

#### æ€»ç»“

| **å‡½æ•°ç±»å‹**     | **è¯­æ³•**                                 | **é€‚ç”¨åœºæ™¯**       |
| :--------------- | :--------------------------------------- | :----------------- |
| åŸºæœ¬å‡½æ•°         | `int add(int a, int b) { ... }`          | é€šç”¨é€»è¾‘å°è£…       |
| å¯é€‰å‚æ•°ï¼ˆä½ç½®ï¼‰ | `[String? greeting]`                     | å¯é€‰å‚æ•°æŒ‰ä½ç½®ä¼ é€’ |
| å¯é€‰å‚æ•°ï¼ˆå‘½åï¼‰ | `{String name = "Guest"}`                | å¯é€‰å‚æ•°æŒ‰åç§°ä¼ é€’ |
| åŒ¿åå‡½æ•°         | `(a, b) => a + b`                        | å›è°ƒæˆ–ä¸´æ—¶å‡½æ•°     |
| ç®­å¤´å‡½æ•°         | `int multiply(int a, int b) => a * b;`   | å•è¡Œå‡½æ•°ç®€åŒ–       |
| å¼‚æ­¥å‡½æ•°         | `Future<void> fetchData() async { ... }` | ç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶æ“ä½œ |
| ç”Ÿæˆå™¨å‡½æ•°       | `sync*` / `async*`                       | ç”Ÿæˆåºåˆ—æ•°æ®       |

------

#### æœ€ä½³å®è·µ

1. **æ˜ç¡®å‚æ•°ç±»å‹**ï¼šå¢å¼ºä»£ç å¯è¯»æ€§å’Œå®‰å…¨æ€§ã€‚
2. **åˆç†ä½¿ç”¨å¯é€‰å‚æ•°**ï¼šé¿å…å‡½æ•°å‚æ•°è¿‡å¤šã€‚
3. **ä¼˜å…ˆä½¿ç”¨ç®­å¤´å‡½æ•°**ï¼šç®€åŒ–å•è¡Œé€»è¾‘ã€‚
4. **å¼‚æ­¥æ“ä½œå¤„ç†**ï¼šç”¨ `async`/`await` æ›¿ä»£åµŒå¥—å›è°ƒã€‚





### ä½œç”¨åŸŸ

Dart é‡‡ç”¨çš„æ˜¯**é™æ€è¯æ³•ä½œç”¨åŸŸ**ï¼ˆLexical Scopingï¼‰ï¼Œä¹Ÿç§°ä¸º**è¯æ³•ä½œç”¨åŸŸ**ã€‚è¿™æ„å‘³ç€å˜é‡çš„ä½œç”¨åŸŸåœ¨ä»£ç ç¼–å†™æ—¶å°±å·²ç»ç¡®å®šï¼Œè€Œä¸æ˜¯åœ¨è¿è¡Œæ—¶åŠ¨æ€ç¡®å®šã€‚ä½œç”¨åŸŸçš„èŒƒå›´ç”±ä»£ç çš„ç‰©ç†ç»“æ„ï¼ˆå¦‚å¤§æ‹¬å· `{}`ï¼‰å†³å®šã€‚

**ç‰¹ç‚¹**

1. **ä½œç”¨åŸŸç”±ä»£ç ç»“æ„å†³å®š**ï¼šå˜é‡çš„å¯è§æ€§ç”±å…¶å£°æ˜çš„ä½ç½®å†³å®šã€‚
2. **åµŒå¥—ä½œç”¨åŸŸ**ï¼šå†…éƒ¨ä½œç”¨åŸŸå¯ä»¥è®¿é—®å¤–éƒ¨ä½œç”¨åŸŸçš„å˜é‡ï¼Œä½†å¤–éƒ¨ä½œç”¨åŸŸä¸èƒ½è®¿é—®å†…éƒ¨ä½œç”¨åŸŸçš„å˜é‡ã€‚
3. **ä½œç”¨åŸŸé“¾**ï¼šå½“åœ¨å½“å‰ä½œç”¨åŸŸæ‰¾ä¸åˆ°å˜é‡æ—¶ï¼Œä¼šæ²¿ç€ä½œç”¨åŸŸé“¾å‘ä¸ŠæŸ¥æ‰¾ã€‚

------

**ä»£ç ç¤ºä¾‹**

ç¤ºä¾‹ 1ï¼šåŸºæœ¬ä½œç”¨åŸŸ

```dart
void main() {
  int outerVar = 10; // å¤–éƒ¨ä½œç”¨åŸŸå˜é‡

  void innerFunction() {
    int innerVar = 20; // å†…éƒ¨ä½œç”¨åŸŸå˜é‡
    print("innerVar: $innerVar"); // è®¿é—®å†…éƒ¨å˜é‡
    print("outerVar: $outerVar"); // è®¿é—®å¤–éƒ¨å˜é‡
  }

  innerFunction();
  // print(innerVar); // é”™è¯¯ï¼šinnerVar åœ¨æ­¤ä½œç”¨åŸŸä¸å¯è§
}
```

- **è¾“å‡º**ï¼š

  ```
  innerVar: 20
  outerVar: 10
  ```

  

------

ç¤ºä¾‹ 2ï¼šåµŒå¥—ä½œç”¨åŸŸ

```dart
void main() {
  int a = 1;

  void firstLevel() {
    int b = 2;

    void secondLevel() {
      int c = 3;
      print("a: $a, b: $b, c: $c"); // è®¿é—®æ‰€æœ‰å¤–å±‚å˜é‡
    }

    secondLevel();
    // print(c); // é”™è¯¯ï¼šc åœ¨æ­¤ä½œç”¨åŸŸä¸å¯è§
  }

  firstLevel();
  // print(b); // é”™è¯¯ï¼šb åœ¨æ­¤ä½œç”¨åŸŸä¸å¯è§
}
```

- **è¾“å‡º**ï¼š

  ```
  a: 1, b: 2, c: 3
  ```

------

ç¤ºä¾‹ 3ï¼šä½œç”¨åŸŸé“¾

```dart
void main() {
  int x = 10;

  void outerFunction() {
    int x = 20; // é®è”½å¤–éƒ¨çš„ x

    void innerFunction() {
      print("x: $x"); // è®¿é—®æœ€è¿‘çš„ x
    }

    innerFunction();
  }

  outerFunction();
}
```

- **è¾“å‡º**ï¼š

  ```
  x: 20
  ```

  

------

ç¤ºä¾‹ 4ï¼šå…¨å±€ä½œç”¨åŸŸ

```dart
int globalVar = 100; // å…¨å±€å˜é‡

void main() {
  print("globalVar: $globalVar"); // è®¿é—®å…¨å±€å˜é‡

  void localFunction() {
    int localVar = 200; // å±€éƒ¨å˜é‡
    print("globalVar: $globalVar, localVar: $localVar");
  }

  localFunction();
  // print(localVar); // é”™è¯¯ï¼šlocalVar åœ¨æ­¤ä½œç”¨åŸŸä¸å¯è§
}
```

- **è¾“å‡º**ï¼š

  ```
  globalVar: 100
  globalVar: 100, localVar: 200
  ```

- **è¯´æ˜**ï¼š

  - å…¨å±€å˜é‡ `globalVar` åœ¨æ•´ä¸ªç¨‹åºä¸­å¯è§ã€‚
  - å±€éƒ¨å˜é‡ `localVar` åªåœ¨ `localFunction` ä¸­å¯è§ã€‚

------

**é™æ€è¯æ³•ä½œç”¨åŸŸ vs åŠ¨æ€ä½œç”¨åŸŸ**

| **ç‰¹æ€§**           | **é™æ€è¯æ³•ä½œç”¨åŸŸ**            | **åŠ¨æ€ä½œç”¨åŸŸ**     |
| :----------------- | :---------------------------- | :----------------- |
| **ä½œç”¨åŸŸç¡®å®šæ—¶æœº** | ä»£ç ç¼–å†™æ—¶ç¡®å®š                | è¿è¡Œæ—¶ç¡®å®š         |
| **å˜é‡æŸ¥æ‰¾è§„åˆ™**   | æ²¿ç€ä»£ç ç»“æ„å‘ä¸ŠæŸ¥æ‰¾          | æ²¿ç€è°ƒç”¨æ ˆå‘ä¸ŠæŸ¥æ‰¾ |
| **ç¤ºä¾‹è¯­è¨€**       | Dartã€JavaScriptã€Pythonã€C++ | Bashã€Emacs Lisp   |

------

**æ€»ç»“**

- Dart çš„é™æ€è¯æ³•ä½œç”¨åŸŸç”±ä»£ç çš„ç‰©ç†ç»“æ„å†³å®šï¼Œå˜é‡çš„å¯è§æ€§åœ¨ç¼–å†™ä»£ç æ—¶å°±å·²ç»ç¡®å®šã€‚
- å†…éƒ¨ä½œç”¨åŸŸå¯ä»¥è®¿é—®å¤–éƒ¨ä½œç”¨åŸŸçš„å˜é‡ï¼Œä½†å¤–éƒ¨ä½œç”¨åŸŸæ— æ³•è®¿é—®å†…éƒ¨ä½œç”¨åŸŸçš„å˜é‡ã€‚
- ä½œç”¨åŸŸé“¾çš„æŸ¥æ‰¾è§„åˆ™æ˜¯ä»å†…å‘å¤–é€çº§æŸ¥æ‰¾ã€‚

é€šè¿‡ç†è§£ Dart çš„ä½œç”¨åŸŸè§„åˆ™ï¼Œå¯ä»¥æ›´å¥½åœ°ç»„ç»‡ä»£ç ï¼Œé¿å…å˜é‡å†²çªå’Œæ„å¤–è¡Œä¸ºã€‚





### é—­åŒ…

Dart ä¸­æœ‰**é—­åŒ…ï¼ˆClosureï¼‰**çš„æ¦‚å¿µã€‚é—­åŒ…æ˜¯æŒ‡ä¸€ä¸ªå‡½æ•°å¯ä»¥æ•è·å¹¶ä¿å­˜å…¶è¯æ³•ä½œç”¨åŸŸåŠå…¶è¯æ³•ä½œç”¨åŸŸé“¾ä¸Šçš„å˜é‡ï¼Œå³ä½¿å‡½æ•°åœ¨å…¶åŸå§‹ä½œç”¨åŸŸä¹‹å¤–æ‰§è¡Œï¼Œä»ç„¶å¯ä»¥è®¿é—®è¿™äº›å˜é‡ã€‚

**ç‰¹ç‚¹**

1. **æ•è·å˜é‡**ï¼šé—­åŒ…å¯ä»¥æ•è·å…¶è¯æ³•ä½œç”¨åŸŸä¸­çš„å˜é‡ã€‚
2. **å»¶é•¿å˜é‡ç”Ÿå‘½å‘¨æœŸ**ï¼šå³ä½¿å¤–éƒ¨å‡½æ•°å·²ç»æ‰§è¡Œå®Œæ¯•ï¼Œé—­åŒ…ä»ç„¶å¯ä»¥è®¿é—®å…¶æ•è·çš„å˜é‡ã€‚
3. **å‡½æ•°ä½œä¸ºå¯¹è±¡**ï¼šé—­åŒ…æ˜¯ Dart ä¸­å‡½æ•°ä½œä¸ºä¸€ç­‰å…¬æ°‘çš„ä½“ç°ï¼Œå¯ä»¥èµ‹å€¼ç»™å˜é‡ã€ä½œä¸ºå‚æ•°ä¼ é€’æˆ–ä»å‡½æ•°è¿”å›ã€‚

```dart
void main() {
  Function makeAdder(int addBy) {
    return (int i) => addBy + i; // è¿”å›ä¸€ä¸ªé—­åŒ…
  }

  var add2 = makeAdder(2); // åˆ›å»ºä¸€ä¸ªåŠ  2 çš„é—­åŒ…
  var add5 = makeAdder(5); // åˆ›å»ºä¸€ä¸ªåŠ  5 çš„é—­åŒ…

  print(add2(3)); // è¾“å‡ºï¼š5 (2 + 3)
  print(add5(3)); // è¾“å‡ºï¼š8 (5 + 3)
}
```

- `makeAdder` å‡½æ•°è¿”å›ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼ˆé—­åŒ…ï¼‰ï¼Œè¯¥é—­åŒ…æ•è·äº† `addBy` å˜é‡ã€‚
- å³ä½¿ `makeAdder` æ‰§è¡Œå®Œæ¯•ï¼Œé—­åŒ…ä»ç„¶å¯ä»¥è®¿é—® `addBy`ã€‚

```dart
void main() {
  Function counter() {
    int count = 0;
    return () {
      count++; // æ•è·å¹¶ä¿®æ”¹ count
      print("Count: $count");
    };
  }

  var increment = counter();
  increment(); // è¾“å‡ºï¼šCount: 1
  increment(); // è¾“å‡ºï¼šCount: 2
  increment(); // è¾“å‡ºï¼šCount: 3
}
```



```dart
void main() {
  var functions = [];
  for (var i = 0; i < 3; i++) {
    functions.add(() => print(i)); // æ•è·å¾ªç¯å˜é‡ i
  }

  functions.forEach((func) => func()); // è¾“å‡ºï¼š2, 2, 2
}
```

- åœ¨å¾ªç¯ä¸­åˆ›å»ºçš„é—­åŒ…æ•è·çš„æ˜¯åŒä¸€ä¸ªå˜é‡ `i`ï¼Œè€Œä¸æ˜¯æ¯æ¬¡å¾ªç¯æ—¶çš„å€¼ã€‚
- æœ€ç»ˆ `i` çš„å€¼ä¸º `2`ï¼Œå› æ­¤æ‰€æœ‰é—­åŒ…è¾“å‡º `2`ã€‚

```dart
void main() {
  var functions = [];
  for (var i = 0; i < 3; i++) {
    functions.add(() {
      var current = i; // æ•è·å½“å‰å¾ªç¯çš„å€¼
      return () => print(current);
    }());
  }

  functions.forEach((func) => func()); // è¾“å‡ºï¼š0, 1, 2
}
```

- é€šè¿‡ç«‹å³æ‰§è¡Œå‡½æ•°ï¼ˆIIFEï¼‰æ•è·å½“å‰å¾ªç¯çš„å€¼ï¼Œè§£å†³é—­åŒ…æ•è·é—®é¢˜ã€‚
- æ¯ä¸ªé—­åŒ…æ•è·çš„æ˜¯ä¸åŒçš„ `current` å€¼ã€‚



æ‰€æœ‰å‡½æ•°éƒ½è¿”å›ä¸€ä¸ªå€¼ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šè¿”å›å€¼ï¼Œåˆ™è¯­å¥è¿”å›nullï¼›éšå¼é™„åŠ åˆ°å‡½æ•°ä½“ã€‚

```dart
main(List<String> args) {
  print(foo()); // null
}

foo() {
  print('foo function');
}
```





### è¿ç®—ç¬¦

åªè®°å½•æ¯”è¾ƒç‰¹æ®Šçš„è¿ç®—ç¬¦ã€‚

```dart
var num = 7;

print(num ~/ 3); // æ•´é™¤æ“ä½œ, ç»“æœ2;
```

??=èµ‹å€¼æ“ä½œ

- å½“å˜é‡ä¸ºnullæ—¶ï¼Œä½¿ç”¨åé¢çš„å†…å®¹è¿›è¡Œèµ‹å€¼ã€‚
- å½“å˜é‡æœ‰å€¼æ—¶ï¼Œä½¿ç”¨è‡ªå·±åŸæ¥çš„å€¼ã€‚

```dart
var name = null;
name ??= 'abc'; 
print(name);  // æ‰“å°abc
```

æ¡ä»¶è¿ç®—ç¬¦

```dart
// var temp = 'abc';
var temp = null;
var name = temp ?? 'qwe';
print(name);  
```

**expr1 ?? expr2**

- å¦‚æœexpr1æ˜¯nullï¼Œåˆ™è¿”å›expr2çš„ç»“æœ;

- å¦‚æœexpr1ä¸æ˜¯nullï¼Œç›´æ¥ä½¿ç”¨expr1çš„ç»“æœã€‚

  

**çº§è”è¯­æ³•ï¼š..**

- å¸Œæœ›å¯¹ä¸€ä¸ªå¯¹è±¡è¿›è¡Œè¿ç»­çš„æ“ä½œï¼Œå¯ä»¥ä½¿ç”¨çº§è”è¯­æ³•

```dart
// çº§è”è¿ç®—ç¬¦
var list = [1, 2, 3]
  ..add(4)
  ..add(5);
print(list); // [1, 2, 3, 4, 5]


class Person {
  String name = '';

  void run() {
    print("${name} is running");
  }

  void eat() {
    print("${name} is eating");
  }

  void swim() {
    print("${name} is swimming");
  }
}

main(List<String> args) {
  final p1 = Person();
  p1.name = 'abc';
  p1.run();
  p1.eat();
  p1.swim();

  final p2 =
      Person()
        ..name = "qwe"
        ..run()
        ..eat()
        ..swim();
}
```



**å…¶ä»–**

```dart
// æ¡ä»¶æˆå‘˜è®¿é—®
var obj;
print(obj?.length); // null


// ç±»å‹æµ‹è¯•è¿ç®—ç¬¦
print(a is int); // true
print(a is! String); // true
```





### æµç¨‹æ§åˆ¶è¯­å¥

- ####  `if` è¯­å¥

- #### `if-else` è¯­å¥

- #### `else-if` è¯­å¥

- #### `switch-case` è¯­å¥

  ```dart
  switch (variable) {
    case value1:
      // å½“ variable ç­‰äº value1 æ—¶æ‰§è¡Œ
      break;
    case value2:
      // å½“ variable ç­‰äº value2 æ—¶æ‰§è¡Œ
      break;
    default:
      // å½“æ²¡æœ‰åŒ¹é…çš„ case æ—¶æ‰§è¡Œ
  }
  ```

- #### `for` å¾ªç¯

  ```dart
  for (int i = 0; i < 5; i++) {
    print(i); // è¾“å‡º 0, 1, 2, 3, 4
  }
  
  
  // ç”¨äºéå†é›†åˆï¼ˆå¦‚åˆ—è¡¨ã€é›†åˆç­‰ï¼‰
  var list = [1, 2, 3];
  for (var item in list) {
    print(item); // è¾“å‡º 1, 2, 3
  }
  ```

- `while`å¾ªç¯

  ```dart
  int i = 0;
  while (i < 5) {
    print(i); // è¾“å‡º 0, 1, 2, 3, 4
    i++;
  }
  ```

- #### `do-while` å¾ªç¯

  ```dart
  int i = 0;
  do {
    print(i); // è¾“å‡º 0, 1, 2, 3, 4
    i++;
  } while (i < 5);
  ```

  

  **è·³è½¬è¯­å¥**

  ç”¨äºæ”¹å˜ç¨‹åºçš„æ‰§è¡Œé¡ºåºã€‚

  `break`

  ç”¨äºç»ˆæ­¢å¾ªç¯æˆ– `switch` è¯­å¥ã€‚

  ```dart
  for (int i = 0; i < 5; i++) {
    if (i == 3) {
      break; // å½“ i ç­‰äº 3 æ—¶ç»ˆæ­¢å¾ªç¯
    }
    print(i); // è¾“å‡º 0, 1, 2
  }
  ```

  `continue`

  ç”¨äºè·³è¿‡å½“å‰å¾ªç¯çš„å‰©ä½™éƒ¨åˆ†ï¼Œç›´æ¥è¿›å…¥ä¸‹ä¸€æ¬¡å¾ªç¯ã€‚

  ```dart
  for (int i = 0; i < 5; i++) {
    if (i == 3) {
      continue; // è·³è¿‡ i ç­‰äº 3 çš„æƒ…å†µ
    }
    print(i); // è¾“å‡º 0, 1, 2, 4
  }
  ```

  `return`

  ç”¨äºä»å‡½æ•°ä¸­è¿”å›å€¼å¹¶ç»ˆæ­¢å‡½æ•°æ‰§è¡Œã€‚

  ```dart
  int add(int a, int b) {
    return a + b; // è¿”å› a + b çš„ç»“æœ
  }
  ```

  `throw`

  ç”¨äºæŠ›å‡ºå¼‚å¸¸ã€‚

  ```dart
  if (value < 0) {
    throw Exception('Value cannot be negative');
  }
  ```

  ------

  

  **å¼‚å¸¸å¤„ç†**

  ç”¨äºå¤„ç†ç¨‹åºè¿è¡Œæ—¶çš„é”™è¯¯ã€‚

  `try-catch`

  æ•è·å¹¶å¤„ç†å¼‚å¸¸ã€‚

  ```dart
  try {
    // å¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„ä»£ç 
  } catch (e) {
    print('An error occurred: $e');
  }
  ```

  `try-catch-finally`

  æ— è®ºæ˜¯å¦å‘ç”Ÿå¼‚å¸¸ï¼Œ`finally` å—ä¸­çš„ä»£ç éƒ½ä¼šæ‰§è¡Œã€‚

  ```dart
  try {
    // å¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„ä»£ç 
  } catch (e) {
    print('An error occurred: $e');
  } finally {
    print('This will always run');
  }
  ```

  `on` å…³é”®å­—

  ç”¨äºæ•è·ç‰¹å®šç±»å‹çš„å¼‚å¸¸ã€‚

  ```dart
  try {
    // å¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„ä»£ç 
  } on FormatException {
    print('FormatException occurred');
  } on Exception catch (e) {
    print('Unknown exception: $e');
  }
  ```

  ------

  **å…¶ä»–æµç¨‹æ§åˆ¶**

   `assert`

  ç”¨äºè°ƒè¯•æ—¶æ£€æŸ¥æ¡ä»¶æ˜¯å¦ä¸º `true`ï¼Œå¦‚æœä¸º `false` åˆ™æŠ›å‡ºå¼‚å¸¸ã€‚

  ```dart
  assert(condition, 'Condition is false');
  ```

  `await` å’Œ `async`

  ç”¨äºå¼‚æ­¥ç¼–ç¨‹ï¼Œæ§åˆ¶å¼‚æ­¥ä»£ç çš„æ‰§è¡Œé¡ºåºã€‚

  ```dart
  Future<void> fetchData() async {
    var data = await fetchFromServer(); // ç­‰å¾…å¼‚æ­¥æ“ä½œå®Œæˆ
    print(data);
  }
  ```

  ------

  **ç¤ºä¾‹ä»£ç **

  ```dart
  void main() {
    // æ¡ä»¶è¯­å¥
    int age = 18;
    if (age >= 18) {
      print('You are an adult');
    } else {
      print('You are a minor');
    }
  
    // å¾ªç¯è¯­å¥
    for (int i = 0; i < 3; i++) {
      print('For loop: $i');
    }
  
    // è·³è½¬è¯­å¥
    for (int i = 0; i < 5; i++) {
      if (i == 3) {
        break;
      }
      print('Break: $i');
    }
  
    // å¼‚å¸¸å¤„ç†
    try {
      var result = 10 ~/ 0;
    } catch (e) {
      print('Caught an exception: $e');
    } finally {
      print('Finally block executed');
    }
  }
  ```





### éšå¼æ¥å£

Dart æ²¡æœ‰æ˜¾å¼çš„ `interface` å…³é”®å­—å®šä¹‰ï¼Œè€Œæ˜¯é€šè¿‡ **éšå¼æ¥å£** æ¥å®ç°æ¥å£çš„åŠŸèƒ½ã€‚å…·ä½“æ¥è¯´ï¼š

åœ¨ Dart ä¸­ï¼Œ**æ¯ä¸ªç±»éƒ½éšå¼åœ°å®šä¹‰äº†ä¸€ä¸ªæ¥å£**ã€‚è¿™ä¸ªæ¥å£åŒ…å«äº†ç±»çš„æ‰€æœ‰å…¬å…±æˆå‘˜ï¼ˆåŒ…æ‹¬æ–¹æ³•å’Œå±æ€§ï¼‰ã€‚å…¶ä»–ç±»å¯ä»¥é€šè¿‡ `implements` å…³é”®å­—æ¥å®ç°è¿™ä¸ªæ¥å£ï¼Œä»è€Œå¼ºåˆ¶å®ç°æ¥å£ä¸­å®šä¹‰çš„æ‰€æœ‰æˆå‘˜ã€‚

ç”±äº Dart ä¸­çš„æ¥å£æ˜¯é€šè¿‡ç±»éšå¼å®šä¹‰çš„ï¼Œå› æ­¤å¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤æ¥ä½¿ç”¨æ¥å£ï¼š

#### å®šä¹‰æ¥å£

- åˆ›å»ºä¸€ä¸ªç±»ï¼Œè¿™ä¸ªç±»çš„å…¬å…±æˆå‘˜å°±æ˜¯æ¥å£çš„å†…å®¹ã€‚

- ä¾‹å¦‚ï¼š

  ```dart
  class Animal {
    void makeSound() {
      print('Some sound');
    }
  }
  ```

  è¿™é‡Œï¼Œ`Animal` ç±»éšå¼å®šä¹‰äº†ä¸€ä¸ªæ¥å£ï¼ŒåŒ…å« `makeSound` æ–¹æ³•ã€‚

#### å®ç°æ¥å£

- ä½¿ç”¨ `implements` å…³é”®å­—æ¥å®ç°æ¥å£ã€‚

- å¿…é¡»å®ç°æ¥å£ä¸­å®šä¹‰çš„æ‰€æœ‰æ–¹æ³•ã€‚

- ä¾‹å¦‚ï¼š

  ```dart
  class Dog implements Animal {
    @override
    void makeSound() {
      print('Woof!');
    }
  }
  ```

  è¿™é‡Œï¼Œ`Dog` ç±»å®ç°äº† `Animal` æ¥å£ï¼Œå¹¶é‡å†™äº† `makeSound` æ–¹æ³•ã€‚

------

#### **æ¥å£çš„ç‰¹ç‚¹**

- **å¤šå®ç°**ï¼šDart æ”¯æŒä¸€ä¸ªç±»å®ç°å¤šä¸ªæ¥å£ã€‚
- **å¼ºåˆ¶å®ç°**ï¼šå®ç°æ¥å£çš„ç±»å¿…é¡»å®ç°æ¥å£ä¸­å®šä¹‰çš„æ‰€æœ‰æ–¹æ³•ã€‚
- **è§£è€¦**ï¼šæ¥å£å¯ä»¥å°†ç±»çš„å®šä¹‰ä¸å®ç°åˆ†ç¦»ï¼Œæé«˜ä»£ç çš„çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚

#### ç¤ºä¾‹ï¼šå¤šæ¥å£å®ç°

```dart
class Flyable {
  void fly() {
    print('Flying');
  }
}

class Swimmable {
  void swim() {
    print('Swimming');
  }
}

class Duck implements Flyable, Swimmable {
  @override
  void fly() {
    print('Duck is flying');
  }

  @override
  void swim() {
    print('Duck is swimming');
  }
}

void main() {
  var duck = Duck();
  duck.fly();
  duck.swim();
}
```

**è¾“å‡ºï¼š**

```
Duck is flying
Duck is swimming
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`Duck` ç±»åŒæ—¶å®ç°äº† `Flyable` å’Œ `Swimmable` ä¸¤ä¸ªæ¥å£ã€‚

------

#### æ¥å£ä¸æŠ½è±¡ç±»çš„åŒºåˆ«

- **æ¥å£**ï¼š
  - é€šè¿‡ `implements` å®ç°ã€‚
  - åªèƒ½å®šä¹‰æ–¹æ³•ç­¾åï¼Œä¸èƒ½åŒ…å«å…·ä½“å®ç°ã€‚
  - ä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ã€‚
- **æŠ½è±¡ç±»**ï¼š
  - é€šè¿‡ `extends` ç»§æ‰¿ã€‚
  - å¯ä»¥åŒ…å«å…·ä½“å®ç°çš„æ–¹æ³•ã€‚
  - ä¸€ä¸ªç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªæŠ½è±¡ç±»ã€‚

#### ç¤ºä¾‹ï¼šæ¥å£ vs æŠ½è±¡ç±»

```dart
// æ¥å£
class Eatable {
  void eat();
}

// æŠ½è±¡ç±»
abstract class Drinkable {
  void drink() {
    print('Drinking');
  }
}

class Human implements Eatable, Drinkable {
  @override
  void eat() {
    print('Eating');
  }

  @override
  void drink() {
    print('Human is drinking');
  }
}

void main() {
  var human = Human();
  human.eat();
  human.drink();
}
```

**è¾“å‡ºï¼š**

```
Eating
Human is drinking
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼š

- `Eatable` æ˜¯ä¸€ä¸ªæ¥å£ï¼Œ`Human` å¿…é¡»å®ç° `eat` æ–¹æ³•ã€‚
- `Drinkable` æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œ`Human` å¯ä»¥é€‰æ‹©é‡å†™ `drink` æ–¹æ³•ã€‚

------

#### **ä½¿ç”¨åœºæ™¯**

- **æ¥å£**ï¼š
  - å½“éœ€è¦å®šä¹‰ä¸€ç»„æ–¹æ³•ç­¾åï¼Œä½†ä¸å…³å¿ƒå…·ä½“å®ç°æ—¶ã€‚
  - å½“éœ€è¦å®ç°å¤šé‡ç»§æ‰¿æ—¶ã€‚
- **æŠ½è±¡ç±»**ï¼š
  - å½“éœ€è¦æä¾›éƒ¨åˆ†é»˜è®¤å®ç°æ—¶ã€‚
  - å½“éœ€è¦å…±äº«ä»£ç é€»è¾‘æ—¶ã€‚

------

#### æ€»ç»“

- Dart ä¸­æ²¡æœ‰æ˜¾å¼çš„ `interface` å…³é”®å­—ï¼Œæ¥å£æ˜¯é€šè¿‡ç±»éšå¼å®šä¹‰çš„ã€‚
- ä½¿ç”¨ `implements` å…³é”®å­—æ¥å®ç°æ¥å£ã€‚
- æ¥å£å¯ä»¥å®ç°å¤šé‡ç»§æ‰¿ï¼Œè€ŒæŠ½è±¡ç±»åªèƒ½å•ç»§æ‰¿ã€‚
- æ¥å£é€‚åˆå®šä¹‰è¡Œä¸ºå¥‘çº¦ï¼ŒæŠ½è±¡ç±»é€‚åˆå…±äº«ä»£ç é€»è¾‘ã€‚

é€šè¿‡åˆç†ä½¿ç”¨æ¥å£å’ŒæŠ½è±¡ç±»ï¼Œå¯ä»¥ä½¿ä»£ç æ›´å…·æ‰©å±•æ€§å’Œçµæ´»æ€§ã€‚



### ç±»

ä½¿ç”¨ `class` å…³é”®å­—å®šä¹‰ç±»ï¼Œé€šè¿‡æ„é€ å‡½æ•°åˆå§‹åŒ–å¯¹è±¡ï¼Œæ”¯æŒç»§æ‰¿ã€æ¥å£ã€æ··å…¥ï¼ˆMixinï¼‰ç­‰ç‰¹æ€§ã€‚

```dart
class Person {
  // æˆå‘˜å˜é‡ï¼ˆå±æ€§ï¼‰
  String name;
  int age;
  double height

  // é»˜è®¤æ„é€ å‡½æ•°
  Person(this.name, this.age);

  // å‘½åæ„é€ å‡½æ•°
  // Person.anonymous() {
  //  name = 'Unknown';
  //  age = 0;
  //}
  Person.anonymous(this.name,this.age,this.height);

  // æ–¹æ³•
  void sayHello() {
    print('Hello, I am $name, $age years old.');
  }
}

// ä½¿ç”¨ç±»
void main() {
  var person1 = Person('Alice', 30);
  var person2 = Person.anonymous('Alice', 30,1.7);
  person1.sayHello(); // è¾“å‡ºï¼šHello, I am Alice, 30 years old.
}
```



#### **æ„é€ å‡½æ•°**

- æ”¯æŒé»˜è®¤æ„é€ å‡½æ•°ã€å·¥å‚æ„é€ å‡½æ•°ï¼ˆ`factory`ï¼‰ã€‚

```dart
class Point {
  final double x, y;
  Point(double x, double y)  : x = x, y = y {
    print('Point created at ($x, $y)');
  }
}
```



#### å‘½åæ„é€ å‡½æ•°

`ClassName.named()`

- å› ä¸ºä¸æ”¯æŒæ–¹æ³•ï¼ˆå‡½æ•°ï¼‰çš„é‡è½½ï¼Œæ‰€ä»¥æ²¡åŠæ³•åˆ›å»ºç›¸åŒåç§°çš„æ„é€ æ–¹æ³•ã€‚

```dart
class Person {
  String name;
  int age;

  Person() {
    name = '';
    age = 0;
  }
	// å‘½åæ„é€ æ–¹æ³•
  Person.withArgments(String name, int age) {
    this.name = name;
    this.age = age;
  }

  @override
  String toString() {
    return 'name=$name age=$age';
  }
}

// åˆ›å»ºå¯¹è±¡
var p1 = new Person();
print(p1);
var p2 = new Person.withArgments('qwe', 20);
print(p2);
```

- åˆå§‹åŒ–åˆ—è¡¨ï¼ˆ`Initializer list`ï¼‰å¯åœ¨æ„é€ å‡½æ•°ä½“æ‰§è¡Œå‰åˆå§‹åŒ–æˆå‘˜å˜é‡ã€‚

  ```dart
  class Point {
    final num x;
    final num y;
    final num distance;
  
    // é”™è¯¯å†™æ³•,è¿™é‡Œä¹‹æ‰€ä»¥ä¸å¯¹æ˜¯å› ä¸º è¿™å‡ ä¸ªæˆå‘˜å˜é‡éƒ½æ˜¯final ç±»å‹çš„ï¼Œå¿…é¡»åœ¨åœ¨æ„é€ å‡½æ•°æ‰§è¡Œä¹‹å‰åˆå§‹åŒ–å¥½
    // Point(this.x, this.y) {
    //   distance = sqrt(x * x + y * y);
    // }
  
    // æ­£ç¡®çš„å†™æ³•ï¼Œ:åé¢å°±æ˜¯åœ¨åˆå§‹åŒ–åˆ—è¡¨
    Point(this.x, this.y) : distance = sqrt(x * x + y * y);
  }
  ```

  



#### è®¿é—®æ§åˆ¶

- Dart æ²¡æœ‰ `public`/`private` ä¿®é¥°ç¬¦ï¼Œæˆå‘˜é»˜è®¤æ˜¯å…¬å¼€çš„ã€‚
- ä»¥ä¸‹åˆ’çº¿ `_` å¼€å¤´çš„æˆå‘˜ä¸ºç§æœ‰ï¼ˆä»…åœ¨å½“å‰æ–‡ä»¶å¯è§ï¼‰ã€‚

```dart
class Secret {
  String _privateData = 'hidden'; // ç§æœ‰å˜é‡
}
```

#### **ç»§æ‰¿**

- ä½¿ç”¨ `extends` ç»§æ‰¿çˆ¶ç±»ï¼Œ`super` è°ƒç”¨çˆ¶ç±»æ–¹æ³•ã€‚

```dart
class Student extends Person {
  String school;
  Student(String name, int age, this.school) : super(name, age);
}
```



#### **æ¥å£å’Œæ··å…¥ï¼ˆMixinï¼‰**

é€šè¿‡implementså®ç°æŸä¸ªæ¥å£ç±»æ—¶ï¼Œæ¥å£ç±»ä¸­æ‰€æœ‰çš„æ–¹æ³•éƒ½å¿…é¡»`è¢«é‡æ–°å®ç°`(æ— è®ºè¿™ä¸ªæ¥å£ç±»åŸæ¥æ˜¯å¦å·²ç»å®ç°è¿‡è¯¥æ–¹æ³•)ã€‚

- ä½¿ç”¨ `implements` å®ç°æ¥å£ï¼Œ`with` æ··å…¥ Mixinã€‚

```dart
mixin CodeSkills {
  void play(){
    // å®ç°
  }
}

class Employee {
  String say(){
    // å®ç°zzzzz
  }
}


class Developer extends Person with CodeSkills implements Employee {
  // ...
}
```



æŸäº›æƒ…å†µä¸‹ï¼Œä¸€ä¸ªç±»å¯èƒ½å¸Œæœ›ç›´æ¥å¤ç”¨ä¹‹å‰ç±»çš„åŸæœ‰å®ç°æ–¹æ¡ˆã€‚

- ä½¿ç”¨ç»§æ‰¿ï¼Œä½†æ˜¯Dartåªæ”¯æŒå•ç»§æ‰¿ï¼Œé‚£ä¹ˆæ„å‘³ç€åªèƒ½å¤ç”¨ä¸€ä¸ªç±»çš„å®ç°ã€‚
- ä½¿ç”¨**Mixinæ··å…¥çš„æ–¹å¼**



- é™¤äº†å¯ä»¥é€šè¿‡classå®šä¹‰ç±»ä¹‹å¤–ï¼Œä¹Ÿå¯ä»¥é€šè¿‡mixinå…³é”®å­—æ¥å®šä¹‰ä¸€ä¸ªç±»ã€‚
- åªæ˜¯é€šè¿‡mixinå®šä¹‰çš„ç±»ç”¨äºè¢«å…¶ä»–ç±»æ··å…¥ä½¿ç”¨ï¼Œé€šè¿‡withå…³é”®å­—æ¥è¿›è¡Œæ··å…¥ã€‚

```dart
main(List<String> args) {
  var superMan = SuperMain();
  superMan.run();
  superMan.fly();
}

mixin Runner {
  run() {
    print('è·‘');
  }
}

mixin Flyer {
  fly() {
    print('é£');
  }
}

class SuperMain with Runner, Flyer {

}
```









> æ³¨æ„ç‚¹ï¼š
>
> - åœ¨æ–¹æ³•ä¸­ä½¿ç”¨å±æ€§(æˆå‘˜/å®ä¾‹å˜é‡)æ—¶ï¼Œ`å¯ä»¥ä¸åŠ this`ï¼›
> - åœ¨æ–¹æ³•ä¸­é€šå¸¸ä½¿ç”¨å±æ€§æ—¶ï¼Œä¼š`çœç•¥this`ï¼Œä½†æ˜¯æœ‰`å‘½åå†²çª`æ—¶ï¼Œ`thisä¸èƒ½çœç•¥`ï¼›
>
> 
>
> å½“é€šè¿‡ç±»åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œä¼šè°ƒç”¨è¿™ä¸ªç±»çš„æ„é€ æ–¹æ³•ã€‚
>
> - å½“ç±»ä¸­`æ²¡æœ‰æ˜ç¡®æŒ‡å®šæ„é€ æ–¹æ³•`æ—¶ï¼Œå°†é»˜è®¤æ‹¥æœ‰ä¸€ä¸ª`æ— å‚çš„æ„é€ æ–¹æ³•`ã€‚
>
> - å½“è‡ªå®šä¹‰äº†æ„é€ æ–¹æ³•æ—¶ï¼Œ`é»˜è®¤çš„æ„é€ æ–¹æ³•å°†ä¼šå¤±æ•ˆ`ï¼Œä¸èƒ½ä½¿ç”¨
>
>   - å¯èƒ½å¸Œæœ›æ˜ç¡®çš„å†™ä¸€ä¸ªé»˜è®¤çš„æ„é€ æ–¹æ³•ï¼Œä½†æ˜¯ä¼šå’Œè‡ªå®šä¹‰çš„æ„é€ æ–¹æ³•å†²çªï¼›
>   - Dartæœ¬èº«`ä¸æ”¯æŒå‡½æ•°çš„é‡è½½`ï¼ˆåç§°ç›¸åŒ, å‚æ•°ä¸åŒçš„æ–¹å¼ï¼‰ã€‚
>
>   - å¯ä»¥å®ç°è‡ªå·±çš„toStringæ–¹æ³•
>
>   ```dart
>   class Person {
>     String name;
>     int age;
>   
>     Person(String name, int age) {
>       this.name = name;
>       this.age = age;
>     }
>   
>     @override
>     String toString() {
>       return 'name=$name age=$age';
>     }
>   }
>   ```
>
> - åœ¨å®ç°æ„é€ æ–¹æ³•æ—¶ï¼Œå¦‚æœæ¥å—çš„å‚æ•°å°±æ˜¯éœ€è¦ç»™å¯¹åº”çš„**`å±æ€§`**èµ‹å€¼ï¼Œä¸ºæ­¤ï¼ŒDartæä¾›äº†ä¸€ç§æ›´åŠ ç®€æ´çš„`è¯­æ³•ç³–å½¢å¼`ã€‚
>
>   ```dart
>   Person(String name, int age) {
>     this.name = name;
>     this.age = age;
>   }
>                 
>   // ç­‰åŒäº
>   Person(this.name, this.age);
>   ```
>
>   



#### **é‡å®šå‘æ„é€ æ–¹æ³•**

é‡å®šå‘æ„é€ æ–¹æ³•æŒ‡çš„æ˜¯**ä¸€ä¸ªæ„é€ å‡½æ•°å°†åˆå§‹åŒ–è¿‡ç¨‹é‡å®šå‘åˆ°å¦ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œé€šå¸¸ç”¨äºç®€åŒ–ä»£ç æˆ–åœ¨ä¸åŒçš„æ„é€ æ–¹å¼ä¹‹é—´å…±äº«é€»è¾‘**ã€‚

**é‡å®šå‘æ„é€ æ–¹æ³•ä½¿ç”¨å†’å·ï¼ˆ:ï¼‰å’Œthiså…³é”®å­—æ¥æŒ‡å‘å¦ä¸€ä¸ªæ„é€ æ–¹æ³•**ã€‚ä¾‹å¦‚ï¼Œåœ¨å®šä¹‰ä¸€ä¸ªç±»æ—¶ï¼Œå¯èƒ½æœ‰å¤šä¸ªæ„é€ æ–¹æ³•å¤„ç†ä¸åŒçš„å‚æ•°æƒ…å†µï¼Œè€Œå…¶ä¸­ä¸€äº›æ„é€ æ–¹æ³•å¯èƒ½åªæ˜¯å°†å‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªæ„é€ æ–¹æ³•ï¼Œè¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨é‡å®šå‘ã€‚

åœ¨ä¸€ä¸ªæ„é€ æ–¹æ³•ä¸­å»è°ƒç”¨å¦å¤–ä¸€ä¸ªæ„é€ æ–¹æ³•, è¿™ä¸ªæ—¶å€™å¯ä»¥ä½¿ç”¨`é‡å®šå‘æ„é€ æ–¹æ³•`ï¼š

```dart
class Person {
  String name;
  int age;

  Person(this.name, this.age);
  Person.fromName(String name) : this(name, 0);
}
```

åœ¨ `Person.fromName(String name)` è¿™ä¸ªå‘½åæ„é€ å‡½æ•°ä¸­ï¼Œä¸èƒ½åœ¨å‡½æ•°ä½“ä¸­è°ƒç”¨ `this(name, 0)` ã€‚å› ä¸ºåœ¨ Dart ä¸­ï¼Œé‡å®šå‘æ„é€ æ–¹æ³•æ˜¯åœ¨å†’å·åé¢ä½¿ç”¨ `this` è°ƒç”¨å…¶ä»–æ„é€ æ–¹æ³•ï¼Œè€Œä¸æ˜¯åœ¨å‡½æ•°ä½“ä¸­è°ƒç”¨ã€‚



#### å¸¸é‡æ„é€ æ–¹æ³•

**å¸¸é‡æ„é€ æ–¹æ³•ï¼ˆConstant Constructorï¼‰** æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ„é€ å‡½æ•°ï¼Œç”¨äºåˆ›å»º**ç¼–è¯‘æ—¶å¸¸é‡å¯¹è±¡**ã€‚å®ƒçš„æ ¸å¿ƒç›®çš„æ˜¯ä¼˜åŒ–æ€§èƒ½ï¼Œç¡®ä¿åœ¨ç¨‹åºè¿è¡Œå‰ï¼ˆç¼–è¯‘æ—¶ï¼‰ç”Ÿæˆ**ä¸å¯å˜ä¸”å”¯ä¸€**çš„å®ä¾‹ï¼Œé¿å…é‡å¤åˆ›å»ºç›¸åŒçš„å¯¹è±¡ã€‚

è¦å®šä¹‰ä¸€ä¸ªå¸¸é‡æ„é€ æ–¹æ³•ï¼Œéœ€è¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š

1. **ç±»çš„æ‰€æœ‰æˆå‘˜å˜é‡å¿…é¡»æ˜¯ `final` ç±»å‹**ï¼ˆä¸å¯å˜ï¼‰ã€‚
2. **æ„é€ å‡½æ•°å¿…é¡»ç”¨ `const` å…³é”®å­—å£°æ˜**ã€‚
3. **å®ä¾‹åŒ–æ—¶å¿…é¡»ä½¿ç”¨ `const` å…³é”®å­—**ã€‚



**éå¸¸é‡æ„é€ æ–¹æ³•ä»£ç **ï¼š

```dart
main(List<String> args) {
  var p1 = Person('asd');
  var p2 = Person('asd');
  print(identical(p1, p2)); // false
}

class Person {
  String name;

  Person(this.name);
}
```

å°†æ„é€ æ–¹æ³•å‰åŠ `constè¿›è¡Œä¿®é¥°`ï¼Œé‚£ä¹ˆå¯ä»¥ä¿è¯åŒä¸€ä¸ªå‚æ•°ï¼Œåˆ›å»ºå‡ºæ¥çš„å¯¹è±¡æ˜¯ç›¸åŒçš„ã€‚

```dart
main(List<String> args) {
  var p1 = const Person('asd');
  var p2 = const Person('asd');
  print(identical(p1, p2)); // true
}

class Person {
  final String name;

  const Person(this.name);
}


class Point {
  // æ‰€æœ‰å­—æ®µå¿…é¡»ä¸º final
  final int x;
  final int y;

  // ä½¿ç”¨ const å£°æ˜å¸¸é‡æ„é€ å‡½æ•°
  const Point(this.x, this.y);
}

void main() {
  // å®ä¾‹åŒ–æ—¶å¿…é¡»ä½¿ç”¨ const
  const p1 = Point(1, 2);
  const p2 = Point(1, 2);
  const p3 = Point(2, 3);

  print(p1 == p2); // trueï¼ˆç›¸åŒå‚æ•°ï¼ŒæŒ‡å‘åŒä¸€å®ä¾‹ï¼‰
  print(p1 == p3); // falseï¼ˆå‚æ•°ä¸åŒï¼‰
}
```



**å¸¸é‡æ„é€ æ–¹æ³•çš„ä½œç”¨**

**æ€§èƒ½ä¼˜åŒ–**

- ç¼–è¯‘æ—¶åˆ›å»ºå¯¹è±¡ï¼šå¸¸é‡å¯¹è±¡åœ¨ç¼–è¯‘æ—¶ç”Ÿæˆï¼Œè€Œéè¿è¡Œæ—¶ã€‚

- **å”¯ä¸€æ€§ä¿è¯**ï¼šç›¸åŒå‚æ•°çš„ `const` å®ä¾‹ä¼šæŒ‡å‘åŒä¸€ä¸ªå†…å­˜åœ°å€ï¼ˆç±»ä¼¼å•ä¾‹ï¼‰ï¼Œé¿å…é‡å¤åˆ†é…å†…å­˜ã€‚

  ```dart
  const p1 = Point(1, 2);
  const p2 = Point(1, 2);
  print(identical(p1, p2)); // trueï¼ˆå†…å­˜åœ°å€ç›¸åŒï¼‰
  ```

**å¼ºåˆ¶ä¸å¯å˜æ€§**

- ç±»çš„æˆå‘˜å¿…é¡»ä¸º `final`ï¼Œç¡®ä¿å¯¹è±¡åˆ›å»ºåæ— æ³•è¢«ä¿®æ”¹ï¼Œå¢å¼ºä»£ç å®‰å…¨æ€§å’Œå¯é¢„æµ‹æ€§ã€‚

 **ä¸æ™®é€šæ„é€ æ–¹æ³•çš„åŒºåˆ«**

| **ç‰¹æ€§**         | **å¸¸é‡æ„é€ æ–¹æ³•**                          | **æ™®é€šæ„é€ æ–¹æ³•**                 |
| :--------------- | :---------------------------------------- | :------------------------------- |
| **æ„é€ å‡½æ•°å£°æ˜** | å¿…é¡»ç”¨ `const` ä¿®é¥°                       | æ— ç‰¹æ®Šä¿®é¥°ç¬¦                     |
| **æˆå‘˜å˜é‡**     | å¿…é¡»å…¨éƒ¨ä¸º `final`                        | å¯ä»¥æ˜¯å¯å˜å˜é‡                   |
| **å®ä¾‹åŒ–æ–¹å¼**   | å¿…é¡»ç”¨ `const` å®ä¾‹åŒ–ï¼ˆå¦åˆ™è§†ä¸ºæ™®é€šå¯¹è±¡ï¼‰ | ç”¨ `new` æˆ–çœç•¥å…³é”®å­—å®ä¾‹åŒ–      |
| **å†…å­˜åˆ†é…**     | ç¼–è¯‘æ—¶ç”Ÿæˆï¼Œç›¸åŒå‚æ•°å…±äº«å†…å­˜              | è¿è¡Œæ—¶ç”Ÿæˆï¼Œæ¯æ¬¡å®ä¾‹åŒ–åˆ†é…æ–°å†…å­˜ |

```dart
// æ™®é€šæ„é€ æ–¹æ³•
class NormalPoint {
  int x;
  int y;
  NormalPoint(this.x, this.y);
}

void main() {
  var np1 = NormalPoint(1, 2);
  var np2 = NormalPoint(1, 2);
  print(identical(np1, np2)); // falseï¼ˆå†…å­˜åœ°å€ä¸åŒï¼‰
}
```



**ä½¿ç”¨åœºæ™¯**

**ä¸å¯å˜æ•°æ®æ¨¡å‹**

- ä¾‹å¦‚åæ ‡ç‚¹ã€é¢œè‰²ã€é…ç½®é¡¹ç­‰æ— éœ€ä¿®æ”¹çš„æ¨¡å‹ã€‚

  ```dart
  class Color {
    final int r, g, b;
    const Color(this.r, this.g, this.b);
  }
  
  const red = Color(255, 0, 0);
  ```

 **Flutter ä¸­çš„ä¼˜åŒ–**

- åœ¨ Flutter ä¸­ï¼Œå¹¿æ³›ä½¿ç”¨ `const` æ„é€ å‡½æ•°åˆ›å»ºå°éƒ¨ä»¶ï¼ˆWidgetï¼‰ï¼Œå‡å°‘é‡å»ºå¼€é”€ã€‚

  ```dart
  const Text(
    'Hello',
    style: TextStyle(fontSize: 16),
  )
  ```

------

 æ³¨æ„äº‹é¡¹

1. **å¿…é¡»æ˜¾å¼ä½¿ç”¨ `const`**ï¼š

   - å³ä½¿æ„é€ å‡½æ•°æ˜¯ `const`ï¼Œå®ä¾‹åŒ–æ—¶ä»éœ€ç”¨ `const` æ‰èƒ½ç”Ÿæˆç¼–è¯‘æ—¶å¸¸é‡ã€‚

     ```dart
     var p = Point(1, 2); // æ™®é€šå¯¹è±¡ï¼ˆé constï¼‰
     ```

2. **å‚æ•°å¿…é¡»ä¸ºç¼–è¯‘æ—¶å¸¸é‡**ï¼š

   - å¦‚æœæ„é€ å‡½æ•°å‚æ•°æ˜¯åŠ¨æ€è®¡ç®—çš„ï¼ˆå¦‚å‡½æ•°è¿”å›å€¼ï¼‰ï¼Œä¸èƒ½ä½¿ç”¨ `const`ã€‚

     ```dart
     // é”™è¯¯ç¤ºä¾‹ï¼šå‚æ•°ä¸æ˜¯ç¼–è¯‘æ—¶å¸¸é‡
     const p = Point(1 + 2, 3); 
     ```

3. **å¸¸é‡ä¸Šä¸‹æ–‡ä¼ æ’­**ï¼š

   - åœ¨å¸¸é‡ä¸Šä¸‹æ–‡ä¸­ï¼ˆå¦‚é›†åˆçš„ `const` å£°æ˜ï¼‰ï¼Œå¯ä»¥çœç•¥å†…éƒ¨å®ä¾‹çš„ `const`ã€‚

     ```dart
     const points = [Point(1, 2), Point(3, 4)]; // åˆæ³•
     ```

------

æ€»ç»“

- **å¸¸é‡æ„é€ æ–¹æ³•**ç”¨äºåˆ›å»ºç¼–è¯‘æ—¶ä¸å¯å˜å¯¹è±¡ï¼Œæå‡æ€§èƒ½å’Œå†…å­˜åˆ©ç”¨ç‡ã€‚



**å·¥å‚æ„é€ æ–¹æ³•**

```dart
main(List<String> args) {
  var p1 = Person('abc');
  var p2 = Person('abc');
  print(identical(p1, p2)); // true
}

class Person {
  String name;

  static final Map<String, Person> _cache = <String, Person>{};

  factory Person(String name) {
    if (_cache.containsKey(name)) {
      return _cache[name];
    } else {
      final p = Person._internal(name);
      _cache[name] = p;
      return p;
    }
  }

  Person._internal(this.name);
}

```







JavaScript çš„ç±»ï¼ˆES6+ï¼‰ä¸ Dart åœ¨è¯­æ³•å’ŒåŠŸèƒ½ä¸Šæœ‰ä»¥ä¸‹ä¸»è¦åŒºåˆ«ï¼š

**æ„é€ å‡½æ•°**

| ç‰¹æ€§             | Dart                                   | JavaScript (ES6+)                              |
| :--------------- | :------------------------------------- | :--------------------------------------------- |
| **æ„é€ å‡½æ•°å®šä¹‰** | ä½¿ç”¨ä¸ç±»åŒåçš„æ„é€ å‡½æ•°æˆ–å‘½åæ„é€ å‡½æ•°ã€‚ | ä½¿ç”¨ `constructor` æ–¹æ³•ã€‚                      |
| **åˆå§‹åŒ–æ–¹å¼**   | æ”¯æŒåˆå§‹åŒ–åˆ—è¡¨ï¼ˆ`:` è¯­æ³•ï¼‰ã€‚           | åœ¨ `constructor` å†…åˆå§‹åŒ–å±æ€§ã€‚                |
| **ç¤ºä¾‹**         | `Person(this.name, this.age);`         | `constructor(name, age) { this.name = name; }` |

**è®¿é—®æ§åˆ¶**

| ç‰¹æ€§         | Dart                          | JavaScript (ES6+)                      |
| :----------- | :---------------------------- | :------------------------------------- |
| **ç§æœ‰æˆå‘˜** | æˆå‘˜ä»¥ä¸‹åˆ’çº¿ `_` å¼€å¤´ä¸ºç§æœ‰ã€‚ | ä½¿ç”¨ `#` å‰ç¼€å®šä¹‰ç§æœ‰å­—æ®µï¼ˆES2022+ï¼‰ã€‚ |
| **ç¤ºä¾‹**     | `String _secret;`             | `#secret = 'hidden';`                  |

**ç±»å‹ç³»ç»Ÿ**

| ç‰¹æ€§         | Dart                         | JavaScript (ES6+)            |
| :----------- | :--------------------------- | :--------------------------- |
| **ç±»å‹å£°æ˜** | å¼ºç±»å‹ï¼Œéœ€æ˜¾å¼å£°æ˜æˆå‘˜ç±»å‹ã€‚ | åŠ¨æ€ç±»å‹ï¼Œæ— éœ€å£°æ˜æˆå‘˜ç±»å‹ã€‚ |
| **ç±»å‹æ£€æŸ¥** | ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥ã€‚             | è¿è¡Œæ—¶ç±»å‹æ£€æŸ¥ã€‚             |

 **ç»§æ‰¿ä¸æ··å…¥**

| ç‰¹æ€§              | Dart                         | JavaScript (ES6+)                    |
| :---------------- | :--------------------------- | :----------------------------------- |
| **ç»§æ‰¿**          | å•ç»§æ‰¿ï¼ˆ`extends`ï¼‰ã€‚        | å•ç»§æ‰¿ï¼ˆ`extends`ï¼‰ã€‚                |
| **æ··å…¥ï¼ˆMixinï¼‰** | æ˜¾å¼é€šè¿‡ `with` ä½¿ç”¨ Mixinã€‚ | é€šè¿‡ç»„åˆæˆ–åŸå‹é“¾æ¨¡æ‹Ÿï¼ˆæ— åŸç”Ÿè¯­æ³•ï¼‰ã€‚ |

**Getter/Setter**

| ç‰¹æ€§         | Dart                                    | JavaScript (ES6+)                                            |
| :----------- | :-------------------------------------- | :----------------------------------------------------------- |
| **å®šä¹‰æ–¹å¼** | ä½¿ç”¨ `get`/`set` å…³é”®å­—ã€‚               | é€šè¿‡ `get`/`set` æ–¹æ³•æˆ– `Object.defineProperty`ã€‚            |
| **ç¤ºä¾‹**     | `dart<br>get fullName => '$name $age';` | `js<br>get fullName() { return `${this.name} ${this.age}`; }` |

**æ“ä½œç¬¦é‡è½½**

| ç‰¹æ€§         | Dart                      | JavaScript (ES6+) |
| :----------- | :------------------------ | :---------------- |
| **æ˜¯å¦æ”¯æŒ** | æ”¯æŒï¼ˆå¦‚ `+`, `==` ç­‰ï¼‰ã€‚ | ä¸æ”¯æŒã€‚          |

------

**ä»£ç ç¤ºä¾‹å¯¹æ¯”**

Dart ç±» vs JavaScript ç±»

```dart
// Dart
class Animal {
  String name;
  Animal(this.name); // é»˜è®¤æ„é€ å‡½æ•°
  void speak() => print('$name makes a sound');
}

class Dog extends Animal {
  Dog(String name) : super(name);
  @override
  void speak() => print('$name barks!');
}
```



```javascript
// JavaScript (ES6+)
class Animal {
  constructor(name) {
    this.name = name;
  }
  speak() {
    console.log(`${this.name} makes a sound`);
  }
}

class Dog extends Animal {
  constructor(name) {
    super(name);
  }
  speak() {
    console.log(`${this.name} barks!`);
  }
}
```

------

**æ€»ç»“**

- **Dart ç±»**ï¼šå¼ºç±»å‹ã€æ”¯æŒåˆå§‹åŒ–åˆ—è¡¨ã€å‘½åæ„é€ å‡½æ•°ã€æ˜¾å¼ Mixin å’Œæ¥å£ã€æ“ä½œç¬¦é‡è½½ã€‚
- **JavaScript ç±»**ï¼šåŠ¨æ€ç±»å‹ã€åŸºäºåŸå‹é“¾ã€æ— æ“ä½œç¬¦é‡è½½å’Œ Mixin åŸç”Ÿæ”¯æŒï¼Œç§æœ‰å­—æ®µéœ€ç”¨ `#` å®šä¹‰ã€‚



#### getter/setter

```dart
class Person {
  String name;
  
  set setName(String name){
    this.name = name;
  }
  
  String get getName {   // æ²¡æœ‰å°æ‹¬å·
    return name;
  }
}
```





### æŠ½è±¡ç±»

**æŠ½è±¡ç±»ï¼ˆAbstract Classï¼‰** æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç±»ï¼Œä¸»è¦ç”¨äºå®šä¹‰**æ¥å£è§„èŒƒ**å’Œ**å…±äº«å…¬å…±é€»è¾‘**ï¼Œä½†å®ƒæœ¬èº«ä¸èƒ½è¢«ç›´æ¥å®ä¾‹åŒ–ã€‚æŠ½è±¡ç±»çš„æ ¸å¿ƒç›®çš„æ˜¯ä¸ºå­ç±»æä¾›ä¸€ä¸ªæ¨¡æ¿æˆ–çº¦æŸï¼Œå¼ºåˆ¶å­ç±»å®ç°æŸäº›æ–¹æ³•ï¼ŒåŒæ—¶å¯ä»¥åŒ…å«éƒ¨åˆ†å…·ä½“å®ç°ã€‚

#### **æŠ½è±¡ç±»çš„å®šä¹‰**

- ä½¿ç”¨ `abstract` å…³é”®å­—å£°æ˜æŠ½è±¡ç±»ã€‚
- å¯ä»¥åŒ…å« **æŠ½è±¡æ–¹æ³•**ï¼ˆæ²¡æœ‰æ–¹æ³•ä½“çš„æ–¹æ³•ï¼‰å’Œ **å…·ä½“æ–¹æ³•**ï¼ˆæœ‰æ–¹æ³•ä½“çš„æ–¹æ³•ï¼‰ã€‚
- æŠ½è±¡ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–ï¼ˆå³ä¸èƒ½ç›´æ¥é€šè¿‡ `new` åˆ›å»ºå¯¹è±¡ï¼‰ã€‚

```dart
abstract class Animal {
  // æŠ½è±¡æ–¹æ³•ï¼šæ²¡æœ‰æ–¹æ³•ä½“ï¼Œå¿…é¡»ç”±å­ç±»å®ç°
  void makeSound();

  // å…·ä½“æ–¹æ³•ï¼šæœ‰é»˜è®¤å®ç°ï¼Œå­ç±»å¯ä»¥ç›´æ¥ç»§æ‰¿æˆ–é‡å†™
  void breathe() {
    print('Breathing...');
  }
}
```

ç‰¹ç‚¹ï¼š

- å­ç±»ç»§æ‰¿æŠ½è±¡ç±»åï¼Œ**å¿…é¡»å®ç°æ‰€æœ‰æŠ½è±¡æ–¹æ³•**ï¼Œå¦åˆ™å­ç±»ä¹Ÿå¿…é¡»å£°æ˜ä¸ºæŠ½è±¡ç±»ã€‚
- æŠ½è±¡ç±»å¯ä»¥å®šä¹‰æˆå‘˜å˜é‡ï¼ˆåŒ…æ‹¬ `final` å˜é‡ï¼‰ï¼Œå­ç±»å¯ä»¥ç›´æ¥ç»§æ‰¿è¿™äº›å˜é‡ã€‚



#### æŠ½è±¡ç±»çš„ç‰¹æ®Šç”¨æ³•ï¼šå·¥å‚æ„é€ å‡½æ•°

è™½ç„¶æŠ½è±¡ç±»ä¸èƒ½ç›´æ¥å®ä¾‹åŒ–ï¼Œä½†å¯ä»¥é€šè¿‡**å·¥å‚æ„é€ å‡½æ•°ï¼ˆFactory Constructorï¼‰** è¿”å›å…·ä½“å­ç±»çš„å®ä¾‹ã€‚ä¾‹å¦‚ Dart ä¸­çš„ `Map` å’Œ `List` å°±æ˜¯é€šè¿‡è¿™ç§æ–¹å¼åˆ›å»ºçš„ã€‚

```dart
abstract class MyCollection {
  factory MyCollection() = MyList; // å·¥å‚æ„é€ å‡½æ•°æŒ‡å‘å…·ä½“å®ç°ç±»
  void add(int item);
}

class MyList implements MyCollection {
  @override
  void add(int item) => print('Added: $item');
}

void main() {
  var collection = MyCollection(); // å®é™…åˆ›å»ºçš„æ˜¯ MyList å®ä¾‹
  collection.add(10); // è¾“å‡º: Added: 10
}
```

**æŠ½è±¡ç±»**é€šå¸¸æ˜¯ä¸èƒ½ç›´æ¥å®ä¾‹åŒ–çš„ï¼ˆå³ä¸èƒ½ä½¿ç”¨ `new` å…³é”®å­—åˆ›å»ºå¯¹è±¡ï¼‰ï¼Œå› ä¸ºæŠ½è±¡ç±»å¯èƒ½åŒ…å«æœªå®ç°çš„æŠ½è±¡æ–¹æ³•ã€‚ç„¶è€Œï¼Œ `Map` ç±»ç­‰æ˜¯ç‰¹æ®Šæƒ…å†µï¼Œå®ƒè™½ç„¶æ˜¯æŠ½è±¡ç±»ï¼Œä½†å¯ä»¥é€šè¿‡å·¥å‚æ„é€ å‡½æ•°ï¼ˆfactory constructorï¼‰æ¥åˆ›å»ºå®ä¾‹ã€‚

`Map` æ˜¯ Dart ä¸­çš„ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œä½†å®ƒæä¾›äº†ä¸€ä¸ª **å·¥å‚æ„é€ å‡½æ•°**ï¼ˆfactory constructorï¼‰ï¼Œå…è®¸ä½ åˆ›å»º `Map` çš„å®ä¾‹ã€‚å·¥å‚æ„é€ å‡½æ•°æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ„é€ å‡½æ•°ï¼Œå®ƒå¯ä»¥è¿”å›ä¸€ä¸ªå®ä¾‹ï¼Œè€Œä¸ä¸€å®šæ˜¯å½“å‰ç±»çš„å®ä¾‹ã€‚

`Map` ç±»çš„å®šä¹‰å¦‚ä¸‹ï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼š

```dart
abstract class Map<K, V> {
  // å·¥å‚æ„é€ å‡½æ•°
  factory Map() = LinkedHashMap<K, V>;

  // å…¶ä»–æ–¹æ³•å’Œå±æ€§
}
```

- `Map` æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œä¸èƒ½ç›´æ¥å®ä¾‹åŒ–ã€‚
- ä½†å®ƒæä¾›äº†ä¸€ä¸ªå·¥å‚æ„é€ å‡½æ•° `factory Map()`ï¼Œè¿™ä¸ªæ„é€ å‡½æ•°è¿”å›äº†ä¸€ä¸ª `LinkedHashMap` çš„å®ä¾‹ï¼ˆ`LinkedHashMap` æ˜¯ `Map` çš„ä¸€ä¸ªå…·ä½“å®ç°ï¼‰ã€‚

å› æ­¤ï¼Œå½“å†™ `new Map()` æˆ– `Map()` æ—¶ï¼Œå®é™…ä¸Šæ˜¯è°ƒç”¨äº†è¿™ä¸ªå·¥å‚æ„é€ å‡½æ•°ï¼Œè¿”å›äº†ä¸€ä¸ª `LinkedHashMap` çš„å®ä¾‹ã€‚





### external

`external` å…³é”®å­—ç”¨äºå£°æ˜ä¸€ä¸ªå‡½æ•°æˆ–æ–¹æ³•çš„ **æ¥å£**ï¼Œä½†å°†å…¶ **å…·ä½“å®ç°å§”æ‰˜ç»™å¤–éƒ¨**ï¼ˆå¦‚å…¶ä»–è¯­è¨€ç¼–å†™çš„ä»£ç æˆ– Dart çš„åº•å±‚è¿è¡Œæ—¶ï¼‰ã€‚å®ƒçš„æ ¸å¿ƒä½œç”¨æ˜¯**åˆ†ç¦»å£°æ˜ä¸å®ç°**ï¼Œå¸¸ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š

#### **`external` çš„ä½œç”¨**

- **å£°æ˜æ¥å£**ï¼šæ ‡è®°æŸä¸ªæ–¹æ³•çš„å­˜åœ¨ï¼Œä½†ä¸æä¾› Dart ä»£ç çš„å®ç°ã€‚
- **å¤–éƒ¨ç»‘å®š**ï¼šå®é™…å®ç°å¯èƒ½ç”±ä»¥ä¸‹æ–¹å¼æä¾›ï¼š
  - **å¹³å°ç‰¹å®šçš„ä»£ç **ï¼ˆå¦‚ Android/iOS åŸç”Ÿä»£ç ã€JavaScriptï¼‰ã€‚
  - **Dart è™šæ‹Ÿæœºï¼ˆVMï¼‰çš„åº•å±‚å®ç°**ï¼ˆå¦‚ Dart æ ¸å¿ƒåº“ä¸­çš„æŸäº›æ–¹æ³•ï¼‰ã€‚
  - **é€šè¿‡æ³¨è§£ç»‘å®š**ï¼ˆå¦‚ `@JS` æ³¨è§£ç”¨äºè°ƒç”¨ JavaScript å‡½æ•°ï¼‰ã€‚



#### **å¸¸è§ä½¿ç”¨åœºæ™¯**

(1) **è°ƒç”¨åŸç”Ÿä»£ç ï¼ˆå¦‚ Flutter æ’ä»¶å¼€å‘ï¼‰**

åœ¨ Flutter æ’ä»¶ä¸­ï¼ŒDart ä»£ç é€šè¿‡ `external` å£°æ˜æ–¹æ³•ï¼Œå®é™…å®ç°ç”±å¹³å°ç‰¹å®šçš„ä»£ç ï¼ˆJava/Kotlinã€Swift/Objective-Cï¼‰å®Œæˆã€‚

**ç¤ºä¾‹**ï¼š

```dart
// Dart ä¾§å£°æ˜å¤–éƒ¨æ–¹æ³•
external void logMessage(String message);
```

å¯¹åº”çš„ Android åŸç”Ÿä»£ç ï¼ˆJavaï¼‰å¯èƒ½é€šè¿‡ JNI å®ç°ï¼š

```dart
// Java å®ç°
public class Logger {
  public static void logMessage(String message) {
    Log.d("TAG", message);
  }
}
```

------

(2) **Dart ä¸ JavaScript äº’æ“ä½œ**

ä½¿ç”¨ `package:js` åº“æ—¶ï¼Œ`external` æ–¹æ³•å¯ä»¥ç»‘å®šåˆ° JavaScript å‡½æ•°ã€‚

**ç¤ºä¾‹**ï¼š

```dart
import 'package:js/js.dart';

@JS('console.log') // ç»‘å®šåˆ° JavaScript çš„ console.log
external void jsLog(String message);

void main() {
  jsLog('Hello from Dart!'); // è°ƒç”¨ JavaScript çš„ console.log
}
```

------

(3) **Dart æ ¸å¿ƒåº“ä¸­çš„åº•å±‚å®ç°**

Dart æ ¸å¿ƒåº“ä¸­çš„æŸäº›æ–¹æ³•ï¼ˆå¦‚ `dart:math` çš„ `sqrt`ï¼‰é€šè¿‡ `external` å£°æ˜ï¼Œå®é™…å®ç°ç”± Dart è™šæ‹Ÿæœºä¼˜åŒ–ã€‚

**ç¤ºä¾‹**ï¼š

```dart
// Dart æ ¸å¿ƒåº“ä¸­çš„ external æ–¹æ³•
external double sqrt(num x);
```

å®é™…å®ç°å¯èƒ½ç”± Dart è™šæ‹Ÿæœºç”¨ C++ æˆ–å…¶ä»–åº•å±‚è¯­è¨€å®Œæˆã€‚

------

#### **è¯­æ³•è§„åˆ™**

- **æ— æ–¹æ³•ä½“**ï¼š`external` æ–¹æ³•ä¸èƒ½æœ‰ Dart ä»£ç çš„å®ç°ä½“ã€‚
- **éœ€ç»‘å®šå®ç°**ï¼šå¿…é¡»é€šè¿‡å…¶ä»–æ–¹å¼ï¼ˆå¦‚æ³¨è§£ã€åŸç”Ÿä»£ç ç»‘å®šï¼‰æä¾›å…·ä½“å®ç°ã€‚
- **æ”¯æŒé™æ€æ–¹æ³•**ï¼šå¯ä»¥å£°æ˜é™æ€çš„ `external` æ–¹æ³•ã€‚

**ç¤ºä¾‹**ï¼š

```dart
class MathUtils {
  external static double fastSin(double x); // å¤–éƒ¨å®ç°çš„é™æ€æ–¹æ³•
}
```

------

#### ä¸ `abstract` æ–¹æ³•çš„åŒºåˆ«

| ç‰¹æ€§         | `external` æ–¹æ³•           | `abstract` æ–¹æ³•          |
| :----------- | :------------------------ | :----------------------- |
| **å£°æ˜ä½ç½®** | æ™®é€šç±»æˆ–é¡¶å±‚å‡½æ•°          | æŠ½è±¡ç±»æˆ–æ¥å£             |
| **å®ç°æ–¹å¼** | ç”±å¤–éƒ¨ä»£ç ï¼ˆé Dartï¼‰æä¾› | ç”±å­ç±»ç”¨ Dart ä»£ç å®ç°   |
| **æ–¹æ³•ä½“**   | ä¸å…è®¸æœ‰ Dart ä»£ç å®ç°ä½“  | ä¸å…è®¸æœ‰ Dart ä»£ç å®ç°ä½“ |
| **å…¸å‹ç”¨é€”** | è·¨å¹³å°è°ƒç”¨ã€åº•å±‚ä¼˜åŒ–      | å®šä¹‰æ¥å£è§„èŒƒ             |

------

#### æ³¨æ„äº‹é¡¹

- **ä¾èµ–å¤–éƒ¨å·¥å…·é“¾**ï¼šä½¿ç”¨ `external` é€šå¸¸éœ€è¦é…åˆæ„å»ºå·¥å…·ï¼ˆå¦‚ `build_runner`ï¼‰æˆ–å¹³å°é€šé“ï¼ˆFlutter æ’ä»¶ï¼‰ã€‚
- **è°ƒè¯•å¤æ‚æ€§**ï¼šç”±äºå®ç°åœ¨å¤–éƒ¨ï¼Œè°ƒè¯•å¯èƒ½éœ€è¦æŸ¥çœ‹åŸç”Ÿä»£ç æˆ– JavaScriptã€‚
- **æ€§èƒ½ä¼˜åŠ¿**ï¼šæŸäº› `external` æ–¹æ³•ï¼ˆå¦‚æ•°å­¦è¿ç®—ï¼‰å¯èƒ½ç»è¿‡åº•å±‚ä¼˜åŒ–ï¼Œæ€§èƒ½æ›´é«˜ã€‚

------

#### ç¤ºä¾‹ï¼šDart è°ƒç”¨ JavaScript

```dart
import 'package:js/js.dart';

// ç»‘å®šåˆ° JavaScript çš„ alert å‡½æ•°
@JS('alert')
external void showAlert(String message);

void main() {
  showAlert('Hello from Dart!'); // è§¦å‘æµè§ˆå™¨çš„ alert å¼¹çª—
}
```

------

#### æ€»ç»“

- `external` ç”¨äºå£°æ˜æ–¹æ³•æ¥å£ï¼Œå°†å®ç°å§”æ‰˜ç»™å¤–éƒ¨ä»£ç ã€‚
- å¸¸è§äºè·¨å¹³å°å¼€å‘ã€JavaScript äº’æ“ä½œã€Dart æ ¸å¿ƒåº“çš„åº•å±‚ä¼˜åŒ–ã€‚
- éœ€è¦ç»“åˆå…¶ä»–æœºåˆ¶ï¼ˆå¦‚æ³¨è§£ã€åŸç”Ÿä»£ç ç»‘å®šï¼‰å®Œæˆå®ç°ã€‚



### `@patch`

**`@patch`** æ˜¯ä¸€ä¸ªç”¨äº **å¹³å°ç‰¹å®šå®ç°ï¼ˆPlatform-Specific Implementationsï¼‰** çš„æ³¨è§£ï¼Œä¸»è¦å‡ºç°åœ¨ Dart çš„æ ¸å¿ƒåº“ï¼ˆå¦‚ `dart:core`ã€`dart:math` ç­‰ï¼‰ä¸­ã€‚å®ƒçš„æ ¸å¿ƒä½œç”¨æ˜¯å…è®¸å¼€å‘è€…é’ˆå¯¹ä¸åŒå¹³å°ï¼ˆå¦‚ Dart VMã€Flutterã€Webï¼‰æä¾›ä¸åŒçš„åº•å±‚å®ç°ï¼ŒåŒæ—¶ä¿æŒæ ¸å¿ƒåº“æ¥å£çš„ç»Ÿä¸€æ€§ã€‚

#### **`@patch` çš„ä½œç”¨**

1. **åˆ†ç¦»æ¥å£ä¸å®ç°**
   - Dart æ ¸å¿ƒåº“çš„å…¬å…±æ¥å£æ˜¯è·¨å¹³å°ç»Ÿä¸€çš„ï¼ˆä¾‹å¦‚ `List`ã€`String` çš„æ–¹æ³•ï¼‰ã€‚
   - `@patch` æ³¨è§£æ ‡è®°çš„æ–¹æ³•æ˜¯è¿™äº›æ¥å£çš„ **å¹³å°ç‰¹å®šå®ç°**ï¼Œä¾‹å¦‚åœ¨ Dart VMã€JavaScript ç¼–è¯‘ç¯å¢ƒï¼ˆdart2jsï¼‰æˆ– Flutter ä¸­å¯èƒ½æœ‰ä¸åŒçš„ä¼˜åŒ–é€»è¾‘ã€‚
2. **æ”¯æŒè·¨å¹³å°å…¼å®¹æ€§**
   - é€šè¿‡ `@patch`ï¼ŒDart å¯ä»¥åœ¨ä¸åŒå¹³å°ä¸Šæ›¿æ¢åº•å±‚å®ç°ï¼Œè€Œæ— éœ€ä¿®æ”¹å…¬å…±æ¥å£ã€‚ä¾‹å¦‚ï¼š
     - åœ¨ Dart VM ä¸­ï¼ŒæŸäº›æ–¹æ³•å¯èƒ½ç›´æ¥è°ƒç”¨æœ¬åœ° C++ ä»£ç ã€‚
     - åœ¨ Web å¹³å°ï¼ˆç¼–è¯‘ä¸º JavaScriptï¼‰ä¸­ï¼ŒåŒä¸€æ–¹æ³•å¯èƒ½ç”¨ JavaScript å®ç°ã€‚
3. **æ€§èƒ½ä¼˜åŒ–**
   - å¹³å°ç‰¹å®šçš„å®ç°å¯ä»¥åˆ©ç”¨åº•å±‚ç¯å¢ƒçš„ç‰¹æ€§ï¼ˆå¦‚ç¡¬ä»¶åŠ é€Ÿã€æœ¬åœ° APIï¼‰æ¥ä¼˜åŒ–æ€§èƒ½ã€‚

#### `@patch` çš„å…¸å‹ä½¿ç”¨åœºæ™¯

1. **æ ¸å¿ƒç±»çš„æ–¹æ³•å®ç°**

ä¾‹å¦‚ï¼Œ`List` çš„ `add` æ–¹æ³•åœ¨æ ¸å¿ƒåº“ä¸­å£°æ˜ä¸ºæŠ½è±¡æ–¹æ³•ï¼Œä½†é€šè¿‡ `@patch` åœ¨å¹³å°ç‰¹å®šæ–‡ä»¶ä¸­æä¾›å®ç°ï¼š

```dart
// æ ¸å¿ƒåº“ä¸­çš„æŠ½è±¡å£°æ˜ï¼ˆzzssdart:core/list.dartï¼‰
abstract class List<E> {
  void add(E value); // æŠ½è±¡æ–¹æ³•
}

// å¹³å°ç‰¹å®šçš„å®ç°ï¼ˆå¦‚ dart:core/list_patch.dartï¼‰
@patch
void add(E value) {
  // Dart VM æˆ– Web çš„å…·ä½“å®ç°
}
```

2. **æ•°å­¦è¿ç®—çš„åº•å±‚ä¼˜åŒ–**

ä¾‹å¦‚ï¼Œ`dart:math` ä¸­çš„ `sqrt` æ–¹æ³•å¯èƒ½åœ¨ VM ä¸­ç›´æ¥è°ƒç”¨æœ¬åœ°æ•°å­¦åº“ï¼š

```dart
// dart:math ä¸­çš„å£°æ˜
external double sqrt(num x);

// VM å¹³å°çš„å…·ä½“å®ç°ï¼ˆmath_patch.dartï¼‰
@patch
double sqrt(num x) {
  // è°ƒç”¨æœ¬åœ° C++ å®ç°
}
```

------

`@patch` çš„å·¥ä½œåŸç†

1. **ç¼–è¯‘æ—¶æ›¿æ¢**
   - Dart ç¼–è¯‘å™¨ï¼ˆå¦‚ dart2jsã€Dart VMï¼‰åœ¨æ„å»ºæ—¶ï¼Œä¼šæ ¹æ®ç›®æ ‡å¹³å°è‡ªåŠ¨é€‰æ‹©å¸¦æœ‰ `@patch` æ³¨è§£çš„å®ç°æ–‡ä»¶ï¼ˆå¦‚ `*_patch.dart`ï¼‰ï¼Œæ›¿æ¢æ ¸å¿ƒåº“ä¸­çš„æŠ½è±¡å£°æ˜ã€‚
2. **å¹³å°ç‰¹å®šæ–‡ä»¶**
   - å¹³å°å®ç°é€šå¸¸ä½äºç±»ä¼¼ `lib/_internal/<platform>/` çš„ç›®å½•ä¸­ã€‚ä¾‹å¦‚ï¼š
     - Dart VMï¼š`lib/_internal/vm/lib/`
     - Webï¼š`lib/_internal/js_runtime/lib/`

------

**ç¤ºä¾‹ï¼š`List.add` çš„å®ç°**

1. **æ ¸å¿ƒåº“ä¸­çš„æŠ½è±¡å£°æ˜**

```dart
// dart:core/list.dart
abstract class List<E> {
  void add(E value);
}
```

2. **VM å¹³å°çš„è¡¥ä¸å®ç°**

```dart
// lib/_internal/vm/lib/list_patch.dart
@patch
class List<E> {
  @patch
  void add(E value) {
    // è°ƒç”¨ VM çš„æœ¬åœ°ä»£ç å®ç°
    _nativeListAdd(this, value);
  }
}
```

3. **Web å¹³å°çš„è¡¥ä¸å®ç°**

```dart
// lib/_internal/js_runtime/lib/js_list.dart
@patch
class List<E> {
  @patch
  void add(E value) {
    // è½¬æ¢ä¸º JavaScript æ•°ç»„çš„ push æ–¹æ³•
    JS('void', '#.push(#)', this, value);
  }
}
```

------

#### **æ³¨æ„äº‹é¡¹**

- **å¼€å‘è€…é€šå¸¸ä¸éœ€è¦ç›´æ¥ä½¿ç”¨ `@patch`**
  å®ƒæ˜¯ Dart æ ¸å¿ƒåº“å†…éƒ¨ä½¿ç”¨çš„æœºåˆ¶ï¼Œæ™®é€šåº”ç”¨å¼€å‘ä¸­å‡ ä¹ä¸ä¼šæ¶‰åŠã€‚
- **ä¸ `external` çš„åŒºåˆ«**
  - `external` å£°æ˜ä¸€ä¸ªæ–¹æ³•ç”±å¤–éƒ¨å®ç°ï¼ˆå¦‚åŸç”Ÿä»£ç æˆ– JavaScriptï¼‰ã€‚
  - `@patch` ç”¨äºåœ¨ Dart ä»£ç ä¸­æä¾›å¹³å°ç‰¹å®šçš„å®ç°ã€‚





### æˆå‘˜å±æ€§/æ–¹æ³•

**æˆå‘˜å˜é‡ï¼ˆå®ä¾‹å˜é‡ï¼‰\**å’Œ\**æˆå‘˜æ–¹æ³•ï¼ˆå®ä¾‹æ–¹æ³•ï¼‰**ã€‚å®ƒä»¬å±äºç±»çš„å®ä¾‹ï¼ˆå¯¹è±¡ï¼‰ï¼Œè€Œéç±»æœ¬èº«ã€‚

#### **æˆå‘˜å˜é‡ï¼ˆå®ä¾‹å˜é‡ï¼‰**

- **å®šä¹‰**ï¼šç›´æ¥å£°æ˜åœ¨ç±»ä¸­ï¼Œæ²¡æœ‰ `static` å…³é”®å­—ã€‚
- **å½’å±**ï¼šå±äºç±»çš„å®ä¾‹ï¼ˆå¯¹è±¡ï¼‰ï¼Œæ¯ä¸ªå¯¹è±¡æœ‰ç‹¬ç«‹çš„å‰¯æœ¬ã€‚
- **è®¿é—®æ–¹å¼**ï¼šé€šè¿‡å¯¹è±¡å®ä¾‹è®¿é—®ï¼ˆå¦‚ `object.propertyName`ï¼‰ã€‚
- **ç”¨é€”**ï¼šæè¿°å¯¹è±¡çš„çŠ¶æ€æˆ–ç‰¹å¾ã€‚

#### **æˆå‘˜æ–¹æ³•ï¼ˆå®ä¾‹æ–¹æ³•ï¼‰**

- **å®šä¹‰**ï¼šç›´æ¥å£°æ˜åœ¨ç±»ä¸­ï¼Œæ²¡æœ‰ `static` å…³é”®å­—ã€‚
- **å½’å±**ï¼šå±äºç±»çš„å®ä¾‹ï¼ˆå¯¹è±¡ï¼‰ï¼Œå¯ä»¥è®¿é—®å®ä¾‹å˜é‡å’Œ `this`ã€‚
- **è®¿é—®æ–¹å¼**ï¼šé€šè¿‡å¯¹è±¡å®ä¾‹è°ƒç”¨ï¼ˆå¦‚ `object.methodName()`ï¼‰ã€‚
- **ç”¨é€”**ï¼šå®šä¹‰å¯¹è±¡çš„è¡Œä¸ºæˆ–æ“ä½œã€‚





#### **åŒºåˆ«**

(1) **ç”Ÿå‘½å‘¨æœŸ**

- **é™æ€æˆå‘˜**ï¼šéšç€ç±»çš„åŠ è½½è€Œå­˜åœ¨ï¼Œç›´åˆ°ç¨‹åºç»“æŸã€‚
- **å®ä¾‹æˆå‘˜**ï¼šéšç€å¯¹è±¡çš„åˆ›å»ºè€Œå­˜åœ¨ï¼Œå¯¹è±¡è¢«å›æ”¶åæ¶ˆå¤±ã€‚

(2) **å†…å­˜åˆ†é…**

- **é™æ€æˆå‘˜**ï¼šå†…å­˜ä¸­åªæœ‰ä¸€ä»½ï¼Œæ‰€æœ‰å®ä¾‹å…±äº«ã€‚
- **å®ä¾‹æˆå‘˜**ï¼šæ¯ä¸ªå¯¹è±¡æœ‰ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ã€‚

(3) **è®¿é—®æƒé™**

- **é™æ€æ–¹æ³•**ï¼š
  åªèƒ½è®¿é—®é™æ€æˆå‘˜ï¼Œä¸èƒ½è®¿é—®å®ä¾‹æˆå‘˜ã€‚

  ```dart
  class Example {
    static int staticValue = 10;
    int instanceValue = 20;
  
    static void staticMethod() {
      print(staticValue); // âœ… å…è®¸è®¿é—®é™æ€æˆå‘˜
      // print(instanceValue); // âŒ æŠ¥é”™ï¼šä¸èƒ½è®¿é—®å®ä¾‹æˆå‘˜
    }
  }
  ```

  

- **å®ä¾‹æ–¹æ³•**ï¼š
  å¯ä»¥è®¿é—®é™æ€æˆå‘˜å’Œå®ä¾‹æˆå‘˜ã€‚

  ```dart
  class Example {
    static int staticValue = 10;
    int instanceValue = 20;
  
    void instanceMethod() {
      print(staticValue);    // âœ… å…è®¸è®¿é—®é™æ€æˆå‘˜
      print(instanceValue);  // âœ… å…è®¸è®¿é—®å®ä¾‹æˆå‘˜
    }
  }
  ```

  

### é™æ€å±æ€§/æ–¹æ³•

**ç±»å±æ€§**å’Œ**ç±»æ–¹æ³•**ï¼ˆé€šå¸¸ç§°ä¸º **é™æ€å±æ€§** å’Œ **é™æ€æ–¹æ³•**ï¼‰æ˜¯é€šè¿‡ `static` å…³é”®å­—å®šä¹‰çš„ï¼Œå±äºç±»æœ¬èº«è€Œéç±»çš„å®ä¾‹ã€‚å®ƒä»¬å¯ä»¥ç›´æ¥é€šè¿‡ç±»åè®¿é—®ï¼Œæ— éœ€åˆ›å»ºå¯¹è±¡ã€‚

#### **ç±»å±æ€§ï¼ˆé™æ€å±æ€§ï¼‰**

- **å®šä¹‰**ï¼šä½¿ç”¨ `static` å…³é”®å­—å£°æ˜ï¼Œå±äºç±»æœ¬èº«ï¼Œæ‰€æœ‰å®ä¾‹å…±äº«åŒä¸€ä»½é™æ€å±æ€§ã€‚
- **è®¿é—®æ–¹å¼**ï¼šé€šè¿‡ç±»åç›´æ¥è®¿é—®ï¼ˆå¦‚ `ClassName.propertyName`ï¼‰ã€‚
- **ç”¨é€”**ï¼š
  - å­˜å‚¨ç±»çº§åˆ«çš„å…±äº«æ•°æ®ï¼ˆå¦‚è®¡æ•°å™¨ã€å…¨å±€é…ç½®ï¼‰ã€‚
  - å®šä¹‰ç¼–è¯‘æ—¶å¸¸é‡ï¼ˆç»“åˆ `const` ä½¿ç”¨ï¼‰ã€‚

```dart
class Counter {
  static int count = 0; // é™æ€å±æ€§
  String name;
  static const double pi = 3.14159; // ç¼–è¯‘æ—¶å¸¸é‡   é™æ€å¸¸é‡
  static const double e = 2.71828;

  Counter(this.name) {
    count++; // æ¯æ¬¡åˆ›å»ºå®ä¾‹æ—¶ï¼Œé™æ€å±æ€§è‡ªå¢
  }
}

void main() {
  var c1 = Counter('A');
  var c2 = Counter('B');
  print(Counter.count); // è¾“å‡º: 2ï¼ˆä¸¤ä¸ªå®ä¾‹å…±äº«åŒä¸€ä¸ªé™æ€å±æ€§ï¼‰
}
```



#### ç±»æ–¹æ³•ï¼ˆé™æ€æ–¹æ³•ï¼‰

- **å®šä¹‰**ï¼šä½¿ç”¨ `static` å…³é”®å­—å£°æ˜ï¼Œå±äºç±»æœ¬èº«ï¼Œä¸èƒ½è®¿é—®å®ä¾‹æˆå‘˜ï¼ˆå¦‚å®ä¾‹å±æ€§æˆ–æ–¹æ³•ï¼‰ã€‚
- **è®¿é—®æ–¹å¼**ï¼šé€šè¿‡ç±»åç›´æ¥è°ƒç”¨ï¼ˆå¦‚ `ClassName.methodName()`ï¼‰ã€‚
- **ç”¨é€”**ï¼š
  - æä¾›å·¥å…·æ–¹æ³•ï¼ˆå¦‚æ•°å­¦è®¡ç®—ã€æ ¼å¼è½¬æ¢ï¼‰ã€‚
  - å®ç°å·¥å‚æ–¹æ³•ï¼ˆå¦‚åˆ›å»ºç‰¹å®šç±»å‹çš„å®ä¾‹ï¼‰ã€‚



```dart
class StringUtils {
  static bool isBlank(String? str) {
    return str == null || str.trim().isEmpty;
  }
}

void main() {
  print(StringUtils.isBlank('  ')); // è¾“å‡º: true
}





class Logger {
  final String name;

  Logger._internal(this.name); // ç§æœ‰æ„é€ å‡½æ•°

  static Logger create(String name) {
    return Logger._internal(name);
  }
}

void main() {
  var logger = Logger.create('MyApp');
  print(logger.name); // è¾“å‡º: MyApp
}
```

- é™æ€æ–¹æ³•ä¸­æ— æ³•ä½¿ç”¨ `this`ï¼Œä¹Ÿä¸èƒ½ç›´æ¥è®¿é—®å®ä¾‹å±æ€§æˆ–æ–¹æ³•ã€‚
- é™æ€å±æ€§æ˜¯å…¨å±€å…±äº«çš„ï¼Œéœ€æ³¨æ„å¤šçº¿ç¨‹ï¼ˆIsolateï¼‰ç¯å¢ƒä¸‹çš„æ•°æ®ç«äº‰ã€‚
- é™æ€å±æ€§ä¼šä¸€ç›´å­˜åœ¨äºå†…å­˜ä¸­ï¼Œå¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ï¼ˆå¦‚æŒæœ‰å¤§é‡æ•°æ®æˆ–å¯¹è±¡å¼•ç”¨ï¼‰ã€‚
- è¿‡åº¦ä½¿ç”¨é™æ€æˆå‘˜ä¼šå¯¼è‡´ä»£ç è€¦åˆåº¦é«˜ï¼Œéš¾ä»¥æµ‹è¯•å’Œç»´æŠ¤ã€‚











### åˆå§‹åŒ–åˆ—è¡¨

**åˆå§‹åŒ–åˆ—è¡¨ï¼ˆInitializer Listï¼‰** æ˜¯æ„é€ å‡½æ•°çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºåœ¨æ„é€ å‡½æ•°ä½“æ‰§è¡Œä¹‹å‰åˆå§‹åŒ–å®ä¾‹å˜é‡ã€‚å®ƒé€šå¸¸ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š

1. åˆå§‹åŒ– `final` å˜é‡ã€‚

   åœ¨ Dart ä¸­ï¼Œ`final` å˜é‡å¿…é¡»åœ¨æ„é€ å‡½æ•°ä½“æ‰§è¡Œä¹‹å‰è¢«åˆå§‹åŒ–ã€‚åˆå§‹åŒ–åˆ—è¡¨æ˜¯å®ç°è¿™ä¸€ç‚¹çš„å¸¸ç”¨æ–¹å¼ã€‚

   ```dart
   class Point {
     final double x;
     final double y;
   
     // ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨åˆå§‹åŒ– final å˜é‡
     Point(double x, double y)
       : this.x = x,
     this.y = y {
       print('Point created with ($x, $y)');
     }
   }
   
   void main() {
     var point = Point(3.0, 4.0);
     print('x: ${point.x}, y: ${point.y}');
   }
   ```

   

2. è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚

   å¦‚æœç±»ç»§æ‰¿è‡ªå¦ä¸€ä¸ªç±»ï¼Œå­ç±»çš„æ„é€ å‡½æ•°éœ€è¦é€šè¿‡åˆå§‹åŒ–åˆ—è¡¨è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚

   ```dart
   class Animal {
     String name;
   
     Animal(this.name);
   }
   
   class Dog extends Animal {
     String breed;
   
     // ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°
     Dog(String name, this.breed) : super(name);
   }
   
   void main() {
     var dog = Dog('Buddy', 'Golden Retriever');
     print('Name: ${dog.name}, Breed: ${dog.breed}');
   }
   ```

   

3. æ‰§è¡Œä¸€äº›ç®€å•çš„åˆå§‹åŒ–é€»è¾‘ã€‚

   åˆå§‹åŒ–åˆ—è¡¨è¿˜å¯ä»¥ç”¨äºæ‰§è¡Œä¸€äº›ç®€å•çš„åˆå§‹åŒ–é€»è¾‘ï¼Œä¾‹å¦‚æ¡ä»¶èµ‹å€¼æˆ–è®¡ç®—ã€‚

   ```dart
   class Rectangle {
     final double width;
     final double height;
     final double area;
   
     // ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨è®¡ç®— area
     Rectangle(this.width, this.height)
         : area = width * height {
       print('Rectangle created with area: $area');
     }
   }
   
   void main() {
     var rect = Rectangle(5.0, 10.0);
     print('Width: ${rect.width}, Height: ${rect.height}, Area: ${rect.area}');
   }
   ```

   

åˆå§‹åŒ–åˆ—è¡¨çš„è¯­æ³•æ˜¯åœ¨æ„é€ å‡½æ•°å‚æ•°åˆ—è¡¨å’Œæ„é€ å‡½æ•°ä½“ä¹‹é—´ä½¿ç”¨å†’å·ï¼ˆ`:`ï¼‰åˆ†éš”ï¼Œåé¢è·Ÿéšä¸€ä¸ªæˆ–å¤šä¸ªåˆå§‹åŒ–è¯­å¥ï¼Œç”¨é€—å·ï¼ˆ`,`ï¼‰åˆ†éš”ã€‚



**åˆå§‹åŒ–åˆ—è¡¨ä¸æ„é€ å‡½æ•°ä½“çš„åŒºåˆ«**

- **åˆå§‹åŒ–åˆ—è¡¨**ï¼šåœ¨æ„é€ å‡½æ•°ä½“æ‰§è¡Œä¹‹å‰è¿è¡Œï¼Œç”¨äºåˆå§‹åŒ– `final` å˜é‡ã€è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°æˆ–æ‰§è¡Œç®€å•çš„é€»è¾‘ã€‚
- **æ„é€ å‡½æ•°ä½“**ï¼šåœ¨åˆå§‹åŒ–åˆ—è¡¨ä¹‹åè¿è¡Œï¼Œå¯ä»¥åŒ…å«æ›´å¤æ‚çš„é€»è¾‘ã€‚

```dart
class Example {
  final int a;
  final int b;
  int c;

  Example(int x, int y)
    : a = x,
  b = y,
  c = x + y {
    print('Initialization list executed');
    c *= 2; // æ„é€ å‡½æ•°ä½“ä¸­å¯ä»¥ä¿®æ”¹é final å˜é‡
  }
}

void main() {
  var example = Example(2, 3);
  print('a: ${example.a}, b: ${example.b}, c: ${example.c}');
}
```

- åˆå§‹åŒ–åˆ—è¡¨ä¸­çš„è¯­å¥æŒ‰é¡ºåºæ‰§è¡Œã€‚
- åˆå§‹åŒ–åˆ—è¡¨ä¸èƒ½åŒ…å«å¤æ‚çš„é€»è¾‘ï¼ˆå¦‚ `if` è¯­å¥æˆ–å¾ªç¯ï¼‰ï¼Œåªèƒ½åŒ…å«èµ‹å€¼è¡¨è¾¾å¼æˆ–å‡½æ•°è°ƒç”¨ã€‚
- å¦‚æœç±»æœ‰çˆ¶ç±»ï¼Œå¿…é¡»åœ¨åˆå§‹åŒ–åˆ—è¡¨ä¸­è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼ˆä½¿ç”¨ `super`ï¼‰ã€‚



### åº“

#### åº“çš„å®šä¹‰

**åº“ï¼ˆLibraryï¼‰** æ˜¯ä»£ç ç»„ç»‡çš„æ ¸å¿ƒå•å…ƒï¼Œå®ƒé€šè¿‡å°è£…å’Œæ¨¡å—åŒ–å¸®åŠ©å¼€å‘è€…ç®¡ç†ä»£ç ï¼Œé¿å…å‘½åå†²çªï¼Œå¹¶æ”¯æŒä»£ç å¤ç”¨ã€‚æ¯ä¸ª Dart æ–‡ä»¶é»˜è®¤éƒ½æ˜¯ä¸€ä¸ªåº“ï¼Œä½†å¯ä»¥é€šè¿‡æ˜¾å¼å£°æ˜ `library` å…³é”®å­—å¢å¼ºæ§åˆ¶ï¼ˆç°ä»£ Dart ä¸­é€šå¸¸çœç•¥ï¼‰ã€‚



#### ä½œç”¨

1. **æ¨¡å—åŒ–**ï¼šå°†ç›¸å…³åŠŸèƒ½ç»„ç»‡åœ¨ä¸€èµ·ã€‚

2. **å°è£…**ï¼šé€šè¿‡ `_` å‰ç¼€éšè—ç§æœ‰æˆå‘˜ï¼ˆä»…åœ¨å½“å‰åº“å†…å¯è®¿é—®ï¼‰ã€‚

3. **å¤ç”¨**ï¼šé€šè¿‡å¯¼å…¥æœºåˆ¶å…±äº«ä»£ç ã€‚

4. **ä¾èµ–ç®¡ç†**ï¼šé€šè¿‡å¯¼å…¥å…¶ä»–åº“æ‰©å±•åŠŸèƒ½ã€‚

   

#### åº“çš„åˆ†ç±»ï¼ˆå†…ç½®ã€ç¬¬ä¸‰æ–¹ã€è‡ªå®šä¹‰ï¼‰

1. **å†…ç½®åº“**ï¼šDart SDK æä¾›çš„æ ¸å¿ƒåº“ï¼Œå¦‚ `dart:core`ï¼ˆè‡ªåŠ¨å¯¼å…¥ï¼‰ã€`dart:math`ã€`dart:io`ã€‚
2. **ç¬¬ä¸‰æ–¹åº“**ï¼šé€šè¿‡ [pub.dev](https://pub.dev/) è·å–ï¼Œä¾‹å¦‚ `http`ã€`provider`ã€‚
3. **è‡ªå®šä¹‰åº“**ï¼šå¼€å‘è€…è‡ªå·±ç¼–å†™çš„åº“æ–‡ä»¶ã€‚



#### ä½¿ç”¨åº“ä¸­çš„æ–¹æ³•

dartzä¸­çš„æ ¸å¿ƒåº“ä¸­çš„æ–¹æ³•å’Œç±»ç­‰ä¸éœ€è¦æ˜¾ç¤ºå¯¼å…¥ã€‚

1. **å¯¼å…¥åº“**

ä½¿ç”¨ `import` å…³é”®å­—å¼•å…¥åº“ä¸­çš„å†…å®¹ã€‚

ç¤ºä¾‹ï¼š

**å¯¼å…¥å†…ç½®åº“**

```dart
import 'dart:math'; // å¯¼å…¥æ•°å­¦åº“

void main() {
  print(max(10, 20)); // ä½¿ç”¨åº“ä¸­çš„ max æ–¹æ³•
}
```

**å¯¼å…¥ç¬¬ä¸‰æ–¹åº“**

1. åœ¨ `pubspec.yaml` ä¸­æ·»åŠ ä¾èµ–ï¼š

   ```yaml
   dependencies:
     http: ^1.1.0
   ```

2. è¿è¡Œ `dart pub get` å®‰è£…ä¾èµ–ã€‚

3. ä»£ç ä¸­å¯¼å…¥ï¼š

   ```dart
   import 'package:http/http.dart' as http; // ä½¿ç”¨åˆ«åé¿å…å‘½åå†²çª
   
   void main() async {
     var response = await http.get(Uri.parse('https://example.com'));
     print(response.statusCode);
   }
   ```

**å¯¼å…¥è‡ªå®šä¹‰åº“**

å‡è®¾é¡¹ç›®å†…æœ‰æ–‡ä»¶ `utils/logger.dart`ï¼š

```dart
// utils/logger.dart
void log(String message) {
  print('[LOG] $message');
}
```

åœ¨å¦ä¸€ä¸ªæ–‡ä»¶ä¸­å¯¼å…¥å¹¶ä½¿ç”¨ï¼š

```dart
import 'package:my_project/utils/logger.dart'; // è·¯å¾„æ ¹æ®å®é™…é¡¹ç›®è°ƒæ•´

void main() {
  log('ç¨‹åºå¯åŠ¨'); // è°ƒç”¨è‡ªå®šä¹‰åº“ä¸­çš„æ–¹æ³•
}
```



2. **æ§åˆ¶å¯¼å…¥å†…å®¹**

- **`as` å…³é”®å­—**ï¼šä¸ºåº“æŒ‡å®šåˆ«åï¼Œé¿å…å‘½åå†²çªã€‚

  ```dart
  import 'package:lib1/lib1.dart' as lib1;
  import 'package:lib2/lib2.dart' as lib2;
  
  void main() {
    lib1.SomeClass(); // ä½¿ç”¨ lib1 çš„ç±»
    lib2.SomeClass(); // ä½¿ç”¨ lib2 çš„ç±»
  }
  ```

- **`show` å…³é”®å­—**ï¼šä»…å¯¼å…¥æŒ‡å®šçš„æˆå‘˜ã€‚

  ```dart
  import 'dart:math' show max, min; // åªå¯¼å…¥ max å’Œ min
  ```

- **`hide` å…³é”®å­—**ï¼šéšè—æŒ‡å®šçš„æˆå‘˜ã€‚

  ```dart
  import 'dart:math' hide sqrt; // å¯¼å…¥é™¤ sqrt å¤–çš„æ‰€æœ‰æˆå‘˜
  ```

------



3. **å»¶è¿ŸåŠ è½½ï¼ˆæ‡’åŠ è½½ï¼‰**

ä½¿ç”¨ `deferred as` å»¶è¿ŸåŠ è½½åº“ï¼Œå‡å°‘åº”ç”¨å¯åŠ¨æ—¶é—´ï¼ˆé€‚ç”¨äºå¤§å‹åº“æˆ–éç«‹å³éœ€è¦çš„åŠŸèƒ½ï¼‰ã€‚

```dart
import 'package:heavy_library/heavy_library.dart' deferred as heavy;

void main() async {
  await heavy.load(); // æ˜¾å¼åŠ è½½åº“
  heavy.runHeavyTask(); // ä½¿ç”¨åº“ä¸­çš„æ–¹æ³•
}
```

------

4. **å¯¼å‡ºåº“ï¼ˆ`export`ï¼‰**

å°†å¤šä¸ªåº“åˆå¹¶ä¸ºä¸€ä¸ªå…¥å£æ–‡ä»¶ï¼Œç®€åŒ–å¯¼å…¥è·¯å¾„ã€‚

```dart
// my_package.dart
export 'src/utils.dart';
export 'src/network.dart';
```

å…¶ä»–æ–‡ä»¶åªéœ€å¯¼å…¥ `my_package.dart` å³å¯è®¿é—®æ‰€æœ‰å¯¼å‡ºå†…å®¹ã€‚



#### **åˆ›å»ºè‡ªå®šä¹‰åº“**

1. **å®šä¹‰ç§æœ‰å’Œå…¬æœ‰æˆå‘˜**ï¼š

   ```dart
   // utils/logger.dart
   library logger; // å¯çœç•¥
   
   // å…¬æœ‰æ–¹æ³•ï¼ˆå¯è¢«å…¶ä»–åº“è®¿é—®ï¼‰
   void log(String message) {
     _printWithTime(message); // è°ƒç”¨ç§æœ‰æ–¹æ³•
   }
   
   // ç§æœ‰æ–¹æ³•ï¼ˆä»…é™å½“å‰åº“ä½¿ç”¨ï¼‰
   void _printWithTime(String message) {
     print('${DateTime.now()}: $message');
   }
   ```

2. **ä½¿ç”¨ `part` å’Œ `part of`ï¼ˆä¸æ¨èï¼Œå»ºè®®ç”¨å•ç‹¬åº“æ–‡ä»¶æ›¿ä»£ï¼‰**ï¼š

   ```dart
   // my_library.dart
   part 'part1.dart';
   part 'part2.dart';
   
   // part1.dart
   part of 'my_library.dart'; // å£°æ˜å±äºå“ªä¸ªåº“
   ```

------

#### **æ³¨æ„äº‹é¡¹**

1. **è·¯å¾„è§„èŒƒ**ï¼š
   - é¡¹ç›®å†…æ–‡ä»¶ä½¿ç”¨ `package:é¡¹ç›®å/è·¯å¾„` æ ¼å¼å¯¼å…¥ã€‚
   - ç¬¬ä¸‰æ–¹åº“é€šè¿‡ `package:åº“å/è·¯å¾„` å¯¼å…¥ã€‚
2. **é¿å…å¾ªç¯å¯¼å…¥**ï¼šA å¯¼å…¥ Bï¼ŒB åˆå¯¼å…¥ A ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚
3. **å»¶è¿ŸåŠ è½½é™åˆ¶**ï¼š
   - å»¶è¿ŸåŠ è½½çš„åº“ä¸èƒ½åŒ…å«å¸¸é‡ï¼ˆ`const`ï¼‰ã€‚
   - éœ€åœ¨å¼‚æ­¥ä»£ç ä¸­é€šè¿‡ `loadLibrary()` æ˜¾å¼åŠ è½½ã€‚



### åº“è·¯å¾„

ä½¿ç”¨ `package:é¡¹ç›®å/è·¯å¾„` æ ¼å¼å¯¼å…¥è‡ªå·±çš„åº“æ—¶ï¼Œè·¯å¾„çš„æ­£ç¡®æ€§å–å†³äº **é¡¹ç›®çš„ `pubspec.yaml` é…ç½®** å’Œ **æ–‡ä»¶çš„å®é™…ä½ç½®**ã€‚

**æ­¥éª¤ 1ï¼šç¡®è®¤ `pubspec.yaml` ä¸­çš„ `name`**

- é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹çš„ `pubspec.yaml` æ–‡ä»¶ä¸­å®šä¹‰äº† `name` å­—æ®µï¼Œè¯¥å­—æ®µå†³å®šäº† `package:é¡¹ç›®å` ä¸­çš„ **é¡¹ç›®å**ã€‚

- ä¾‹å¦‚ï¼Œè‹¥ `pubspec.yaml` å†…å®¹å¦‚ä¸‹ï¼š

  ```yaml
  name: my_app  # <--- é¡¹ç›®å
  environment:
    sdk: '>=3.0.0 <4.0.0'
  ```

  åˆ™æ‰€æœ‰é¡¹ç›®å†…æ–‡ä»¶çš„å¯¼å…¥è·¯å¾„å‡ä»¥ `package:my_app/...` å¼€å¤´ã€‚



**æ­¥éª¤ 2ï¼šç¡®å®šæ–‡ä»¶ä½ç½®**

- Dart é¡¹ç›®çš„é»˜è®¤çº¦å®šæ˜¯å°† **åº“ä»£ç ** æ”¾åœ¨ `lib` ç›®å½•ä¸‹ã€‚

- **å¯¼å…¥è§„åˆ™**ï¼š

  - `lib` ç›®å½•ä¸‹çš„æ–‡ä»¶å¯ä»¥ç›´æ¥é€šè¿‡ `package:é¡¹ç›®å/è·¯å¾„` è®¿é—®ã€‚
  - å…¶ä»–ç›®å½•ï¼ˆå¦‚ `bin`, `test` ç­‰ï¼‰éœ€è¦ä½¿ç”¨ç›¸å¯¹è·¯å¾„æˆ– `package` è·¯å¾„ï¼ˆéœ€é…ç½®ï¼‰ã€‚

  

#### **å…·ä½“åœºæ™¯ç¤ºä¾‹**

**åœºæ™¯ 1ï¼šå¯¼å…¥ `lib` ç›®å½•ä¸‹çš„æ–‡ä»¶**

- **æ–‡ä»¶ç»“æ„**ï¼š

  å¤åˆ¶

  ```
  my_project/
  â”œâ”€â”€ lib/
  â”‚   â”œâ”€â”€ utils/
  â”‚   â”‚   â””â”€â”€ logger.dart
  â”‚   â””â”€â”€ main.dart
  â”œâ”€â”€ pubspec.yaml
  ```

- **å¯¼å…¥æ–¹å¼**ï¼š

  - åœ¨ `main.dart` ä¸­å¯¼å…¥ `logger.dart`ï¼š

    ```
    // âœ… æ­£ç¡®è·¯å¾„ï¼šä» lib ç›®å½•å¼€å§‹å†™èµ·
    import 'package:my_app/utils/logger.dart';
    ```

  - è‹¥ `pubspec.yaml` çš„ `name` æ˜¯ `my_app`ï¼Œè·¯å¾„ä¸º `package:my_app/utils/logger.dart`ã€‚

------

**åœºæ™¯ 2ï¼šå¯¼å…¥ `lib/src` ä¸‹çš„å†…éƒ¨å®ç°**

- **æ–‡ä»¶ç»“æ„**ï¼š

  ```
  my_project/
  â”œâ”€â”€ lib/
  â”‚   â”œâ”€â”€ src/
  â”‚   â”‚   â””â”€â”€ network.dart
  â”‚   â””â”€â”€ api.dart
  â”œâ”€â”€ pubspec.yaml
  ```

- **å¯¼å…¥æ–¹å¼**ï¼š

  - åœ¨ `api.dart` ä¸­å¯¼å‡º `src/network.dart`ï¼š

    ```dart
    // lib/api.dart
    export 'src/network.dart'; // å¯¹å¤–æš´éœ²å†…éƒ¨å®ç°
    ```

  - å…¶ä»–æ–‡ä»¶é€šè¿‡ `api.dart` å¯¼å…¥ï¼š

    ```dart
    import 'package:my_app/api.dart'; // æ— éœ€ç›´æ¥å¼•ç”¨ src
    ```

------

**åœºæ™¯ 3ï¼šå¯¼å…¥é `lib` ç›®å½•çš„æ–‡ä»¶**

- **æ–‡ä»¶ç»“æ„**ï¼š

  ```
  my_project/
  â”œâ”€â”€ lib/
  â”‚   â””â”€â”€ main.dart
  â”œâ”€â”€ tools/
  â”‚   â””â”€â”€ helper.dart
  â”œâ”€â”€ pubspec.yaml
  ```

- **é—®é¢˜**ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œ`package:é¡¹ç›®å/...` åªèƒ½è®¿é—® `lib` ç›®å½•ã€‚è‹¥æƒ³å¯¼å…¥ `tools/helper.dart`ï¼Œéœ€ä¿®æ”¹ `pubspec.yaml`ï¼š

  ```yaml
  name: my_app
  environment:
    sdk: '>=3.0.0 <4.0.0'
  
  # æ·»åŠ ä»¥ä¸‹é…ç½®ï¼Œå°† tools ç›®å½•è®¾ä¸ºå¯å¯¼å…¥
  publish_to: none # éå‘å¸ƒåŒ…æ—¶æ·»åŠ 
  include:
    - tools/  # åŒ…å« tools ç›®å½•
  ```

- **å¯¼å…¥æ–¹å¼**ï¼š

  ```dart
  import 'package:my_app/../tools/helper.dart'; // ä¸æ¨èï¼Œå¯èƒ½å¯¼è‡´è·¯å¾„æ··ä¹±
  ```

  **æ›´æ¨èå°†å…¬å…±ä»£ç æ”¾åœ¨ `lib` ç›®å½•ä¸‹**ï¼Œé¿å…è·¯å¾„é—®é¢˜ã€‚



#### **å¸¸è§é”™è¯¯ä¸è§£å†³**

1. **é”™è¯¯ï¼š`Target of URI does not exist`**
   - **åŸå› **ï¼šè·¯å¾„æ‹¼å†™é”™è¯¯æˆ–æ–‡ä»¶ä¸å­˜åœ¨ã€‚
   - **æ£€æŸ¥**ï¼š
     - `pubspec.yaml` çš„ `name` æ˜¯å¦æ­£ç¡®ã€‚
     - æ–‡ä»¶æ˜¯å¦åœ¨ `lib` ç›®å½•ä¸‹ã€‚
     - è·¯å¾„æ˜¯å¦å¤§å°å†™æ•æ„Ÿï¼ˆDart åœ¨éƒ¨åˆ†ç³»ç»Ÿä¸ŠåŒºåˆ†å¤§å°å†™ï¼‰ã€‚
2. **é”™è¯¯ï¼š`Undefined name 'xxx'`**
   - **åŸå› **ï¼šæœªæ­£ç¡®å¯¼å…¥åº“æˆ–å¿˜è®°å¯¼å‡ºæˆå‘˜ã€‚
   - **è§£å†³**ï¼šåœ¨åº“æ–‡ä»¶ä¸­ç”¨ `export` å¯¼å‡ºéœ€è¦çš„æˆå‘˜ã€‚
3. **é”™è¯¯ï¼šå¾ªç¯å¯¼å…¥ï¼ˆ`Cycle in import`ï¼‰**
   - **åŸå› **ï¼šA æ–‡ä»¶å¯¼å…¥ Bï¼ŒB åˆå¯¼å…¥äº† Aã€‚
   - **è§£å†³**ï¼šé‡æ„ä»£ç ï¼Œæå–å…¬å…±é€»è¾‘åˆ°ç¬¬ä¸‰ä¸ªæ–‡ä»¶ã€‚





### å¼‚æ­¥

åœ¨ Dart ä¸­å¤„ç†å¼‚æ­¥ä»»åŠ¡çš„æ ¸å¿ƒæ˜¯ **`Future`** å’Œ **`async/await`** æœºåˆ¶ï¼Œç»“åˆ **äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰** å®ç°é«˜æ•ˆçš„å¼‚æ­¥ç¼–ç¨‹ã€‚

#### **å¼‚æ­¥ä»»åŠ¡çš„åŸºç¡€ï¼š`Future`**

`Future` è¡¨ç¤ºä¸€ä¸ªå¯èƒ½åœ¨æœªæ¥å®Œæˆçš„å¼‚æ­¥æ“ä½œï¼Œå¸¸ç”¨äºç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶è¯»å†™ç­‰è€—æ—¶æ“ä½œã€‚

```dart
// å®šä¹‰ä¸€ä¸ªè¿”å› Future çš„å¼‚æ­¥ä»»åŠ¡
Future<String> fetchData() {
  return Future.delayed(Duration(seconds: 2), () => "æ•°æ®åŠ è½½å®Œæˆ");
}

void main() {
  print("å¼€å§‹è¯·æ±‚");
  fetchData().then((value) {
    print(value); // 2ç§’åè¾“å‡ºï¼šæ•°æ®åŠ è½½å®Œæˆ
  });
  print("è¯·æ±‚å·²å‘é€");
}
```



#### **`async` å’Œ `await`**

ä½¿ç”¨ `async` æ ‡è®°å¼‚æ­¥å‡½æ•°ï¼Œ`await` ç­‰å¾… `Future` å®Œæˆï¼Œè®©ä»£ç æ›´ç®€æ´ï¼ˆç±»ä¼¼åŒæ­¥å†™æ³•ï¼‰ã€‚

```dart
Future<void> fetchAndPrint() async {
  print("å¼€å§‹è¯·æ±‚");
  String data = await fetchData(); // ç­‰å¾… Future å®Œæˆ
  print(data); 
  print("è¯·æ±‚ç»“æŸ");
}

void main() async {
  await fetchAndPrint();
}
```



#### é”™è¯¯å¤„ç†

å¼‚æ­¥ä»»åŠ¡å¯èƒ½å¤±è´¥ï¼Œéœ€ç”¨ `try/catch` æ•è·å¼‚å¸¸ã€‚

```dart
Future<void> fetchDataWithError() async {
  try {
    var data = await Future.error("æ¨¡æ‹Ÿé”™è¯¯");
    print(data);
  } catch (e) {
    print("æ•è·é”™è¯¯ï¼š$e"); // è¾“å‡ºï¼šæ•è·é”™è¯¯ï¼šæ¨¡æ‹Ÿé”™è¯¯
  }
}
```



#### å¹¶è¡Œæ‰§è¡Œå¤šä¸ªä»»åŠ¡

ä½¿ç”¨ `Future.wait` å¹¶è¡Œæ‰§è¡Œå¤šä¸ª `Future`ï¼Œç­‰å¾…æ‰€æœ‰å®Œæˆã€‚

```dart
Future<void> fetchMultipleData() async {
  var futures = [
    Future.delayed(Duration(seconds: 2), () => "æ•°æ®1"),
    Future.delayed(Duration(seconds: 1), () => "æ•°æ®2"),
  ];
  
  var results = await Future.wait(futures);
  print(results); // è¾“å‡ºï¼š[æ•°æ®1, æ•°æ®2]
}
```



#### å¤„ç†è¿ç»­æ•°æ®æµï¼š`Stream`

`Stream` ç”¨äºå¤„ç†è¿ç»­çš„æ•°æ®åºåˆ—ï¼ˆå¦‚æ–‡ä»¶è¯»å–ã€WebSocket é€šä¿¡ï¼‰ã€‚

```dart
import 'dart:async';

void main() {
  // åˆ›å»ºä¸€ä¸ª Stream
  var stream = Stream.periodic(Duration(seconds: 1), (count) => count).take(5);
  
  // ç›‘å¬æ•°æ®
  stream.listen(
    (data) => print("æ”¶åˆ°æ•°æ®ï¼š$data"), // è¾“å‡ºï¼šæ”¶åˆ°æ•°æ®ï¼š0, 1, 2, 3, 4
    onError: (err) => print("é”™è¯¯ï¼š$err"),
    onDone: () => print("Stream ç»“æŸ"),
  );
}
```



#### äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰

Dart æ˜¯å•çº¿ç¨‹æ¨¡å‹ï¼Œé€šè¿‡ **äº‹ä»¶å¾ªç¯** å¤„ç†å¼‚æ­¥ä»»åŠ¡ï¼š

1. **å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼ˆMicrotask Queueï¼‰**ï¼šä¼˜å…ˆçº§é«˜ï¼Œå¤„ç† `scheduleMicrotask` æˆ– `.then()` ä¸­çš„å›è°ƒã€‚
2. **äº‹ä»¶é˜Ÿåˆ—ï¼ˆEvent Queueï¼‰**ï¼šå¤„ç† I/Oã€è®¡æ—¶å™¨ã€ç”¨æˆ·è¾“å…¥ç­‰å¼‚æ­¥äº‹ä»¶ã€‚

```dart
void main() {
  print("Start");

  // å¾®ä»»åŠ¡
  scheduleMicrotask(() => print("Microtask 1"));

  // äº‹ä»¶é˜Ÿåˆ—
  Future(() => print("Event 1"));
  Future.microtask(() => print("Microtask 2")); // å¾®ä»»åŠ¡

  print("End");
}

Start
End
Microtask 1
Microtask 2
Event 1
```



#### é«˜çº§ç”¨æ³•ï¼š`Isolate`

Dart å•çº¿ç¨‹æ— æ³•åˆ©ç”¨å¤šæ ¸ CPUï¼Œé€šè¿‡ `Isolate` å®ç°å¹¶å‘ï¼ˆç±»ä¼¼å¤šçº¿ç¨‹ï¼Œä½†å†…å­˜éš”ç¦»ï¼‰ã€‚

```dart
import 'dart:isolate';

void isolateFunction(SendPort sendPort) {
  sendPort.send("æ¥è‡ª Isolate çš„æ¶ˆæ¯");
}

void main() async {
  var receivePort = ReceivePort();
  
  await Isolate.spawn(isolateFunction, receivePort.sendPort);
  
  receivePort.listen((message) {
    print(message); // è¾“å‡ºï¼šæ¥è‡ª Isolate çš„æ¶ˆæ¯
    receivePort.close();
  });
}
```



#### æœ€ä½³å®è·µ

- **ä¼˜å…ˆä½¿ç”¨ `async/await`**ï¼šé¿å…å›è°ƒåœ°ç‹±ï¼ˆCallback Hellï¼‰ï¼Œä»£ç æ›´æ˜“è¯»ã€‚
- **æ˜ç¡®é”™è¯¯å¤„ç†**ï¼šæ‰€æœ‰ `await` è°ƒç”¨åŒ…è£¹åœ¨ `try/catch` ä¸­ã€‚
- **é¿å…é˜»å¡äº‹ä»¶å¾ªç¯**ï¼šè€—æ—¶è®¡ç®—ç”¨ `Isolate`ï¼Œé˜²æ­¢ UI å¡é¡¿ï¼ˆFlutter ä¸­å°¤å…¶é‡è¦ï¼‰ã€‚
- **åˆç†é€‰æ‹© `Future` å’Œ `Stream`**ï¼šå•æ¬¡å¼‚æ­¥æ“ä½œç”¨ `Future`ï¼Œè¿ç»­æ•°æ®æµç”¨ `Stream`ã€‚



## Material å’Œ Widget 

åœ¨Flutterä¸­æ˜¯æ ·å¼å’ŒUIå…ƒç´ ä¸åˆ†ç¦»çš„ã€‚Widgetå°±æ˜¯å…ƒç´ ï¼Œä¸åŒå…ƒç´ å¯¹åº”ä¸åŒçš„Widgetï¼Œè€Œå±äºè¯¥å…ƒç´ çš„æ ·å¼ä¼šä½œä¸ºè¿™ä¸ªWidget çš„æ„é€ å‡½æ•°ä¸­æ¥å—çš„å‚æ•°ä¼ å…¥ï¼Œå…¶ä¸­ä¸€ä¸ªä¸ªçš„å±æ€§åˆæ˜¯ä¸€ç³»åˆ—çš„ç±»çš„å®ä¾‹å¯¹è±¡åŠå…¶å®ä¾‹å¯¹è±¡ä¸Šçš„å±æ€§ã€‚



**Flutterä¸­ä¸‡ç‰©çš†Widgetï¼ˆä¸‡ç‰©çš†å¯ç›˜ï¼‰**ï¼›æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­`æ‰€çœ‹åˆ°çš„å†…å®¹`å‡ ä¹éƒ½æ˜¯Widgetï¼Œç”šè‡³æ˜¯`å†…è¾¹è·çš„è®¾ç½®`ï¼Œä¹Ÿéœ€è¦ä½¿ç”¨ä¸€ä¸ªå«`Paddingçš„Widget`æ¥åšï¼›

materialæ˜¯Googleå…¬å¸æ¨è¡Œçš„ä¸€å¥—`è®¾è®¡é£æ ¼`ï¼Œæˆ–è€…å«`è®¾è®¡è¯­è¨€`ã€`è®¾è®¡è§„èŒƒ`ç­‰ï¼›

é‡Œé¢æœ‰éå¸¸å¤šçš„è®¾è®¡è§„èŒƒï¼Œæ¯”å¦‚`é¢œè‰²`ã€`æ–‡å­—çš„æ’ç‰ˆ`ã€`å“åº”åŠ¨ç”»ä¸è¿‡åº¦`ã€`å¡«å……`ç­‰ç­‰ï¼›

åœ¨Flutterä¸­å†…ç½®äº†è®¸å¤šç¬¦åˆ`Materialé£æ ¼çš„Widget`ï¼›

åœ¨åº”ç”¨ä¸­ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨è¿™äº›Widgetæ¥åˆ›å»ºåº”ç”¨ï¼›



Flutteré»˜è®¤å·²ç»ç»™æˆ‘ä»¬æä¾›çš„Materialåº“ï¼Œæ¥ä½¿ç”¨å…¶ä¸­çš„å¾ˆå¤šå†…ç½®Widgetï¼›

**Material** å’Œ **Widget** æ˜¯ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œå®ƒä»¬å…±åŒæ„æˆäº† Flutter åº”ç”¨ç¨‹åºçš„ UI æ¡†æ¶ã€‚

### Widgetï¼ˆéƒ¨ä»¶ï¼‰

- **Widget** æ˜¯ Flutter åº”ç”¨ç¨‹åºçš„åŸºæœ¬æ„å»ºå—ã€‚åœ¨ Flutter ä¸­ï¼Œ**ä¸€åˆ‡éƒ½æ˜¯ Widget**ï¼ŒåŒ…æ‹¬æŒ‰é’®ã€æ–‡æœ¬ã€å¸ƒå±€ã€åŠ¨ç”»ç­‰ã€‚éƒ½æ˜¯ä¸€ä¸ªä¸ªçš„ç±»ã€‚

- Widget å¯ä»¥æ˜¯å¯è§çš„ï¼ˆå¦‚æŒ‰é’®ã€æ–‡æœ¬ï¼‰æˆ–ä¸å¯è§çš„ï¼ˆå¦‚å¸ƒå±€ã€æ‰‹åŠ¿æ£€æµ‹å™¨ï¼‰ã€‚

- Widget æè¿°äº†åº”ç”¨ç¨‹åº UI çš„é…ç½®ã€‚

  

**Widget çš„ç±»å‹**

- **StatelessWidget**ï¼šä¸å¯å˜çš„ Widgetï¼Œä¸€æ—¦åˆ›å»ºå°±ä¸èƒ½æ›´æ”¹ï¼ˆä¾‹å¦‚æ–‡æœ¬ã€å›¾æ ‡ï¼‰ã€‚
- **StatefulWidget**ï¼šå¯ä»¥åŠ¨æ€æ›´æ–°çš„ Widgetï¼Œå†…éƒ¨é€šè¿‡ `State` å¯¹è±¡ç®¡ç†çŠ¶æ€ï¼ˆä¾‹å¦‚è®¡æ•°å™¨ã€è¡¨å•è¾“å…¥ï¼‰ã€‚

**ç¤ºä¾‹ä»£ç **

```dart
import 'package:flutter/material.dart';

void main() {
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      home: Scaffold(
        appBar: AppBar(title: Text('Flutter Demo')),
        body: Center(child: Text('Hello, Flutter!')),
      ),
    );
  }
}
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`MaterialApp`ã€`Scaffold`ã€`AppBar`ã€`Center` å’Œ `Text` éƒ½æ˜¯ Widgetã€‚

**ä¸å‰ç«¯ä¸­çš„ç±»ä¼¼æ¦‚å¿µ**

- **ç±»ä¼¼ HTML å…ƒç´ **ï¼šWidget ç±»ä¼¼äºå‰ç«¯å¼€å‘ä¸­çš„ HTML å…ƒç´ ï¼ˆå¦‚ `<div>`ã€`<p>`ã€`<button>` ç­‰ï¼‰ã€‚
- **ç±»ä¼¼ React ç»„ä»¶**ï¼šWidget ç±»ä¼¼äº React ä¸­çš„ç»„ä»¶ï¼ˆComponentï¼‰ï¼Œå°¤å…¶æ˜¯ React çš„å‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶ã€‚
  - `StatelessWidget` ç±»ä¼¼äº React çš„å‡½æ•°ç»„ä»¶ï¼ˆæ— çŠ¶æ€ï¼‰ã€‚
  - `StatefulWidget` ç±»ä¼¼äº React çš„ç±»ç»„ä»¶ï¼ˆæœ‰çŠ¶æ€ï¼‰ã€‚





### Materialï¼ˆææ–™ï¼‰

- **Material** ä¸€å¥—æ˜¯ **Widget å’Œä¸»é¢˜**ï¼Œä»–ä»¬é¢„è®¾äº†ä¸€å¥—å¸ƒå±€çš„è§„åˆ™æˆ–è€…è¯´è§„èŒƒï¼ˆ **Material Design** è§„èŒƒï¼‰

- Material Design æ˜¯ç”± Google æ¨å‡ºçš„ä¸€å¥—è®¾è®¡è¯­è¨€ï¼Œå¼ºè°ƒç®€æ´ã€ç›´è§‚å’Œä¸€è‡´çš„ç”¨æˆ·ä½“éªŒã€‚

- Flutter æä¾›äº†ä¸°å¯Œçš„ Material Widgetï¼ˆå¦‚ `AppBar`ã€`Button`ã€`Card` ç­‰ï¼‰ï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿæ„å»ºç¬¦åˆ Material Design çš„åº”ç”¨ç¨‹åºã€‚

  

**Material çš„æ ¸å¿ƒ Widget**

- **MaterialApp**ï¼šåº”ç”¨ç¨‹åºçš„æ ¹ Widgetï¼Œç”¨äºé…ç½® Material Design ä¸»é¢˜ã€è·¯ç”±ç­‰ã€‚
- **Scaffold**ï¼šæä¾›åº”ç”¨ç¨‹åºçš„åŸºæœ¬å¸ƒå±€ç»“æ„ï¼ŒåŒ…æ‹¬ `AppBar`ã€`Drawer`ã€`BottomNavigationBar` ç­‰ã€‚
- **AppBar**ï¼šé¡¶éƒ¨çš„åº”ç”¨æ ã€‚
- **Button**ï¼šå„ç§æŒ‰é’®ï¼ˆå¦‚ `ElevatedButton`ã€`TextButton`ï¼‰ã€‚
- **Card**ï¼šå¡ç‰‡å¼å¸ƒå±€ã€‚

```dart
import 'package:flutter/material.dart';

void main() {
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      theme: ThemeData(primarySwatch: Colors.blue), // Material ä¸»é¢˜
      home: Scaffold(
        appBar: AppBar(title: Text('Material Demo')),
        body: Center(
          child: Card(
            child: Padding(
              padding: EdgeInsets.all(16.0),
              child: Text('This is a Material Card!'),
            ),
          ),
        ),
      ),
    );
  }
}
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`MaterialApp`ã€`Scaffold`ã€`AppBar` å’Œ `Card` éƒ½æ˜¯ Material Widgetã€‚



**ä¸å‰ç«¯ä¸­çš„ç±»ä¼¼æ¦‚å¿µ**

- **ç±»ä¼¼ CSS æ¡†æ¶**ï¼šMaterial ç±»ä¼¼äºå‰ç«¯ä¸­çš„ CSS æ¡†æ¶ï¼ˆå¦‚ Bootstrapã€Tailwind CSSï¼‰ï¼Œæä¾›äº†ä¸€å¥—é¢„å®šä¹‰çš„æ ·å¼å’Œç»„ä»¶ã€‚
- **ç±»ä¼¼ Material-UI**ï¼šMaterial ç±»ä¼¼äº React ç”Ÿæ€ç³»ç»Ÿä¸­çš„ Material-UI åº“ï¼Œåè€…ä¹Ÿæ˜¯åŸºäº Material Design è§„èŒƒå®ç°çš„ã€‚





**Material å’Œ Widget çš„å…³ç³»**

- **Material æ˜¯åŸºäº Widget å®ç°çš„**ï¼šMaterial æ˜¯ Flutter æä¾›çš„ä¸€å¥—ç¬¦åˆ Material Design è§„èŒƒçš„ Widgetã€‚
- **Widget æ˜¯æ›´åŸºç¡€çš„æ¦‚å¿µ**ï¼šMaterial Widget æ˜¯ Widget çš„ä¸€ç§ï¼Œä¸“é—¨ç”¨äºå®ç° Material Designã€‚



**ä¸å‰ç«¯å¼€å‘çš„å¯¹æ¯”æ€»ç»“**

| Flutter æ¦‚å¿µ        | å‰ç«¯ä¸­çš„ç±»ä¼¼æ¦‚å¿µ                      | è¯´æ˜                                                         |
| :------------------ | :------------------------------------ | :----------------------------------------------------------- |
| **Widget**          | HTML å…ƒç´ ã€React ç»„ä»¶                 | Widget æ˜¯ Flutter çš„åŸºæœ¬æ„å»ºå—ï¼Œç±»ä¼¼äº HTML å…ƒç´ æˆ– React ç»„ä»¶ã€‚ |
| **StatelessWidget** | React å‡½æ•°ç»„ä»¶ï¼ˆæ— çŠ¶æ€ï¼‰              | ä¸å¯å˜çš„ Widgetï¼Œç±»ä¼¼äº React çš„å‡½æ•°ç»„ä»¶ã€‚                   |
| **StatefulWidget**  | React ç±»ç»„ä»¶ï¼ˆæœ‰çŠ¶æ€ï¼‰                | å¯åŠ¨æ€æ›´æ–°çš„ Widgetï¼Œç±»ä¼¼äº React çš„ç±»ç»„ä»¶ã€‚                 |
| **Material**        | CSS æ¡†æ¶ï¼ˆå¦‚ Bootstrapï¼‰ã€Material-UI | Material æ˜¯åŸºäº Widget å®ç°çš„ä¸€å¥—ç¬¦åˆ Material Design è§„èŒƒçš„ç»„ä»¶åº“ã€‚ |





Flutterçš„å¤§è‡´ç»˜åˆ¶æµç¨‹ï¼š

![image-20250305183719014](D:\learn-notes\å°ç¨‹åºå’Œuni-app\images\image-20250305183719014.png)

![image-20250305183654108](D:\learn-notes\å°ç¨‹åºå’Œuni-app\images\image-20250305183654108.png)



## Widget 







### Textéƒ¨ä»¶

- ä½¿ç”¨Textéƒ¨ä»¶æ¥å®Œæˆæ–‡å­—çš„æ˜¾ç¤ºï¼›
- Textéƒ¨ä»¶ç»§æ‰¿è‡ªStatelessWidgetï¼ŒStatelessWidgetç»§æ‰¿è‡ªWidgetï¼›

```dart
class Text extends StatelessWidget {
  const Text(
    // dataæ˜¯å¿…ç©¿å‚æ•°
    this.data, 
    // å…¶ä»–å…¨æ˜¯å¯é€‰å‘½åå‚æ•°
    {
    Key key,
    this.style,
    this.strutStyle,
    this.textAlign,
    this.textDirection,
    this.locale,
    this.softWrap,
    this.overflow,
    this.textScaleFactor,
    this.maxLines,
    this.semanticsLabel,
    this.textWidthBasis,
  });
}


// ä½¿ç”¨ï¼šText('hello', textDirection: TextDirection.ltr);
```





### super.key

```dart
import 'package:flutter/material.dart';

void main() => runApp(MyApp());

class MyApp extends StatelessWidget {
  const MyApp({super.key});
  // This widget is the root of your application.
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      // Application name
      title: 'Flutter Hello World123',
      // Application theme data, you can set the colors for the application as
      // you want
      theme: ThemeData(
        // useMaterial3: false,
        primarySwatch: Colors.blue,
      ),
      // A widget which will be started on application startup
      home: MyHomePage(title: 'Flutter Demo Home Page'),
    );
  }
}

class MyHomePage extends StatelessWidget {
  final String title;
  const MyHomePage({super.key, required this.title});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        // The title text which will be shown on the action bar
        title: Text(title),
      ),
      body: Center(
        child: Text(
          'Hello, World!',
        ),
      ),
    );
  }
}
```

`super.key` æ˜¯Dartè¯­è¨€ä¸­ç”¨äºå°†å­ç±»çš„æ„é€ å‡½æ•°å‚æ•°**ç›´æ¥ä¼ é€’ç»™çˆ¶ç±»æ„é€ å‡½æ•°**çš„è¯­æ³•ç³–ã€‚

1. **ç»§æ‰¿å…³ç³»**

- `MyApp` å’Œ `MyHomePage` ç»§æ‰¿è‡ª `StatelessWidget`ã€‚
- `StatelessWidget` çš„æ„é€ å‡½æ•°éœ€è¦ä¸€ä¸ªå¯é€‰å‚æ•° `Key? key`ã€‚

------

2. **æ„é€ å‡½æ•°å‚æ•°ä¼ é€’**

- **ä¼ ç»Ÿå†™æ³•**ï¼šéœ€è¦æ˜¾å¼è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ï¼š

  ```dart
  const MyApp({Key? key}) : super(key: key);
  ```

- **æ–°è¯­æ³•ï¼ˆDart 2.17+ï¼‰**ï¼šä½¿ç”¨ `super.key` ç›´æ¥ä¼ é€’ï¼š

  ```dart
  const MyApp({super.key});
  ```

  è¿™é‡Œçš„ `super.key` è¡¨ç¤ºå°†å­ç±»æ„é€ å‡½æ•°æ¥æ”¶åˆ°çš„ `key` å‚æ•°è‡ªåŠ¨ä¼ é€’ç»™çˆ¶ç±» `StatelessWidget` çš„æ„é€ å‡½æ•°ã€‚

------

3. **Key çš„ä½œç”¨**

- **Widget æ ‡è¯†**ï¼š`Key` ç”¨äºåœ¨Widgetæ ‘ä¸­å”¯ä¸€æ ‡è¯†ä¸€ä¸ªWidgetï¼Œå¸®åŠ©Flutteræ¡†æ¶åœ¨é‡å»ºæ—¶é«˜æ•ˆæ›´æ–°ç•Œé¢ã€‚

- **å¯é€‰å‚æ•°**ï¼šç”±äº `key` æ˜¯å‘½åå¯é€‰å‚æ•°ï¼ˆåŒ…è£¹åœ¨ `{}` ä¸­ï¼‰ï¼Œåˆ›å»ºWidgetæ—¶å¯ä»¥é€‰æ‹©æ˜¯å¦æä¾›ï¼š

  ```dart
  MyHomePage(title: 'Demo') // ä¸ä¼ é€’key
  æˆ–
  MyHomePage(key: someKey, title: 'Demo') // ä¼ é€’è‡ªå®šä¹‰key
  ```

------

4. **ä»£ç ç®€åŒ–**

- **å‡å°‘å†—ä½™**ï¼šæ–°è¯­æ³•é¿å…äº†é‡å¤ä¹¦å†™å‚æ•°ä¼ é€’é€»è¾‘ï¼Œæé«˜ä»£ç å¯è¯»æ€§ã€‚
- **é€‚ç”¨åœºæ™¯**ï¼šä»…å½“å­ç±»éœ€è¦å°†å‚æ•°ç›´æ¥é€ä¼ ç»™çˆ¶ç±»æ„é€ å‡½æ•°æ—¶ä½¿ç”¨ã€‚

------

**æ€»ç»“**

`super.key` çš„ä½œç”¨æ˜¯å°†å­ç±»æ„é€ å‡½æ•°æ¥æ”¶åˆ°çš„ `key` å‚æ•°ç›´æ¥ä¼ é€’ç»™çˆ¶ç±» `StatelessWidget` çš„æ„é€ å‡½æ•°ï¼Œç¡®ä¿çˆ¶ç±»æ­£ç¡®åˆå§‹åŒ–ã€‚è¿™æ˜¯Dart 2.17+å¼•å…¥çš„è¯­æ³•ç³–ï¼Œç®€åŒ–äº†ä»£ç ï¼ŒåŒæ—¶éµå¾ªFlutteræ¡†æ¶ä½¿ç”¨Keyç®¡ç†Widgetç”Ÿå‘½å‘¨æœŸçš„æœºåˆ¶ã€‚







## ç»ƒä¹ 

```dart
import 'package:flutter/material.dart';

void main(List<String> args) {
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Flutter Demo',
      debugShowCheckedModeBanner: false,
      home: HomePage(),
    );
  }
}

class HomePage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(appBar: AppBar(title: Text('test')), body: HomeContent());
  }
}

class HomeContent extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Center(
      child: Row(
        mainAxisAlignment: MainAxisAlignment.center,
        children: [
          Checkbox(
            value: true,
            onChanged: (value) {
              print(value);
            },
          ),
          Text('æ˜¯å¦åŒæ„åè®®', style: TextStyle(fontSize: 25)),
        ],
      ),
    );
  }
}
```



æ”¹ä¸ºæœ‰çŠ¶æ€çš„éƒ¨ä»¶

```dart
import 'package:flutter/material.dart';

void main(List<String> args) {
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Flutter Demo',
      debugShowCheckedModeBanner: false,
      home: HomePage(),
    );
  }
}

class HomePage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: Text('test')), 
      body: HomeContent()
    );
  }
}

class HomeContent extends StatefulWidget {
  @override
  State<StatefulWidget> createState() {
    // TODO: implement createState
    return _HomeContentState();
  }
}

class _HomeContentState extends State<HomeContent> {
  var flag = false;
  @override
  Widget build(BuildContext context) {
    return Center(
      child: Row(
        mainAxisAlignment: MainAxisAlignment.center,
        children: [
          Checkbox(
            value: flag,
            onChanged: (value) {
              // setState ç»§æ‰¿è‡ªState
              setState(() {
                flag = value!;
              });
            },
          ),
          Text('æ˜¯å¦åŒæ„åè®®', style: TextStyle(fontSize: 25)),
        ],
      ),
    );
  }
}
```



å¦‚æœä¸€ä¸ªwidgetæ˜¯ä¸å¯å˜çš„æƒ…å†µä¸‹ï¼Œåœ¨fluuterå†…éƒ¨ç”¨@immutableè¿›è¡Œæ³¨è§£ï¼Œè¿™ä¸ªç±»ä¸­çš„æ‰€ç”¨æˆå‘˜å˜é‡éƒ½å¿…é¡»ç”¨finalã€‚





## ç”Ÿå‘½å‘¨æœŸå‡½æ•°

**StatefulWidget** çš„ç”Ÿå‘½å‘¨æœŸä¸»è¦ç”±å…¶å…³è”çš„ **State ç±»**ä¸­çš„ä¸€ç³»åˆ—æ–¹æ³•æ§åˆ¶ã€‚ä»¥ä¸‹æ˜¯ç”Ÿå‘½å‘¨æœŸå‡½æ•°çš„è¯´æ˜ï¼ŒæŒ‰è°ƒç”¨é¡ºåºæ’åˆ—ï¼š

### ç”Ÿå‘½å‘¨æœŸé˜¶æ®µåŠæ–¹æ³•

å„ä¸ªç±»çš„æ„é€ å‡½æ•°ä¹Ÿèƒ½çœ‹ä½œä¸€ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚

#### 1. **createState()**

- **è°ƒç”¨æ—¶æœº**ï¼šå½“ `StatefulWidget` è¢«æ’å…¥åˆ° Widget æ ‘æ—¶è°ƒç”¨ã€‚
- **ä½œç”¨**ï¼šåˆ›å»ºä¸€ä¸ªå¯¹åº”çš„ `State` å¯¹è±¡ï¼Œä¸ `StatefulWidget` å…³è”ã€‚
- **æ³¨æ„**ï¼šæ¯ä¸ª `StatefulWidget` å¿…é¡»é‡å†™æ­¤æ–¹æ³•ã€‚

```dart
@override
MyState createState() => MyState();
```

------

#### 2. **State çš„æ„é€ å‡½æ•°**

- **è°ƒç”¨æ—¶æœº**ï¼šåœ¨ `createState()` åç«‹å³è°ƒç”¨ã€‚
- **ä½œç”¨**ï¼šåˆå§‹åŒ– `State` å¯¹è±¡çš„æˆå‘˜å˜é‡ï¼Œä½†æ­¤æ—¶æ— æ³•è®¿é—® `BuildContext`ã€‚

------

#### 3. **initState()**

- **è°ƒç”¨æ—¶æœº**ï¼šåœ¨ `State` å¯¹è±¡è¢«æ’å…¥åˆ° Widget æ ‘åè°ƒç”¨ï¼ˆä»…ä¸€æ¬¡ï¼‰ã€‚
- **ä½œç”¨**ï¼šåˆå§‹åŒ–ä¾èµ–ï¼ˆå¦‚è®¢é˜…æµã€åˆå§‹åŒ–å˜é‡ã€è®¿é—® `widget` å±æ€§ç­‰ï¼‰ã€‚
- **æ³¨æ„**ï¼š
  - å¿…é¡»è°ƒç”¨ `super.initState()`ã€‚
  - é¿å…åœ¨æ­¤å¤„è®¿é—® `BuildContext`ï¼ˆå¯èƒ½æœªå®Œå…¨å…³è”ï¼‰ã€‚

```dart
@override
void initState() {
  super.initState();
  _controller = AnimationController(vsync: this);
}
```

------

#### 4. **didChangeDependencies()**

- **è°ƒç”¨æ—¶æœº**ï¼š
  - åœ¨ `initState()` åç«‹å³è°ƒç”¨ã€‚
  - å½“ä¾èµ–çš„ `InheritedWidget`ï¼ˆå¦‚ `Theme`ã€`MediaQuery`ï¼‰å‘ç”Ÿå˜åŒ–æ—¶è°ƒç”¨ã€‚
- **ä½œç”¨**ï¼šå¤„ç†ä¾èµ–å˜åŒ–ï¼ˆå¦‚é‡æ–°è·å–æ•°æ®ï¼‰ã€‚

```dart
@override
void didChangeDependencies() {
  super.didChangeDependencies();
  _data = DefaultAssetBundle.of(context).loadString('data.json');
}
```

------

#### 5. **build()**

- **è°ƒç”¨æ—¶æœº**ï¼š
  - é¦–æ¬¡æ¸²æŸ“æ—¶ã€‚
  - è°ƒç”¨ `setState()` æ—¶ã€‚
  - ä¾èµ–çš„ `InheritedWidget` å˜åŒ–æ—¶ã€‚
  - çˆ¶ Widget é‡å»ºå¯¼è‡´å½“å‰ Widget é…ç½®å˜åŒ–æ—¶ã€‚
- **ä½œç”¨**ï¼šæ„å»º UIï¼Œå¿…é¡»è¿”å›ä¸€ä¸ª Widgetã€‚
- **æ³¨æ„**ï¼šé¿å…åœ¨æ­¤æ–¹æ³•ä¸­æ‰§è¡Œè€—æ—¶æ“ä½œã€‚

```dart
@override
Widget build(BuildContext context) {
  return Text('Hello, ${widget.name}');
}
```

------

#### 6. **didUpdateWidget(oldWidget)**

- **è°ƒç”¨æ—¶æœº**ï¼šçˆ¶ Widget é‡å»ºå¯¼è‡´å½“å‰ `StatefulWidget` è¢«æ›¿æ¢ï¼ˆä½† `State` å¯¹è±¡ä¿ç•™ï¼‰æ—¶è°ƒç”¨ã€‚
- **ä½œç”¨**ï¼šæ¯”è¾ƒæ–°æ—§ `Widget` é…ç½®ï¼Œå†³å®šæ˜¯å¦éœ€è¦æ›´æ–°çŠ¶æ€ã€‚
- **æ³¨æ„**ï¼šå¯åœ¨æ­¤å¤„æ ¹æ®æ–°æ—§ `widget` çš„å±æ€§å·®å¼‚è°ƒæ•´çŠ¶æ€ã€‚

```dart
@override
void didUpdateWidget(MyOldWidget oldWidget) {
  super.didUpdateWidget(oldWidget);
  if (widget.color != oldWidget.color) {
    _updateColor(widget.color);
  }
}
```

------

#### 7. **setState()**

- **è°ƒç”¨æ—¶æœº**ï¼šå¼€å‘è€…æ˜¾å¼è°ƒç”¨ä»¥é€šçŸ¥æ¡†æ¶çŠ¶æ€å˜åŒ–ã€‚
- **ä½œç”¨**ï¼šè§¦å‘é‡å»ºï¼ˆé‡æ–°è°ƒç”¨ `build()`ï¼‰ã€‚
- **æ³¨æ„**ï¼šä»…ç”¨äºåŒæ­¥æ›´æ–° UIï¼Œä¸å¯åœ¨å¼‚æ­¥å›è°ƒä¸­ç›´æ¥è°ƒç”¨ã€‚

```dart
void _incrementCounter() {
  setState(() {
    _counter++;
  });
}
```

------

#### 8. **deactivate()**

- **è°ƒç”¨æ—¶æœº**ï¼šå½“ `State` å¯¹è±¡ä» Widget æ ‘ä¸­ç§»é™¤æ—¶è°ƒç”¨ï¼ˆå¯èƒ½æš‚æ—¶ç§»é™¤ï¼Œå¦‚é¡µé¢è·³è½¬ï¼‰ã€‚
- **ä½œç”¨**ï¼šæ¸…ç†ä¸ `BuildContext` ç›¸å…³çš„èµ„æºï¼ˆå¦‚ç§»é™¤ç„¦ç‚¹ç›‘å¬ï¼‰ã€‚
- **æ³¨æ„**ï¼šå¯èƒ½è¢«é‡æ–°æ’å…¥åˆ°æ ‘ä¸­ï¼ˆæ­¤æ—¶ `dispose()` ä¸ä¼šè°ƒç”¨ï¼‰ã€‚

------

#### 9. **dispose()**

- **è°ƒç”¨æ—¶æœº**ï¼šå½“ `State` å¯¹è±¡è¢«æ°¸ä¹…ç§»é™¤æ—¶è°ƒç”¨ã€‚
- **ä½œç”¨**ï¼šé‡Šæ”¾èµ„æºï¼ˆå¦‚å–æ¶ˆè®¡æ—¶å™¨ã€å…³é—­æµã€é”€æ¯æ§åˆ¶å™¨ï¼‰ã€‚
- **æ³¨æ„**ï¼šå¿…é¡»è°ƒç”¨ `super.dispose()`ã€‚

```dart
@override
void dispose() {
  _controller.dispose();
  super.dispose();
}
```

------

### ç”Ÿå‘½å‘¨æœŸæµç¨‹å›¾

![image-20250309153821826](D:\learn-notes\å°ç¨‹åºå’Œuni-app\images\image-20250309153821826.png)



------

### å…³é”®æ³¨æ„äº‹é¡¹

1. **é¿å…åœ¨ `build()` ä¸­ä¿®æ”¹çŠ¶æ€**ï¼šå¯èƒ½å¯¼è‡´æ— é™å¾ªç¯ã€‚
2. **`dispose()` å¿…é¡»é‡Šæ”¾èµ„æº**ï¼šé˜²æ­¢å†…å­˜æ³„æ¼ï¼ˆå¦‚ `AnimationController`ã€`StreamSubscription`ï¼‰ã€‚
3. **çƒ­é‡è½½è¡Œä¸º**ï¼šçƒ­é‡è½½ä¼šè§¦å‘ `didUpdateWidget()` å’Œ `build()`ï¼Œä½†ä¸ä¼šè°ƒç”¨ `initState()` æˆ– `dispose()`ã€‚
4. **`BuildContext` é™åˆ¶**ï¼šåœ¨ `initState()` ä¸­æ— æ³•å®‰å…¨ä½¿ç”¨ `BuildContext`ï¼ˆéœ€åœ¨ `didChangeDependencies()` æˆ–åç»­æ–¹æ³•ä¸­ä½¿ç”¨ï¼‰ã€‚







å¼‚æ­¥

keyçš„ä½œç”¨ä¸åŸç†

providerçŠ¶æ€ç®¡ç†

ç”Ÿå‘½å‘¨æœŸå‡½æ•°

ä¸åŒå±å¹•é€‚é…ï¼Œ rpx

å¸¸è§ç¬¬ä¸‰æ–¹åº“

widgetæ ‘

stateçš„åˆ·æ–°æœºåˆ¶

