# 小程序

原生 JS 做混合开发，js 接入安卓和 ios 的 api 开发混合应用以获得原生应用的能力，借助混合开发框架，写混合开发框架插件，学习成本高。

微信小程序将原生应用不将安卓和 ios 的 api 进一步封装，直接暴露给 js 进行调用就能实现原生能力，并获取微信用户的数据。

![image-20220108141147933](..\typora-user-images\image-20220108141147933.png)

## 基础（开发流程和开发环境）

专门申请一个小程序开发账号，它不同与公众号。

[微信公众平台](https://mp.weixin.qq.com/)选择小程序进行注册：

![image-20220104185016763](..\typora-user-images\image-20220104185016763.png)

进入注册页面进行填写信息后注册：

![image-20220104185047672](..\typora-user-images\image-20220104185047672.png)

注册成功后，登录进入小程序管理页面：

![image-20220104185215444](..\typora-user-images\image-20220104185215444.png)

在开发管理页面的开发设置部分能够查看 AppID（小程序 ID）：

![image-20220104185335448](..\typora-user-images\image-20220104185335448.png)

AppID 是在小程序开发中，创建项目需要关联的一个 ID。小程序密钥才是能拿到用户唯一身份的关键数据。

开发者通过微信的开发者工具创建项目需要使用 AppID，输入后，该项目就和该微信小程序账号进行了绑定。在完成项目开发后，可以在微信开发者工具中进行项目的上传，项目的提交审核和发布。

在使用微信的开发者工具前，需要使用注册了微信小程序的微信号进行扫码登录并且配置好项目对应的 AppID 后。是为了确认申请小程序的开发账号和使用开发者工具登录进行开发的是否是同一个人，这样就可以利用小程序开发者工具将项目提交上传，审核和发布对用的小程序的开发账号上，以及进行之后的管理。

小程序的开发可以选择使用 vscode 等开发工具进行，但是预览，上传等都必须依赖微信的小程序开发工具。

小程序多人协作开发，在微信公众号平台中的成员管理页面进行成员的添加。其他开发者可以对项目进行开发，预览和真机调试，有权限进行上传。

![image-20220104231539091](.\typora-user-images\image-20220104231539091.png)

小程序在开发完成后，可以在小程序的开发工具中点击 上传按钮进行上传，上传后，可以到小程序的开发者平台中进行查看并提交审核，在审核通过后就可以进行发布。发布成功的小程序就可以在微信中搜索访问到。

微信为小程序开发提供了开发框架，组件和一些 API。

### 开发者工具

[官网](_https://mp.weixin.qq.com/)

[微信小程序官方文档](https://developers.weixin.qq.com/miniprogram/dev/devtools/devtools.html)

注册账号

开发者工具的说明：

普通编译：进入有多个页面的小程序时，每次首先进入的就是小程序的首页。

添加编辑模式：进入有多个页面的小程序时，使用对应的编辑模式时，在之后打开小程序时，有限展示对应的小程序页面。

编译：在完成最新项目编辑后，点击编译会自动保存被执行项目的最新修改，以查看最新的效果。

![image-20211104201744168](..\typora-user-images\image-20211104201744168.png)

预览：只有当前的开发人员可以通过自己的手机扫描预览。

上传：在项目开发完毕后，点击上传，确定更新内容。上传代码完成后，去微信公众平台，在版本管理中

![image-20211104202251676](..\typora-user-images\image-20211104202251676.png)

![image-20211104202350588](..\typora-user-images\image-20211104202350588.png)

![image-20211104202418979](..\typora-user-images\image-20211104202418979.png)

![image-20211104202437718](..\typora-user-images\image-20211104202437718.png)

体验版本的话，对于所有的开发者和有体验权限的账户都能扫码体验了。具体人员的管理可以在成员管理中设置

详情：

- 项目的名字
- APPID
- 发布状态
- 本地设置开启非 http 后端协议
- .....

## **小程序的结构目录**

小程序的配置文件

小程序提供的框架接口

场景值

框架的目录结构和每个文件的作用

小程序框架让开发者可以在微信中开发具有原生 app 体验的服务。而小程序有自己的 WXML, WXSS 和 JavaScript，并且在视图层和逻辑层间提供了数据传输和事件系统，让开发者专注于数据和逻辑。

| 结构 | 小程序     | 传统 web   |
| ---- | ---------- | ---------- |
| 结构 | WXML       | HTML       |
| 样式 | WXSS       | CSS        |
| 逻辑 | JavaScript | JavaScript |
| 配置 | JSON       | 无         |

### 小程序配置

- 全局配置
- 页面配置
- sitemap 配置

在小程序中准备 iconfont 字体图标，选择好风格类似的图标后，选择下载素材，下载素材时可以选择颜色和图标大小（支持手填图标大小），小程序推荐字体图标是 81\*81。 小程序中需要两种图标，选中时颜色不同的图标和未选中时字体图标的颜色，图片格式是 png。下载到本地后引入项目特定文件夹下。

![image-20211104214128051](..\typora-user-images\image-20211104214128051.png)

![image-20211104214637296](..\typora-user-images\image-20211104214637296.png)

![image-20211104214615180](..\typora-user-images\image-20211104214615180.png)

![image-20211104221206524](..\typora-user-images\image-20211104221206524.png)

### 原生框架

### 模板语法

### 内置组件

### 生命周期

### 自定义组件

有个人信息展示个人信息

没有个人信息则展示暂不对外开放

招聘看到简历列表

应聘者能看到自己的求职走到哪一步

招聘人员不用

内网穿透

openId

角色 id

用户在微信客户端中访问第三方页面，公众号可以通过微信网页授权机制，来获取用户基本信息，进而实现业务逻辑。

为了识别用户，每个用户针对每个公众号会产生一个安全的 OpenID

微信公众号平台提供开发接口，开发者通过

微信用户在通过公众号下面的按钮链接试图跳转到第三方页面时，该公众号可以通过微信的页面授权机制来获取用户的基本信息。
