# 计算机组成原理

前置课程是数字电路（数字逻辑）等专业课，同时它也是计算机科学专业中唯一一门直接和硬件逻辑实现相关的课程，是计算机课程体系中硬件系列课程的基础。

 

对象：数字电子计算机

组成：计算机硬件系统的逻辑实现，即数字电路层面的逻辑门和触发器来实现计算机硬件系统，不是物理实现

原理：数字电子计算机硬件系统逻辑实现的一般原理，不依托任何具体机型



基本部件的结构和组织方式，用数字电路中的知识对计算机的基本部件进行逻辑实现。

基本运算的操作原理，数学运算在计算机中的实现原理，用数字电路知识实现这些电路

基本部件和基本单元的设计思想，基本部件之间的相互组织协调

实现一个计算机的逻辑设计，实现一个具体机型的逻辑实现，可以完成一个具体的处理器的逻辑设计

先给出整个计算机硬件系统的全貌，然后逐渐细化直到最底层组件的逻辑实现



推荐教材：

- 计算机组成原理（唐朔飞）
- 计算组成与设计：硬件\软件结构
- 数字设计与计算机体系结构





**计算机组成原理在计算机专业课程体系中的位置**

![image-20220922212930368](.\images\image-20220922212930368.png)

指令集体系结构：计算机软硬件系统的一个交接处（学自计算机体系结构）。

进程，处理器和I/O以及数据通路和控制：都是在计算机组成原理中需要学习的。



硬件的直接上层就是计算机组成原理，软硬件之间的是计算机体系结构，而计算机组成原理的直接上层是计算机体系结构。

计算机组成原理：重点讲如何实现，实现的细节。

计算机体系结构：是采用分析加上评测的方式，来说明为什么在计算机系统设计中要这样设计。

> 比如cache是计算机系统中非常重要的一个部件，它大大提升计算机系统的速度，特别是对内存中的数据和指令的存取速度，cache有多种组织方式，比如组相联，直接相联和全相联，其中在组相联中又有两路组相联，四路组相联，八路组相联。假如选择了组相联这种方式对cache进行组织，那么我们设计的计算机系统适合两路组相联，四路组相联，八路组相联中的哪种，就需要分析加评测。   
>
> 比如一条指令是否引入到我们的计算机的指令集中，也采用分析加评测的方式来确定引入的优势和不引入的劣势，以及是否引入到设计的计算机系统中。 一旦该指令被确定引入系统中，那么计算机组成层面给就要确认用什么样的方式（逻辑电路）来实现该指令。



## 概论

计算机系统硬件概貌以及程序在计算机中如何执行。



## 计算机系统的硬件结构

- 系统总线

- 存储器

- I/O

- 数据的表示

- 数据的运算方法和运算器

  

  ![image-20220922214153675](.\images\image-20220922214153675.png)



## CPU

- 指令系统
- ALU
- CU
- CPU以及内部互联
- 寄存器



## CU（控制单元）

- 排队逻辑
- 寄存器和解码器
- 控制器
- 存储器



对指令的微观操作进行分析，用两种方式实现计算机中的控制器，一种是硬连方式，另一种是微程序设计的方式。





## 计算机系统概论

计算机系统构成部分：

- 硬件
- 软件





物联网：把各种传感器嵌入到设备中，感知设备的状态，将接受到的数据传给后台系统，进行分析处理。





## 第一节摘要

计算机组成原理在计算机专业的课程体系当中是非常重要的一门课
这门课是计算机专业的核心课程,是基础课程
数字逻辑设计
数字电子技术等课程

这门课程为什么这么重要
因为这门课程是计算机专业的课程体系当中
唯一的一门讲授计算机硬件的逻辑实现的课程
是计算机课程体系当中硬件系列课程的上层

讲授的内容
这门课程的名称上面有三个关键词
第一个关键词就是计算机
在计算机的发展历史上
曾经出现过多种类型的计算机
比如说机械式的计算机
模拟电子计算机
数字电子计算机
那么现在的计算机几乎都是数字电子计算机
因此这门课的内容就是围绕着数字电子计算机展开的

第二个关键词就是组成（organization、组织）
那么什么是组成组成
是指计算机硬件系统的逻辑实现，不是物理实现
那么什么是计算机硬件系统的逻辑实现
用数字电路，数字逻辑的知识以及学过的门电路、触发器等数字电子的元器件来实现计算机的硬件系统

第三个关键词是原理
讲授数字电子计算机硬件系统逻辑实现的一般原理，不依托任何具体机型
是指在计算机发展过程当中，多种数字电子计算机实现的公共的原理

讲授的内容主要分以下三大部分
第一部分基本部件的结构和组织方式
用我们学过的数字逻辑的知识
数字电子的知识
对计算机的基本部件进行逻辑实现

第二块重要的内容是基本运算的操作原理
计算机的基本功能就是实现加、减、乘、除等运算的这些功能
这些运算在计算机当中是如何实现的
如何用数字电路的知识来实现这些运算的硬件电路

第三部分就是基本部件和基本单元的一些设计思想，还有一部分内容就是怎么把这些部件连接起来
成为一个能够协调运行的一个整体的一个系统

这门课程的特色是要讲授计算机组成的一般原理
不以具体机型为依托
这样做的好处是
将来大家在设计计算机的时候
是对计算机进行逻辑设计的时候
可以不受任何具体机型具体实现方式的这个制约
创新性的或者自主性的完成这个系统的设计

这种讲法也有一定的问题
感觉可能比较空
因为没有实现一个计算机的逻辑设计

那么为了解决这个问题
给大家推荐了两本教材
那么这些教材里面都有具体机型的逻辑实现
甚至根据这些教材，可以设计完成一个具体的处理器的逻辑设计

通过这种方式实现这个课程的落地

另外这个课程的组织采用的是自顶向下的方式
进行层层细化
首先给出整个计算机硬件系统的这个概念
然后逐渐的进行细化
最后完成最底层的部件的逻辑实现
从而完成整个计算机硬件系统的逻辑实现



教材：计算机组成原理（唐朔飞） 以及 配到练习册




推荐的两本参考教材

教材的名称是计算机组织与设计硬软件接口技术
risk它指的是精简指令集计算机



第二本教材叫做数字设计和计算机体系结构
这本教材分了两部分
前一部分的内容是关于数字设计的
那么讲了数字电路的基本知识和基本设计方法
并且给出了两种硬件描述语言来描述数字设计

第二部分计算机体系结构的这一部分
实际上讲授的是mips处理器
它的逻辑实现讲的非常的清晰


看一下课程在课程体系当中的重要地位

这个图在计算机课程体系当中非常重要的一个图

![image-20230630203102458](C:\Users\dukkha\Desktop\study-notes\images\image-20230630203102458.png)

现代计算机专业它的课程体系呢就是根据这个图进行设置的
中间蓝色的部分是指令集体系结构也就是计算机软硬件系统的一个交界面那这部分内容是计算机体系结构课程要学的

那在它的下一层就是计算机组成原理要学的一些内容
比如说处理器memory，还有database

右侧这个蓝色的图
在这个图当中
硬件的最上层就是计算机组成原理
软硬件之间的这个交界面就是计算机体系结构课程
那么这两门课它的内容上是有很大的区别的

计算机组成原理讲如何实现想实现的细节

计算机系统结构呢我们是采用分析加评测的方式
来说明为什么在计算机系统设计当中要进行这样的一个设计
比如说cache是计算机系统当中非常重要的一个部件，大大提升了计算机系统的速度
特别是对内存当中数据和指令的存取速度
那么cache有多种组织方式
比如说组相连
直相连和全相连

那么在组相连当中
又有两路组相连
四路组相连

假如说选择了组相连这种方式对开始进行组织
到底哪一种相连方式适合我们这个计算机系统的设计
那我们就要采用分析加评测的方式

另外比如说我们要确定一条指令
是否要把它引入到计算机的指令集当中
也要采用分析家评测的方式来确定
把这条指令引入到计算机当中
会给我们带来什么好处
也会给我们带来什么问题
从而确定是否把这条指令引入到系统当中

一旦这条指令被引入到系统当中了
那么计算机组成
这门课或者是计算机组成的设计人员
那就要确认用什么样的方式来实现这条指令

这个课程的组织

![image-20230630203429575](C:\Users\dukkha\Desktop\study-notes\images\image-20230630203429575.png)

我们这个课程的组织是采用自顶向下的方式进行层层细化
所以这门课程的组织呢一共分成了四篇

第一篇是计算机系统概论
我们给出计算机系统硬件的概念
以及程序在计算机系统当中是如何执行的


第二篇就是计算机系统的硬件结构
比如说存储器,i\o,系统总线

cpu是计算机系统的核心
是计算机系统当中非常重要的部件
那为了把cpu讲清楚啊
写清楚
那我们在此基础上对cpu专门用一篇来进行描述
cpu中的核心部件包括alu，cu，cpu内部的互联以及各种类型的寄存器


CU是真个计算机的控制核心，也是计算机系统当中最重要的部分
CU独立出来讲解
主要介绍排队逻辑、寄存器、解码器、存储控制等等这几部分内容


我们对指令的微操作进行分析
然后用两种方式来实现计算机的控制器或者cpu当中的控制器
一种方式呢就是采用硬联方式
另外一种方式是采用微程序设计的方式来完成计算机的设计



这个课程一共分成三大部分
第一部分就是计算机组成原理之机器
计算机系统的基本概念将在第一章进行介绍
第三章我们介绍总线
第四章我们介绍存储器
第五章我们介绍输入输出系统

第二大部分就是计算机组成原理之数字
主要的内容就是我们的第六章
要讲授计算机当中数据的表示
数据的基本运算方法
以及实现这些运算方法的运算器

第三大部分讲授计算机组成原理的cpu
主要就是指第七章第八章第九章和第十章
第七章就是指令系统
我们会进行一个简要的介绍
因为指令系统呢是计算机系统结构或者计算机体系结构的课程当中要讲的主要的内容
那第八章我们会介绍cpu的结构和功能
在此基础上在第九章、第十章介绍控制单元和控制单元的设计





## 第二节摘要

开始第一章内容的讲解
计算机系统概论
第一章一共分三节
首先我们对计算机系统做一个简介
然后介绍计算机系统的基本组成
最后简要给出计算机硬件的一些技术指标

第一个问题
现代计算机系统是由哪两部分组成的（硬件和软件）

什么是物联网
就是把传感器嵌入到设备当中
比如说把它嵌入到电网铁路桥梁隧道公路等

为什么要把传感器
嵌入到这些设备当中去?
就是让传感器在这些设备当中能够感知设备的状态
然后把感知到的信息传送到后台的计算机或者是服务器当中
后台的计算机和服务器根据感知到的状态
对系统的健康状态,工作状态等进行判断

各种物体实际上通过网络形成了普遍的连接就形成了所谓的物联网

这些物联网在和传统的互联网进行整合
进而实现人类社会和物理系统的整合
那么形成智慧地球

那么如果说我们这个网络
还有反馈能力的话
比如说我们通过前端啊感知到信息
通过后端进行信息处理
并且根据信息处理的结果
我们能够向前端啊进行信息反馈
甚至根据处理结果
由前端做出一些相应的这样的动作
那这就形成了一个新的系统
就是现在非常有名的信息物理系统



那么下面要回答
计算机系统是由哪两大部分组成的

![image-20230630203536604](C:\Users\dukkha\Desktop\study-notes\images\image-20230630203536604.png)

不管什么样的计算机
对它进行顶层的抽象
把计算机的结构进行简化
然后再一步一步地进行细化

如果我们从最底层开始做起的话
那这个系统呢都会非常的复杂
甚至会感觉无处下手
那实际上这些种类型的机器
它的基本结构
尽可能忽略这些计算机的一些具体的特征

可以把这个计算机系统
给它分成两部分
那么这两部分就是它的硬件和它的软件
那么计算机的硬件就是指计算机的实体
我们看得见摸得着的那些部分
比如说主机,外设
那么这些都是计算机系统的硬件

那么计算机系统另外的一大部分
就是计算机系统的软件
软件就是指由具有各类特殊功能的信息组成的
软件看不见
但是它是存储在计算机当中
硬件通过软件来发挥作用
硬件通过每一条指令的有序执行来发挥作用
所以软件是计算机系统当中
非常重要的一部分

但是我们这门课
主要讲授的是计算机系统的硬件
也就是说看得见摸得着的这些实体的逻辑实现

进一步对计算机软件进行分析
计算机软件

那么计算机的软件进行分类的话
分成大类啊
可以分成两类

一类是计算机的系统软件
一类是应用软件

![image-20230630203717520](C:\Users\dukkha\Desktop\study-notes\images\image-20230630203717520.png)



早期的计算机呢是没有系统软件的
那么后来为什么在计算机上增加了系统软件?
主要是通过计算机的系统软件
方便用户对计算机系统的使用
那么系统软件可以管理整个计算机系统
管理计算机系统的硬件,软件
给计算机的使用者提供人机的交界面

系统软件
第一个语言处理程序
高级语言程序想在计算机系统上运行的话
必须有编译程序的支持
经过编译链接以后的生成的这个目标程序
可执行程序
才能够在计算机的系统的硬件上去执行

另一个系统软件中最著名的就是操作系统
管理计算机系统的软硬资源资源
提供人机交互啊
使多个用户，多个程序可以协调的
在一台计算机上执行
使用计算机系统的软硬件的资源

是服务性的程序
数学库
数据库管理系统



另外还有一些应用软件
面向某一个特定的任务
某一个特定的目标





## 第三节摘要

前面已经介绍了计算机系统是由硬件和软件两部分组成的

并且把软件部分进一步划分为系统
软件和应用软件两部分

这种简单的划分
并不能直接体现出软件和硬件之间的这种逻辑关系

我们可以用一个简单的层次结构来描述这种逻辑关系
那下层是计算机系统的硬件
硬件进行了相对的封装
它为软件提供了接口
比如说提供了指令集
软件可以利用这些指令集编写
能够完成一定功能的软件

那么进而软件我们又分成了应用软件和系统软件
系统软件利用硬件提供的接口完成自己的功能
比如说对系统当中的软硬件资源进行管理
给用户提供人机交互界面

应用软件应用系统软件提供的接口
调用系统软件的功能
那么实现自己的功能

那么在这个层次结构当中
把一个非常复杂的计算机系统用一个简单的层次结构来进行表述
通过封装
我们可以分层来实现一个复杂的计算机系统
当然在分层过程当中要处理好各层之间的接口

用于处理系统复杂性的一个方法:抽象

抽象定义为对于一个过程或者是一件制品的某些细节,有目的的隐藏
以便把其他方面细节或者是结构表达的更加清楚

维基百科把抽象定义为指更高级的模型或低级的与低级的实体相对

看到更高级的模型是指在抽象层次上更高
更少的考虑实体或者是系统的实现细节
那么底层的实体系统则更多地考虑了它的实现细节

抽象定义为隐藏系统当中不重要的细节
那么一个系统我们可以从不同的角度去进行抽象
比如说我们从物理构成的角度把计算机系统我们可以抽象成九层
那么依据是每一层计算机它典型的构建模块
最底层是物理抽象
电子设备依靠电子的移动来工作
我们可以用量子机制和麦克斯韦方程来描述电子的移动
那么系统的工作是利用电子元件来完成的

在电子元件层
利用电子在不同物质当中的移动特征来构建电子元件
那这些电子元件体现出来的特征可以用连接点或者是管角
它的电流和电压的特征进行描述

再上一层是模拟电路层
利用下层的接口进一步的构建放大器
滤波器等模拟电路部件
那这些部件工作在连续的电压下

数字电路层利用模拟电路元件构建与门，非门

那么计算机组成原理这门课主要研究的是逻辑层和微体系结构层
学习计算机中主要部件的逻辑实现和主要部件之间的链接
来实现data path和控制

那前面我们讲的是一个从计算机物理结构的这个角度
抽象出了九层：

<img src="C:\Users\dukkha\Desktop\study-notes\images\image-20230630203851785.png" alt="image-20230630203851785" style="zoom:200%;" />




下面从程序员的视角对计算机系统的层次结构进行抽象
根据计算机系统的发展
最早出现的语言是机器语言
那这个时候的机器就是实际的硬件的机器

编程人员利用机器提供的指令集
使用机器语言
也就是二进制代码
直接对硬件机器进行编程
编写完的程序在计算机系统当中
在实际的硬件上直接进行执行

我们知道机器语言是由01代码构成的
那这样的代码很难记忆
很难使用
为了简化程序的编写
在此基础上呢
人们又提出了利用汇编语言进行编程
将机器语言符号化
不直接使用01代码
那么编程的难度进一步降低
但实际上实际的机器或者硬件的机器
并不能直接识别由汇编语言编写的程序
汇编语言编写的程序要在机器上能够正确地运行起来的话
那必须为这台机器提供汇编程序
把汇编语言编写的程序转化成机器语言程序
再在实际的计算机上跑
那就相当于在实际的这个硬件的机器上
我们外层又造了一层软件
那这层软件完成了由汇编语言到机器语言的一个翻译
但是汇编语言是符号语言和机器语言之间的对应关系
基本上是一一对应的一条机器语言的指令
那么对应了一条汇编语言的指令
汇编编写起程序来依然比较复杂
和人类的自然语言还有非常大的这个差距

那么后来人们又提出了高级语言
利用高级语言进行编程
那这个时候高级语言编写的程序要想在计算机上能够正确执行的话
那我们必须要给高级语言提供编译程序或者是解释程序
那由编译程序
解释程序来生成我们的目标程序
生成可执行代码
在实际的机器上去执行
那相当于在我们汇编语言的机器上
外面我们又加了一层软件炸
这台机器在高级语言程序员的眼中似乎就直接可以执行高级语言了
那这是我们实际机器向上的这个发展

那么实际上我们这个机器还在向下发展
一条机器语言指令
执行过程也是很复杂的
比如说要把这条机器语言的指令从存储器当中把它取出来
要把这条指令的地址传送给存储器
要告诉存储器呢进行读
那么这条指令取出来以后
要送给控制器进行译码，
译码的结果再控制去操作数再完成相应的操作

所以这个执行过程也是非常复杂的
而且呢这些操作之间是有先后关系的
有些操作可以同时进行
有些操作是有持续的
必须等着
其他操作做完或者是有些操作做完之后才能接续的去执行
那么这样的话我们把一条机器指令给它继续的进行细化
在每一个时间点上能够执行的那些操作
我们把它放到一个微指令当中
执行之间有先后顺序的那些操作
我们把它放到不同的微指令当中
通过微指令的执行顺序来控制这些操作之间的先后顺序
那么这样的话
对于利用微指令编写微程序来实现机器语言指令的这些程序员来说
他所面对的指令就是一个微程序的机器
这台机器呢能够执行微指令
能够执行微程序
进而实现对机器语言指令
机器语言程序的操作运行

另一层就是操作系统
汇编语言程序的程序员可以利用我们操作系统提供的功能进行编程
那么操作系统呢可以管理软硬件的资源

从程序员的角度可以把计算机系统划分成五个层次

![image-20230630204108720](C:\Users\dukkha\Desktop\study-notes\images\image-20230630204108720.png)

那么这五个层次

![image-20230630204146014](C:\Users\dukkha\Desktop\study-notes\images\image-20230630204146014.png)

底层的微程序机器m0是由硬件来直接执行微指令
微指令之间有一定的先后顺序
多条微指令成了一个微程序
**一个微程序对应了一条机器指令**

那么实际机器这一层实际上是用微指令来解释机器指令

虚拟机m2是用机器语言来解释操作系统
再上一层用汇编语言程序翻译成机器语言程序
上一层用汇编程序翻译成机器语言程序
那么这一层就是汇编语言程序员
他所面对的这台机器啊
用汇编程序完成这个翻译过程
高级语言程序员面对的是高级语言程序
用编译程序把它翻译成汇编语言程序
逐层的往下送
才能完成一条指令的执行
进而完成一个程序的执行
那么这个层次，有些是由硬件实现的
那么有些是通过软件的方式实现的

我们把硬件和软件之间画上一条线

![image-20230630204533395](C:\Users\dukkha\Desktop\study-notes\images\image-20230630204533395.png)

那么虚线下边这些层是真正的由硬件来实现的
虚线上面这些层是由软件来实现的
那么虚线这一部分对应的是计算机系统的软硬件的接口
那这个接口也完成了计算机系统的功能的分配
有一些功能是通过底层的硬件来实现的
有一些功能通过上层的软件来实现

实际上一个功能是用硬件来实现
还是用软件来实现
在逻辑上是等价的
不过如果用硬件实现的话
会造成机器系统底层的硬件会比较复杂
造价比较高
设计周期比较长

那么如果用软件来实现
那这个软件系统呢可能就会比较庞大

因为如果用硬件来做
用一条指令就可以把它做完
如果用软件实现的话
需要指令集当中多条指令的组合才能完成这个功能
那么这个软件它就会大一点
运行的速度会慢一点
这条线完成了计算机系统当中软硬件功能的划分
也提供了软硬件的这个接口
从程序员的角度把计算机划分成了五层
那这个层次结构呢实际上也能够说明计算机系统结构这个概念它的定义



**要清楚计算机组成和计算机系统结构（计算机体系结构）从研究内容上到底有什么区别**
计算机系统结构定义了计算机系统的软硬件的交界面
定义了哪些功能由软件来实现
哪些功能由硬件来实现
提供了上层软件进行编写的时候
那么和硬件进行交互的接口
那么从定义上讲
计算机系统结构指的是程序员所看到的计算机系统的属性
概念性结构和功能特性

比如说程序员
程序员也有多种类型
有机器语言程序员
汇编语言程序员
高级语言程序员

我们这个里边指的程序员就是机器语言程序员
所见到的计算机系统的属性指什么呢
就是指我们机器语言程序员要想编写一个能够在计算机硬件系统上正确执行的程序
它所必须了解的计算机系统的属性
比如说指令集，寄存器文件的组织，内存的编制单位以及指令集能够对哪些类型的数据进行操作
那这些数据在专业术语上我们把它称为数据表示

那么计算机组成设计人员的是实现计算机体系结构所体现出来的这个属性
比如说具体指令的实现
例如在这个指令集当中有没有乘法指令
能够对什么类型的数据做乘法操作
数据的长度是多长
这些内容都是在体系结构当中做的规定
计算机组成的设计者则利用上面的规定来研究如何实现乘法指令
那这个实现是指逻辑实现

这一节我们主要的讲解了这门课程的研究内容
层次结构和应对系统复杂性的一个非常重要的方法，就是抽象的方法
